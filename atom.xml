<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>木子、佳</title>
  
  <subtitle>自律、自立、自由</subtitle>
  <link href="https://blog.lovelee.cn/atom.xml" rel="self"/>
  
  <link href="https://blog.lovelee.cn/"/>
  <updated>2022-09-18T04:54:00.448Z</updated>
  <id>https://blog.lovelee.cn/</id>
  
  <author>
    <name>木子、佳</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>平时做的一些效果</title>
    <link href="https://blog.lovelee.cn/2022/09/18/%E5%B9%B3%E6%97%B6%E5%81%9A%E7%9A%84%E4%B8%80%E4%BA%9B%E6%95%88%E6%9E%9C/"/>
    <id>https://blog.lovelee.cn/2022/09/18/%E5%B9%B3%E6%97%B6%E5%81%9A%E7%9A%84%E4%B8%80%E4%BA%9B%E6%95%88%E6%9E%9C/</id>
    <published>2022-09-18T08:16:45.000Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="记录日常练习的demo"><a href="#记录日常练习的demo" class="headerlink" title="记录日常练习的demo"></a>记录日常练习的demo</h1><div class="note pink no-icon flat"><h2 id="1-仿大咖秀"><a href="#1-仿大咖秀" class="headerlink" title="1. 仿大咖秀"></a>1. 仿大咖秀</h2></div><div class="tabs" id="一些效果"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#一些效果-1">效果</button></li><li class="tab"><button type="button" data-href="#一些效果-2">html</button></li><li class="tab"><button type="button" data-href="#一些效果-3">css</button></li><li class="tab"><button type="button" data-href="#一些效果-4">js</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="一些效果-1"><style>#wrap{    position: relative;    /* height: 100%;    width: 100%; */    /* 实际情况要进行容器样式调整 */    min-height: 300px;     overflow: hidden;    background: url(https://img.gejiba.com/images/8b409cf84518ef14365616c7248c3431.gif) no-repeat center / contain;}.img{    height: 120px;    width: 120px;    background: rgba(255,255,255,.6);    position: absolute;    top: 30px;    left: 46%;    /*------*/    display: block;     transition: transform .1s linear 0s; }.img2{    left:52%;    top:60%;}.blur {        /*filter: url(blur.svg#blur); */        -webkit-filter: blur(10px); /* Chrome, Opera */        -moz-filter: blur(10px);        -ms-filter: blur(10px);                filter: blur(10px);        filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=10, MakeShadow=false); /* IE6~IE9 */}</style><div id="wrap">    <div class="img"></div>    <div class="img img2">        <img src='http://www.loldk.com/res/img/cms/20181206/1544026059189872.png' style="height:100%;width:100%;">    </div></div><script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script><script type="text/javascript">    $(function(){        cursor.init("#wrap",".img","small");        cursor.init("#wrap",".img2","big");    })    var cursor = {        obj:function(elm){            return $(elm);        },        init:function(dom,target,scale){ //鼠标移上元素，偏移目标，相对偏移量();            var scales = scale=="big" ? "big" : "small";            var o = this.obj(dom);            var t = this.obj(target);            o.bind("mousemove",function(e){                var x = e.clientX;                    var y = e.clientY;                var result_x,                    result_y;                if(scales == "small"){                    result_x = Number(x/100).toFixed(5);                    result_y = Number(y/100).toFixed(5);                    }else if(scales == "big"){                    result_x = Number(x/50).toFixed(5);                    result_y = Number(y/50).toFixed(5);                }                t.css({"transform" : "translate3d(-"+result_x+"%, -"+result_y+"%, 0px)","transform-style":" preserve-3d","backface-visibility": "hidden"});            })        }    }</script><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="一些效果-2"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;img img2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="一些效果-3"><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="comment">/* height: 100%;</span></span><br><span class="line"><span class="comment">    width: 100%; */</span></span><br><span class="line">    <span class="comment">/* 实际情况要进行容器样式调整 */</span></span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">300px</span>; </span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">https://img.gejiba.com/images/8b409cf84518ef14365616c7248c3431.gif</span>) no-repeat center / contain;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.img</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,.<span class="number">6</span>);</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">46%</span>;</span><br><span class="line">    <span class="comment">/*------*/</span></span><br><span class="line">    <span class="attribute">display</span>: block; </span><br><span class="line">    <span class="attribute">transition</span>: transform .<span class="number">1s</span> linear <span class="number">0s</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.img2</span>&#123;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">52%</span>;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">60%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.blur</span> &#123;</span><br><span class="line">    <span class="comment">/*filter: url(blur.svg#blur); */</span></span><br><span class="line">    </span><br><span class="line">    -webkit-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">10px</span>); <span class="comment">/* Chrome, Opera */</span></span><br><span class="line">        -moz-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">10px</span>);</span><br><span class="line">        -ms-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">10px</span>);    </span><br><span class="line">            <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">10px</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">filter</span>: progid:DXImageTransform.Microsoft.<span class="built_in">Blur</span>(PixelRadius=<span class="number">10</span>, MakeShadow=false); <span class="comment">/* IE6~IE9 */</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="一些效果-4"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;js/jquery-1.8.0.min.js&quot;</span> &gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        cursor.<span class="title function_">init</span>(<span class="string">&quot;#wrap&quot;</span>,<span class="string">&quot;.img&quot;</span>,<span class="string">&quot;small&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> cursor = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">obj</span>:<span class="keyword">function</span>(<span class="params">elm</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> $(elm);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">init</span>:<span class="keyword">function</span>(<span class="params">dom,target,scale</span>)&#123; <span class="comment">//鼠标移上元素，偏移目标，相对偏移量();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> scales = scale==<span class="string">&quot;big&quot;</span> ? <span class="string">&quot;big&quot;</span> : <span class="string">&quot;small&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> o = <span class="variable language_">this</span>.<span class="title function_">obj</span>(dom);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> t = <span class="variable language_">this</span>.<span class="title function_">obj</span>(target);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            o.<span class="title function_">bind</span>(<span class="string">&quot;mousemove&quot;</span>,<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">var</span> x = e.<span class="property">clientX</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">var</span> y = e.<span class="property">clientY</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">var</span> result_x,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    result_y;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">if</span>(scales == <span class="string">&quot;small&quot;</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    result_x = <span class="title class_">Number</span>(x/<span class="number">100</span>).<span class="title function_">toFixed</span>(<span class="number">5</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    result_y = <span class="title class_">Number</span>(y/<span class="number">100</span>).<span class="title function_">toFixed</span>(<span class="number">5</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(scales == <span class="string">&quot;big&quot;</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    result_x = <span class="title class_">Number</span>(x/<span class="number">50</span>).<span class="title function_">toFixed</span>(<span class="number">5</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    result_y = <span class="title class_">Number</span>(y/<span class="number">50</span>).<span class="title function_">toFixed</span>(<span class="number">5</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                t.<span class="title function_">css</span>(&#123;<span class="string">&quot;transform&quot;</span> : <span class="string">&quot;translate3d(-&quot;</span>+result_x+<span class="string">&quot;%, -&quot;</span>+result_y+<span class="string">&quot;%, 0px)&quot;</span>,<span class="string">&quot;transform-style&quot;</span>:<span class="string">&quot; preserve-3d&quot;</span>,<span class="string">&quot;backface-visibility&quot;</span>: <span class="string">&quot;hidden&quot;</span>&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note pink no-icon flat"><h2 id="2-数字翻页"><a href="#2-数字翻页" class="headerlink" title="2. 数字翻页"></a>2. 数字翻页</h2></div><div class="tabs" id="数字翻页效果"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#数字翻页效果-1">效果</button></li><li class="tab"><button type="button" data-href="#数字翻页效果-2">html</button></li><li class="tab"><button type="button" data-href="#数字翻页效果-3">css</button></li><li class="tab"><button type="button" data-href="#数字翻页效果-4">javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="数字翻页效果-1"><style>    #numBox {        height: 0.6rem;        color: #f0933f;    }    /* // 卡片数字动画 start */    /* // 卡片 - 数字 */    .box-item {        display: inline-block;        width: .34rem;        height: .6rem;        margin-right: 2px;        font-size: .4rem;        line-height: .6rem;        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAABSCAYAAAD0F5ySAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAADF0lEQVR42u2cz2tcVRSAv3PefSHRQURTqCnVkEXFBloaskgZqJvionRV3FoX/i3+BS7c549QEHVhbaGb0lajtFBIScyiFVptYcK89+5x8d6bHzEmWMS8E+4Hw73Mvcycb867dwbenCuf/GhMcBa4CJwAFB+8ADaAG+t9CoDQDCjw6dbdnz/e/umXM4Nnz9+IZamYQTSgFjezV3nT/wwRaTuggmjGTO/1wduL726dvfzhd9dv8sV6n6et1JVfv/3hs0e3bvdjURCLAqsqqKpa5Ihl9piBCKKKZBkSAs+3d07v/vmit3LtanH9Jp8HIAc+enzn3oU4HBKHQ2JZYmVZi1mTqS54SdvqWCpGMOO3+xvn3lw4+WRpbfXrACzubDxYHL58+dooS0VRi8Vq6vLrBhOZChlqRgREld83txaW1lbPBGC22B3k1manLIhlUfdj7KAUzZrKgFpIRYhZRrk7mAHmAoBFw6pq30en1tOkVBuXCJa18Uag3f0MMMNibLLTtM1znWO0C1YQFYsGTbww+i6y8S5n4/5Rb+EH0oZmBhandmndf2bHaT/sfwhX/zbRKxPxe/kpdIjQdHs8pPaQpLyQpLyQpLyQpLyQpLyQpLyQpLyQpLyQpLyQpLyQpLyQpLxwLKXCYRNs/p3mBld3kGdPoSpfXQrNIDt82v9rdfDwodHKk+2jVtifA66eY7mmkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXklRnkel2LCXy71+sS0zEvydTTsRGlW77D2s7Kk39LDLuS5ezN7rkpC6RbeOnvT0qjMtMVbG2NUO0g8tuFGvWtAKq01KiUhcCt4+2aFGksyWxohkSmni1jV1HUrv57FwhISBVhcSIGkQEPBQvhxzJczQEwuzcEBgEYHNh+f3NmV5vMIxxDjOiCKrqo8w8z9E8R0JgfvH0DvAwAAXwzXsr51ce3brdr6udFcsyNwcCaJ5z6tzy/aW11RvAnfZ/FF99cPnSid78W384Prrhe+DL9T5R9hyysQys4fyQjb8AehNh+XbFU44AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDctMjhUMTY6MTk6MzQrMDg6MDCGBlhyAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA3LTI4VDE2OjE5OjM0KzA4OjAw91vgzgAAACB0RVh0c29mdHdhcmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAA4MssAIT8AAAAWdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTPxBq9pAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE1NjQzMDE5NzRwdxKoAAAAEnRFWHRUaHVtYjo6U2l6ZQAxNjY0QkJ8CMvtAAAAQnRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vdG1wL2ltYWdlbGMvaW1ndmlldzJfN18xNTYyODQxNjMyOTA5MzUwMF8zNl9bMF22aZRrAAAAAElFTkSuQmCC) no-repeat center center;        /* background: url(./number-bg.png) no-repeat center center; */        background-size: 100% 100%;        text-align: center;        position: relative;        writing-mode: vertical-lr;        text-orientation: upright;        transform-style: preserve-3d;        overflow: hidden;    }    .box-item span {        position: absolute;        top: .07rem;        left: 50%;        transform: translate(-50%, 0%);        letter-spacing: 10px;        transition: transform 0.5s ease-in-out;    }    /* // 卡片 - 千分符 */    .box-item-symbol {        display: inline-block;        height: inherit;        width: .1rem;        position: relative;    }    .box-item-symbol::after {        content: ',';        display: inline-block;        position: absolute;        font-size: .4rem;        padding: 0 3px;        bottom: -0.02rem;        left: 50%;        transform: translateX(-50%);    }    /* // 卡片数字动画end */</style><div style="margin: 0 auto; height: 100px;width: 100%;display: flex;align-items: center;justify-content: center;">    <!-- 外层容器随意，这里只做演示效果 -->    <div id="numBox"></div></div><script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script><script>$(() => {    let num = 1000;    getRem(1920, 100); // 设计稿 1920 => 1rem = 1px 采用高分屏设计稿    // 先调用一次 ，初始化状态    initAnimation({        start: num    });    // 开启定时器，激活动画效果    setInterval(() => {        num += Math.floor(Math.random()*100);        if(num >= 100000)num = 1000; // 演示效果数字简单判断边界        initAnimation({        start: num    });    }, 2000);})function getRem(pwidth, prem) {    var html = document.getElementsByTagName("html")[0];    var oWidth = document.body.clientWidth || document.documentElement.clientWidth;    html.style.fontSize = oWidth / pwidth * prem + "px";}function initAnimation(opt) {    var num = opt.start || 0;    var elm = $(opt.el || '#numBox');    var old = elm.attr("data-num") || 0;    var format_num = formatMoney(num);    var format_old = formatMoney(old);    var arr = format_num.split('');    var old_arr = format_old.split('');    if (elm.children().length == 0) $('<div class="box-item"><span>0123456789</span></div>').appendTo(elm);    if (arr.length !== 0) {        if (arr.length > old_arr.length) {            var range = arr.length - old_arr.length; // 需要补位            var allArr = arr.concat(old_arr);            var clipArr = allArr.slice(0, allArr.length - old_arr.length * 2);            // console.log(clipArr, '多的' , old_arr);            for (var i = clipArr.length - 1; i > -1; i--) {                var item = clipArr[i];                if (!isNaN(item)) {                    $('<div class="box-item"><span>0123456789</span></div>').prependTo($(elm));                } else {                    $('<div class="box-item-symbol"></div>').prependTo($(elm));                }            }        } else if (arr.length < old_arr.length) {            var range = old_arr.length - arr.length; // 需要补位            var allArr = old_arr.concat(arr);            var clipArr = allArr.slice(0, allArr.length - arr.length * 2);            // console.log(clipArr, '多的' , arr,old_arr);            clipArr.forEach(function (e, i) {                $(elm).children().eq(0).remove(); // 每次删完都是从0 重新开始 所以不用 i            })            giveNumAnimation(num);        } else {            giveNumAnimation(num);        }        elm.attr({            "data-num": num,            "data-old": old        });        giveNumAnimation(num);    }}function giveNumAnimation(num) {    var num = num || 0;    var numberArr = num + ''.split('');    const numberItems = $(".box-item");    numberItems.each(function (i, e) {        $(e).children('span').css({            transform: "translate(-50%, -" + numberArr[i] * 10 + "%)",            // "transform-style":'preserve-3d',            // "transform-origin": "50% 50%"        })    })}function formatMoney(number, decimals = 0, decPoint = '.', thousandsSep = ',') {    decimals = decimals || 0, decPoint = decPoint || '.', thousandsSep = thousandsSep || ',';    number = (number + "").replace(/[^0-9+-Ee.]/g, "")    let n = !isFinite(+number) ? 0 : +number    let prec = !isFinite(+decimals) ? 0 : Math.abs(decimals)    let sep = (typeof thousandsSep === "undefined") ? "," : thousandsSep    let dec = (typeof decPoint === "undefined") ? "." : decPoint    let s = ""    let toFixedFix = function (n, prec) {        let k = Math.pow(10, prec)        return "" + Math.ceil(n * k) / k    }    s = (prec ? toFixedFix(n, prec) : "" + Math.round(n)).split(".")    let re = /(-?\d+)(\d{3})/    while (re.test(s[0])) {        s[0] = s[0].replace(re, "$1" + sep + "$2")    }    if ((s[1] || "").length < prec) {        s[1] = s[1] || ""        s[1] += new Array(prec - s[1].length + 1).join("0")    }    return s.join(dec)}</script><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="数字翻页效果-2"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0 auto; height: 100px;width: 100%;display: flex;align-items: center;justify-content: center;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 外层容器随意，这里只做演示效果 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;numBox&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="数字翻页效果-3"><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#numBox</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0.6rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#f0933f</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* // 卡片数字动画 start */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* // 卡片 - 数字 */</span></span><br><span class="line"><span class="selector-class">.box-item</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: .<span class="number">34rem</span>;</span><br><span class="line">    <span class="attribute">height</span>: .<span class="number">6rem</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: .<span class="number">4rem</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: .<span class="number">6rem</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAABSCAYAAAD0F5ySAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAADF0lEQVR42u2cz2tcVRSAv3PefSHRQURTqCnVkEXFBloaskgZqJvionRV3FoX/i3+BS7c549QEHVhbaGb0lajtFBIScyiFVptYcK89+5x8d6bHzEmWMS8E+4Hw73Mvcycb867dwbenCuf/GhMcBa4CJwAFB+8ADaAG+t9CoDQDCjw6dbdnz/e/umXM4Nnz9+IZamYQTSgFjezV3nT/wwRaTuggmjGTO/1wduL726dvfzhd9dv8sV6n6et1JVfv/3hs0e3bvdjURCLAqsqqKpa5Ihl9piBCKKKZBkSAs+3d07v/vmit3LtanH9Jp8HIAc+enzn3oU4HBKHQ2JZYmVZi1mTqS54SdvqWCpGMOO3+xvn3lw4+WRpbfXrACzubDxYHL58+dooS0VRi8Vq6vLrBhOZChlqRgREld83txaW1lbPBGC22B3k1manLIhlUfdj7KAUzZrKgFpIRYhZRrk7mAHmAoBFw6pq30en1tOkVBuXCJa18Uag3f0MMMNibLLTtM1znWO0C1YQFYsGTbww+i6y8S5n4/5Rb+EH0oZmBhandmndf2bHaT/sfwhX/zbRKxPxe/kpdIjQdHs8pPaQpLyQpLyQpLyQpLyQpLyQpLyQpLyQpLyQpLyQpLyQpLyQpLxwLKXCYRNs/p3mBld3kGdPoSpfXQrNIDt82v9rdfDwodHKk+2jVtifA66eY7mmkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXkpQXklRnkel2LCXy71+sS0zEvydTTsRGlW77D2s7Kk39LDLuS5ezN7rkpC6RbeOnvT0qjMtMVbG2NUO0g8tuFGvWtAKq01KiUhcCt4+2aFGksyWxohkSmni1jV1HUrv57FwhISBVhcSIGkQEPBQvhxzJczQEwuzcEBgEYHNh+f3NmV5vMIxxDjOiCKrqo8w8z9E8R0JgfvH0DvAwAAXwzXsr51ce3brdr6udFcsyNwcCaJ5z6tzy/aW11RvAnfZ/FF99cPnSid78W384Prrhe+DL9T5R9hyysQys4fyQjb8AehNh+XbFU44AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDctMjhUMTY6MTk6MzQrMDg6MDCGBlhyAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA3LTI4VDE2OjE5OjM0KzA4OjAw91vgzgAAACB0RVh0c29mdHdhcmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAA4MssAIT8AAAAWdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTPxBq9pAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE1NjQzMDE5NzRwdxKoAAAAEnRFWHRUaHVtYjo6U2l6ZQAxNjY0QkJ8CMvtAAAAQnRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vdG1wL2ltYWdlbGMvaW1ndmlldzJfN18xNTYyODQxNjMyOTA5MzUwMF8zNl9bMF22aZRrAAAAAElFTkSuQmCC</span>) no-repeat center center;</span><br><span class="line">    <span class="comment">/* background: url(./number-bg.png) no-repeat center center; */</span></span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">writing-mode</span>: vertical-lr;</span><br><span class="line">    <span class="attribute">text-orientation</span>: upright;</span><br><span class="line">    <span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-item</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: .<span class="number">07rem</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, <span class="number">0%</span>);</span><br><span class="line">    <span class="attribute">letter-spacing</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.5s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* // 卡片 - 千分符 */</span></span><br><span class="line"><span class="selector-class">.box-item-symbol</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">height</span>: inherit;</span><br><span class="line">    <span class="attribute">width</span>: .<span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-item-symbol</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;,&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">font-size</span>: .<span class="number">4rem</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: -<span class="number">0.02rem</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* // 卡片数字动画end */</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="数字翻页效果-4"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">$(() =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> num = <span class="number">1000</span>;</span><br><span class="line">    <span class="title function_">getRem</span>(<span class="number">1920</span>, <span class="number">100</span>); <span class="comment">// 设计稿 1920 =&gt; 1rem = 1px 采用高分屏设计稿</span></span><br><span class="line">    <span class="comment">// 先调用一次 ，初始化状态</span></span><br><span class="line">    <span class="title function_">initAnimation</span>(&#123;</span><br><span class="line">        <span class="attr">start</span>: num</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 开启定时器，激活动画效果</span></span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        num += <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">100</span>);</span><br><span class="line">        <span class="keyword">if</span>(num &gt;= <span class="number">100000</span>)num = <span class="number">1000</span>; <span class="comment">// 演示效果数字简单判断边界</span></span><br><span class="line">        <span class="title function_">initAnimation</span>(&#123;</span><br><span class="line">        <span class="attr">start</span>: num</span><br><span class="line">    &#125;);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRem</span>(<span class="params">pwidth, prem</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> html = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;html&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> oWidth = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span>;</span><br><span class="line">    html.<span class="property">style</span>.<span class="property">fontSize</span> = oWidth / pwidth * prem + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">initAnimation</span>(<span class="params">opt</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> num = opt.<span class="property">start</span> || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> elm = $(opt.<span class="property">el</span> || <span class="string">&#x27;#numBox&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> old = elm.<span class="title function_">attr</span>(<span class="string">&quot;data-num&quot;</span>) || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> format_num = <span class="title function_">formatMoney</span>(num);</span><br><span class="line">    <span class="keyword">var</span> format_old = <span class="title function_">formatMoney</span>(old);</span><br><span class="line">    <span class="keyword">var</span> arr = format_num.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> old_arr = format_old.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (elm.<span class="title function_">children</span>().<span class="property">length</span> == <span class="number">0</span>) $(<span class="string">&#x27;&lt;div class=&quot;box-item&quot;&gt;&lt;span&gt;0123456789&lt;/span&gt;&lt;/div&gt;&#x27;</span>).<span class="title function_">appendTo</span>(elm);</span><br><span class="line">    <span class="keyword">if</span> (arr.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr.<span class="property">length</span> &gt; old_arr.<span class="property">length</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> range = arr.<span class="property">length</span> - old_arr.<span class="property">length</span>; <span class="comment">// 需要补位</span></span><br><span class="line">            <span class="keyword">var</span> allArr = arr.<span class="title function_">concat</span>(old_arr);</span><br><span class="line">            <span class="keyword">var</span> clipArr = allArr.<span class="title function_">slice</span>(<span class="number">0</span>, allArr.<span class="property">length</span> - old_arr.<span class="property">length</span> * <span class="number">2</span>);</span><br><span class="line">            <span class="comment">// console.log(clipArr, &#x27;多的&#x27; , old_arr);</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = clipArr.<span class="property">length</span> - <span class="number">1</span>; i &gt; -<span class="number">1</span>; i--) &#123;</span><br><span class="line">                <span class="keyword">var</span> item = clipArr[i];</span><br><span class="line">                <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(item)) &#123;</span><br><span class="line">                    $(<span class="string">&#x27;&lt;div class=&quot;box-item&quot;&gt;&lt;span&gt;0123456789&lt;/span&gt;&lt;/div&gt;&#x27;</span>).<span class="title function_">prependTo</span>($(elm));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    $(<span class="string">&#x27;&lt;div class=&quot;box-item-symbol&quot;&gt;&lt;/div&gt;&#x27;</span>).<span class="title function_">prependTo</span>($(elm));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr.<span class="property">length</span> &lt; old_arr.<span class="property">length</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> range = old_arr.<span class="property">length</span> - arr.<span class="property">length</span>; <span class="comment">// 需要补位</span></span><br><span class="line">            <span class="keyword">var</span> allArr = old_arr.<span class="title function_">concat</span>(arr);</span><br><span class="line">            <span class="keyword">var</span> clipArr = allArr.<span class="title function_">slice</span>(<span class="number">0</span>, allArr.<span class="property">length</span> - arr.<span class="property">length</span> * <span class="number">2</span>);</span><br><span class="line">            <span class="comment">// console.log(clipArr, &#x27;多的&#x27; , arr,old_arr);</span></span><br><span class="line">            clipArr.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">e, i</span>) &#123;</span><br><span class="line">                $(elm).<span class="title function_">children</span>().<span class="title function_">eq</span>(<span class="number">0</span>).<span class="title function_">remove</span>(); <span class="comment">// 每次删完都是从0 重新开始 所以不用 i</span></span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="title function_">giveNumAnimation</span>(num);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">giveNumAnimation</span>(num);</span><br><span class="line">        &#125;</span><br><span class="line">        elm.<span class="title function_">attr</span>(&#123;</span><br><span class="line">            <span class="string">&quot;data-num&quot;</span>: num,</span><br><span class="line">            <span class="string">&quot;data-old&quot;</span>: old</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="title function_">giveNumAnimation</span>(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">giveNumAnimation</span>(<span class="params">num</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> num = num || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> numberArr = num + <span class="string">&#x27;&#x27;</span>.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> numberItems = $(<span class="string">&quot;.box-item&quot;</span>);</span><br><span class="line">    numberItems.<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params">i, e</span>) &#123;</span><br><span class="line">        $(e).<span class="title function_">children</span>(<span class="string">&#x27;span&#x27;</span>).<span class="title function_">css</span>(&#123;</span><br><span class="line">            <span class="attr">transform</span>: <span class="string">&quot;translate(-50%, -&quot;</span> + numberArr[i] * <span class="number">10</span> + <span class="string">&quot;%)&quot;</span>,</span><br><span class="line">            <span class="comment">// &quot;transform-style&quot;:&#x27;preserve-3d&#x27;,</span></span><br><span class="line">            <span class="comment">// &quot;transform-origin&quot;: &quot;50% 50%&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatMoney</span>(<span class="params">number, decimals = <span class="number">0</span>, decPoint = <span class="string">&#x27;.&#x27;</span>, thousandsSep = <span class="string">&#x27;,&#x27;</span></span>) &#123;</span><br><span class="line">    decimals = decimals || <span class="number">0</span>, decPoint = decPoint || <span class="string">&#x27;.&#x27;</span>, thousandsSep = thousandsSep || <span class="string">&#x27;,&#x27;</span>;</span><br><span class="line">    number = (number + <span class="string">&quot;&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/[^0-9+-Ee.]/g</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">let</span> n = !<span class="built_in">isFinite</span>(+number) ? <span class="number">0</span> : +number</span><br><span class="line">    <span class="keyword">let</span> prec = !<span class="built_in">isFinite</span>(+decimals) ? <span class="number">0</span> : <span class="title class_">Math</span>.<span class="title function_">abs</span>(decimals)</span><br><span class="line">    <span class="keyword">let</span> sep = (<span class="keyword">typeof</span> thousandsSep === <span class="string">&quot;undefined&quot;</span>) ? <span class="string">&quot;,&quot;</span> : thousandsSep</span><br><span class="line">    <span class="keyword">let</span> dec = (<span class="keyword">typeof</span> decPoint === <span class="string">&quot;undefined&quot;</span>) ? <span class="string">&quot;.&quot;</span> : decPoint</span><br><span class="line">    <span class="keyword">let</span> s = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">let</span> toFixedFix = <span class="keyword">function</span> (<span class="params">n, prec</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> k = <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, prec)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span> + <span class="title class_">Math</span>.<span class="title function_">ceil</span>(n * k) / k</span><br><span class="line">    &#125;</span><br><span class="line">    s = (prec ? <span class="title function_">toFixedFix</span>(n, prec) : <span class="string">&quot;&quot;</span> + <span class="title class_">Math</span>.<span class="title function_">round</span>(n)).<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">    <span class="keyword">let</span> re = <span class="regexp">/(-?\d+)(\d&#123;3&#125;)/</span></span><br><span class="line">    <span class="keyword">while</span> (re.<span class="title function_">test</span>(s[<span class="number">0</span>])) &#123;</span><br><span class="line">        s[<span class="number">0</span>] = s[<span class="number">0</span>].<span class="title function_">replace</span>(re, <span class="string">&quot;$1&quot;</span> + sep + <span class="string">&quot;$2&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ((s[<span class="number">1</span>] || <span class="string">&quot;&quot;</span>).<span class="property">length</span> &lt; prec) &#123;</span><br><span class="line">        s[<span class="number">1</span>] = s[<span class="number">1</span>] || <span class="string">&quot;&quot;</span></span><br><span class="line">        s[<span class="number">1</span>] += <span class="keyword">new</span> <span class="title class_">Array</span>(prec - s[<span class="number">1</span>].<span class="property">length</span> + <span class="number">1</span>).<span class="title function_">join</span>(<span class="string">&quot;0&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s.<span class="title function_">join</span>(dec)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note purple no-icon flat"><h2 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h2></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;记录日常练习的demo&quot;&gt;&lt;a href=&quot;#记录日常练习的demo&quot; class=&quot;headerlink&quot; title=&quot;记录日常练习的demo&quot;&gt;&lt;/a&gt;记录日常练习的demo&lt;/h1&gt;&lt;div class=&quot;note pink no-icon flat&quot;&gt;&lt;</summary>
      
    
    
    
    
    <category term="demo" scheme="https://blog.lovelee.cn/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>axios使用说明</title>
    <link href="https://blog.lovelee.cn/2022/09/18/axios/"/>
    <id>https://blog.lovelee.cn/2022/09/18/axios/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>原文地址：<a href="https://link.jianshu.com/?t=http://blog.lee-cloud.xyz/post/1/Axios-zhong-wen-wen-dang">lewis1990@amoy</a></p></blockquote><h1 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h1><p>基于promise用于浏览器和node.js的http客户端</p><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul><li>支持浏览器和node.js</li><li>支持promise</li><li>能拦截请求和响应</li><li>能转换请求和响应数据</li><li>能取消请求</li><li>自动转换JSON数据</li><li>浏览器端支持防止CSRF(跨站请求伪造)</li></ul><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>npm安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install axios</span><br></pre></td></tr></table></figure><p>bower安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bower install axios</span><br></pre></td></tr></table></figure><p>通过cdn引入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>发起一个<code>GET</code>请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// Make a request for a user with a given ID</span><br><span class="line">axios.get(&#x27;/user?ID=12345&#x27;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">// Optionally the request above could also be done as</span><br><span class="line">axios.get(&#x27;/user&#x27;, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      ID: 12345</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>发起一个<code>POST</code>请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(&#x27;/user&#x27;, &#123;</span><br><span class="line">    firstName: &#x27;Fred&#x27;,</span><br><span class="line">    lastName: &#x27;Flintstone&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>同时发起多个请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function getUserAccount() &#123;</span><br><span class="line">  return axios.get(&#x27;/user/12345&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getUserPermissions() &#123;</span><br><span class="line">  return axios.get(&#x27;/user/12345/permissions&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .then(axios.spread(function (acct, perms) &#123;</span><br><span class="line">    // Both requests are now complete</span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure><h2 id="axios-api"><a href="#axios-api" class="headerlink" title="axios api"></a>axios api</h2><p>可以通过导入相关配置发起请求</p><h4 id="axios-config"><a href="#axios-config" class="headerlink" title="axios(config)"></a>axios(config)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 发起一个POST请求</span><br><span class="line">axios(&#123;</span><br><span class="line">  method: &#x27;post&#x27;,</span><br><span class="line">  url: &#x27;/user/12345&#x27;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &#x27;Fred&#x27;,</span><br><span class="line">    lastName: &#x27;Flintstone&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">// 获取远程图片</span><br><span class="line">axios(&#123;</span><br><span class="line">  method:&#x27;get&#x27;,</span><br><span class="line">  url:&#x27;http://bit.ly/2mTM3nY&#x27;,</span><br><span class="line">  responseType:&#x27;stream&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">  response.data.pipe(fs.createWriteStream(&#x27;ada_lovelace.jpg&#x27;))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="axios-url-config"><a href="#axios-url-config" class="headerlink" title="axios(url[, config])"></a>axios(url[, config])</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 发起一个GET请求（GET是默认的请求方法）</span><br><span class="line">axios(&#x27;/user/12345&#x27;);</span><br></pre></td></tr></table></figure><h3 id="请求方法别名"><a href="#请求方法别名" class="headerlink" title="请求方法别名"></a>请求方法别名</h3><p>为了方便我们为所有支持的请求方法均提供了别名。</p><h5 id="axios-request-config"><a href="#axios-request-config" class="headerlink" title="axios.request(config)"></a>axios.request(config)</h5><h5 id="axios-get-url-config"><a href="#axios-get-url-config" class="headerlink" title="axios.get(url[, config])"></a>axios.get(url[, config])</h5><h5 id="axios-delete-url-config"><a href="#axios-delete-url-config" class="headerlink" title="axios.delete(url[, config])"></a>axios.delete(url[, config])</h5><h5 id="axios-head-url-config"><a href="#axios-head-url-config" class="headerlink" title="axios.head(url[, config])"></a>axios.head(url[, config])</h5><h5 id="axios-options-url-config"><a href="#axios-options-url-config" class="headerlink" title="axios.options(url[, config])"></a>axios.options(url[, config])</h5><h5 id="axios-post-url-data-config"><a href="#axios-post-url-data-config" class="headerlink" title="axios.post(url[, data[, config]])"></a>axios.post(url[, data[, config]])</h5><h5 id="axios-put-url-data-config"><a href="#axios-put-url-data-config" class="headerlink" title="axios.put(url[, data[, config]])"></a>axios.put(url[, data[, config]])</h5><h5 id="axios-patch-url-data-config"><a href="#axios-patch-url-data-config" class="headerlink" title="axios.patch(url[, data[, config]])"></a>axios.patch(url[, data[, config]])</h5><h6 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h6><p>当使用以上别名方法时，<code>url</code>，<code>method</code>和<code>data</code>等属性不用在config重复声明。</p><h3 id="同时发生的请求"><a href="#同时发生的请求" class="headerlink" title="同时发生的请求"></a>同时发生的请求</h3><p>一下两个用来处理同时发生多个请求的辅助函数</p><h5 id="axios-all-iterable"><a href="#axios-all-iterable" class="headerlink" title="axios.all(iterable)"></a>axios.all(iterable)</h5><h5 id="axios-spread-callback"><a href="#axios-spread-callback" class="headerlink" title="axios.spread(callback)"></a>axios.spread(callback)</h5><h3 id="创建一个实例"><a href="#创建一个实例" class="headerlink" title="创建一个实例"></a>创建一个实例</h3><p>你可以创建一个拥有通用配置的axios实例</p><h4 id="axios-creat-config"><a href="#axios-creat-config" class="headerlink" title="axios.creat([config])"></a>axios.creat([config])</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var instance = axios.create(&#123;</span><br><span class="line">  baseURL: &#x27;https://some-domain.com/api/&#x27;,</span><br><span class="line">  timeout: 1000,</span><br><span class="line">  headers: &#123;&#x27;X-Custom-Header&#x27;: &#x27;foobar&#x27;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="实例的方法"><a href="#实例的方法" class="headerlink" title="实例的方法"></a>实例的方法</h3><p>以下是所有可用的实例方法，额外声明的配置将与实例配置合并</p><h5 id="axios-request-config-1"><a href="#axios-request-config-1" class="headerlink" title="axios#request(config)"></a>axios#request(config)</h5><h5 id="axios-get-url-config-1"><a href="#axios-get-url-config-1" class="headerlink" title="axios#get(url[, config])"></a>axios#get(url[, config])</h5><h5 id="axios-delete-url-config-1"><a href="#axios-delete-url-config-1" class="headerlink" title="axios#delete(url[, config])"></a>axios#delete(url[, config])</h5><h5 id="axios-head-url-config-1"><a href="#axios-head-url-config-1" class="headerlink" title="axios#head(url[, config])"></a>axios#head(url[, config])</h5><h5 id="axios-options-url-config-1"><a href="#axios-options-url-config-1" class="headerlink" title="axios#options(url[, config])"></a>axios#options(url[, config])</h5><h5 id="axios-post-url-data-config-1"><a href="#axios-post-url-data-config-1" class="headerlink" title="axios#post(url[, data[, config]])"></a>axios#post(url[, data[, config]])</h5><h5 id="axios-put-url-data-config-1"><a href="#axios-put-url-data-config-1" class="headerlink" title="axios#put(url[, data[, config]])"></a>axios#put(url[, data[, config]])</h5><h5 id="axios-patch-url-data-config-1"><a href="#axios-patch-url-data-config-1" class="headerlink" title="axios#patch(url[, data[, config]])"></a>axios#patch(url[, data[, config]])</h5><h2 id="请求配置"><a href="#请求配置" class="headerlink" title="请求配置"></a>请求配置</h2><p>下面是所有可用的请求配置项，只有<code>url</code>是必填，默认的请求方法是<code>GET</code>，如果没有指定请求方法的话。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // `url` 是请求的接口地址</span><br><span class="line">  url: &#x27;/user&#x27;,</span><br><span class="line"></span><br><span class="line">  // `method` 是请求的方法</span><br><span class="line">  method: &#x27;get&#x27;, // 默认值</span><br><span class="line"></span><br><span class="line">  // 如果url不是绝对路径，那么会将baseURL和url拼接作为请求的接口地址</span><br><span class="line">  // 用来区分不同环境，建议使用</span><br><span class="line">  baseURL: &#x27;https://some-domain.com/api/&#x27;,</span><br><span class="line"></span><br><span class="line">  // 用于请求之前对请求数据进行操作</span><br><span class="line">  // 只用当请求方法为‘PUT’，‘POST’和‘PATCH’时可用</span><br><span class="line">  // 最后一个函数需return出相应数据</span><br><span class="line">  // 可以修改headers</span><br><span class="line">  transformRequest: [function (data, headers) &#123;</span><br><span class="line">    // 可以对data做任何操作</span><br><span class="line"></span><br><span class="line">    return data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  // 用于对相应数据进行处理</span><br><span class="line">  // 它会通过then或者catch</span><br><span class="line">  transformResponse: [function (data) &#123;</span><br><span class="line">    // 可以对data做任何操作</span><br><span class="line"></span><br><span class="line">    return data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  // `headers` are custom headers to be sent</span><br><span class="line">  headers: &#123;&#x27;X-Requested-With&#x27;: &#x27;XMLHttpRequest&#x27;&#125;,</span><br><span class="line"></span><br><span class="line">  // URL参数</span><br><span class="line">  // 必须是一个纯对象或者 URL参数对象</span><br><span class="line">  params: &#123;</span><br><span class="line">    ID: 12345</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 是一个可选的函数负责序列化`params`</span><br><span class="line">  // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span><br><span class="line">  paramsSerializer: function(params) &#123;</span><br><span class="line">    return Qs.stringify(params, &#123;arrayFormat: &#x27;brackets&#x27;&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 请求体数据</span><br><span class="line">  // 只有当请求方法为&#x27;PUT&#x27;, &#x27;POST&#x27;,和&#x27;PATCH&#x27;时可用</span><br><span class="line">  // 当没有设置`transformRequest`时，必须是以下几种格式</span><br><span class="line">  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span><br><span class="line">  // - Browser only: FormData, File, Blob</span><br><span class="line">  // - Node only: Stream, Buffer</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &#x27;Fred&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 请求超时时间（毫秒）</span><br><span class="line">  timeout: 1000,</span><br><span class="line"></span><br><span class="line">  // 是否携带cookie信息</span><br><span class="line">  withCredentials: false, // default</span><br><span class="line"></span><br><span class="line">  // 统一处理request让测试更加容易</span><br><span class="line">  // 返回一个promise并提供一个可用的response</span><br><span class="line">  // 其实我并不知道这个是干嘛的！！！！</span><br><span class="line">  // (see lib/adapters/README.md).</span><br><span class="line">  adapter: function (config) &#123;</span><br><span class="line">    /* ... */</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `auth` indicates that HTTP Basic auth should be used, and supplies credentials.</span><br><span class="line">  // This will set an `Authorization` header, overwriting any existing</span><br><span class="line">  // `Authorization` custom headers you have set using `headers`.</span><br><span class="line">  auth: &#123;</span><br><span class="line">    username: &#x27;janedoe&#x27;,</span><br><span class="line">    password: &#x27;s00pers3cret&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 响应格式</span><br><span class="line">  // 可选项 &#x27;arraybuffer&#x27;, &#x27;blob&#x27;, &#x27;document&#x27;, &#x27;json&#x27;, &#x27;text&#x27;, &#x27;stream&#x27;</span><br><span class="line">  responseType: &#x27;json&#x27;, // 默认值是json</span><br><span class="line"></span><br><span class="line">  // `xsrfCookieName` is the name of the cookie to use as a value for xsrf token</span><br><span class="line">  xsrfCookieName: &#x27;XSRF-TOKEN&#x27;, // default</span><br><span class="line"></span><br><span class="line">  // `xsrfHeaderName` is the name of the http header that carries the xsrf token value</span><br><span class="line">  xsrfHeaderName: &#x27;X-XSRF-TOKEN&#x27;, // default</span><br><span class="line"></span><br><span class="line">  // 处理上传进度事件</span><br><span class="line">  onUploadProgress: function (progressEvent) &#123;</span><br><span class="line">    // Do whatever you want with the native progress event</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 处理下载进度事件</span><br><span class="line">  onDownloadProgress: function (progressEvent) &#123;</span><br><span class="line">    // Do whatever you want with the native progress event</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 设置http响应内容的最大长度</span><br><span class="line">  maxContentLength: 2000,</span><br><span class="line"></span><br><span class="line">  // 定义可获得的http响应状态码</span><br><span class="line">  // return true、设置为null或者undefined，promise将resolved,否则将rejected</span><br><span class="line">  validateStatus: function (status) &#123;</span><br><span class="line">    return status &gt;= 200 &amp;&amp; status &lt; 300; // default</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `maxRedirects` defines the maximum number of redirects to follow in node.js.</span><br><span class="line">  // If set to 0, no redirects will be followed.</span><br><span class="line">  // 最大重定向次数？没用过不清楚</span><br><span class="line">  maxRedirects: 5, // default</span><br><span class="line"></span><br><span class="line">  // `httpAgent` and `httpsAgent` define a custom agent to be used when performing http</span><br><span class="line">  // and https requests, respectively, in node.js. This allows options to be added like</span><br><span class="line">  // `keepAlive` that are not enabled by default.</span><br><span class="line">  httpAgent: new http.Agent(&#123; keepAlive: true &#125;),</span><br><span class="line">  httpsAgent: new https.Agent(&#123; keepAlive: true &#125;),</span><br><span class="line"></span><br><span class="line">  // &#x27;proxy&#x27; defines the hostname and port of the proxy server</span><br><span class="line">  // Use `false` to disable proxies, ignoring environment variables.</span><br><span class="line">  // `auth` indicates that HTTP Basic auth should be used to connect to the proxy, and</span><br><span class="line">  // supplies credentials.</span><br><span class="line">  // This will set an `Proxy-Authorization` header, overwriting any existing</span><br><span class="line">  // `Proxy-Authorization` custom headers you have set using `headers`.</span><br><span class="line">  // 代理</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    host: &#x27;127.0.0.1&#x27;,</span><br><span class="line">    port: 9000,</span><br><span class="line">    auth: &#123;</span><br><span class="line">      username: &#x27;mikeymike&#x27;,</span><br><span class="line">      password: &#x27;rapunz3l&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `cancelToken` specifies a cancel token that can be used to cancel the request</span><br><span class="line">  // (see Cancellation section below for details)</span><br><span class="line">  // 用于取消请求？又是一个不知道怎么用的配置项</span><br><span class="line">  cancelToken: new CancelToken(function (cancel) &#123;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="响应组成"><a href="#响应组成" class="headerlink" title="响应组成"></a>响应组成</h3><p>response由以下几部分信息组成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 服务端返回的数据</span><br><span class="line">  data: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  // 服务端返回的状态码</span><br><span class="line">  status: 200,</span><br><span class="line"></span><br><span class="line">  // 服务端返回的状态信息</span><br><span class="line">  statusText: &#x27;OK&#x27;,</span><br><span class="line"></span><br><span class="line">  // 响应头</span><br><span class="line">  // 所有的响应头名称都是小写</span><br><span class="line">  headers: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  // axios请求配置</span><br><span class="line">  config: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  // 请求</span><br><span class="line">  request: &#123;&#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure><p>用<code>then</code>接收以下响应信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;/user/12345&#x27;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">    console.log(response.data);</span><br><span class="line">    console.log(response.status);</span><br><span class="line">    console.log(response.statusText);</span><br><span class="line">    console.log(response.headers);</span><br><span class="line">    console.log(response.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h2 id="默认配置"><a href="#默认配置" class="headerlink" title="默认配置"></a>默认配置</h2><h3 id="全局修改axios默认配置"><a href="#全局修改axios默认配置" class="headerlink" title="全局修改axios默认配置"></a>全局修改axios默认配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL = &#x27;https://api.example.com&#x27;;</span><br><span class="line">axios.defaults.headers.common[&#x27;Authorization&#x27;] = AUTH_TOKEN;</span><br><span class="line">axios.defaults.headers.post[&#x27;Content-Type&#x27;] = &#x27;application/x-www-form-urlencoded&#x27;;</span><br></pre></td></tr></table></figure><h3 id="实例默认配置"><a href="#实例默认配置" class="headerlink" title="实例默认配置"></a>实例默认配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 创建实例时修改配置</span><br><span class="line">var instance = axios.create(&#123;</span><br><span class="line">  baseURL: &#x27;https://api.example.com&#x27;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 实例创建之后修改配置</span><br><span class="line">instance.defaults.headers.common[&#x27;Authorization&#x27;] = AUTH_TOKEN;</span><br></pre></td></tr></table></figure><h3 id="配置优先级"><a href="#配置优先级" class="headerlink" title="配置优先级"></a>配置优先级</h3><p>配置项通过一定的规则合并，<code>request config</code> &gt; <code>instance.defaults</code> &gt; <code>系统默认</code>，优先级高的覆盖优先级低的。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 创建一个实例，这时的超时时间为系统默认的 0</span><br><span class="line">var instance = axios.create();</span><br><span class="line"></span><br><span class="line">// 通过instance.defaults重新设置超时时间为2.5s，因为优先级比系统默认高</span><br><span class="line">instance.defaults.timeout = 2500;</span><br><span class="line"></span><br><span class="line">// 通过request config重新设置超时时间为5s，因为优先级比instance.defaults和系统默认都高</span><br><span class="line">instance.get(&#x27;/longRequest&#x27;, &#123;</span><br><span class="line">  timeout: 5000</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>你可以在<code>then</code>和<code>catch</code>之前拦截请求和响应。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 添加一个请求拦截器</span><br><span class="line">axios.interceptors.request.use(function (config) &#123;</span><br><span class="line">    // Do something before request is sent</span><br><span class="line">    return config;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    // Do something with request error</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">// 添加一个响应拦截器</span><br><span class="line">axios.interceptors.response.use(function (response) &#123;</span><br><span class="line">    // Do something with response data</span><br><span class="line">    return response;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    // Do something with response error</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>如果之后想移除拦截器你可以这么做</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var myInterceptor = axios.interceptors.request.use(function () &#123;/*...*/&#125;);</span><br><span class="line">axios.interceptors.request.eject(myInterceptor);</span><br></pre></td></tr></table></figure><p>你也可以为axios实例添加一个拦截器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var instance = axios.create();</span><br><span class="line">instance.interceptors.request.use(function () &#123;/*...*/&#125;);</span><br></pre></td></tr></table></figure><h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;/user/12345&#x27;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    if (error.response) &#123;</span><br><span class="line">      // 发送请求后，服务端返回的响应码不是 2xx   </span><br><span class="line">      console.log(error.response.data);</span><br><span class="line">      console.log(error.response.status);</span><br><span class="line">      console.log(error.response.headers);</span><br><span class="line">    &#125; else if (error.request) &#123;</span><br><span class="line">      // 发送请求但是没有响应返回</span><br><span class="line">      console.log(error.request);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      // 其他错误</span><br><span class="line">      console.log(&#x27;Error&#x27;, error.message);</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(error.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>你可以用<code>validateStatus</code>定义一个http状态码返回的范围.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;/user/12345&#x27;, &#123;</span><br><span class="line">  validateStatus: function (status) &#123;</span><br><span class="line">    return status &lt; 500; // Reject only if the status code is greater than or equal to 500</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="取消请求"><a href="#取消请求" class="headerlink" title="取消请求"></a>取消请求</h2><p>你可以通过<code>cancel token</code>来取消一个请求</p><blockquote><p>The axios cancel token API is based on the withdrawn <a href="https://link.jianshu.com/?t=https://github.com/tc39/proposal-cancelable-promises">cancelable promises proposal</a>.</p></blockquote><p>You can create a cancel token using the <code>CancelToken.source</code> factory as shown below:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var CancelToken = axios.CancelToken;</span><br><span class="line">var source = CancelToken.source();</span><br><span class="line"></span><br><span class="line">axios.get(&#x27;/user/12345&#x27;, &#123;</span><br><span class="line">  cancelToken: source.token</span><br><span class="line">&#125;).catch(function(thrown) &#123;</span><br><span class="line">  if (axios.isCancel(thrown)) &#123;</span><br><span class="line">    console.log(&#x27;Request canceled&#x27;, thrown.message);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    // handle error</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// cancel the request (the message parameter is optional)</span><br><span class="line">source.cancel(&#x27;Operation canceled by the user.&#x27;);</span><br></pre></td></tr></table></figure><p>You can also create a cancel token by passing an executor function to the <code>CancelToken</code>constructor:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var CancelToken = axios.CancelToken;</span><br><span class="line">var cancel;</span><br><span class="line"></span><br><span class="line">axios.get(&#x27;/user/12345&#x27;, &#123;</span><br><span class="line">  cancelToken: new CancelToken(function executor(c) &#123;</span><br><span class="line">    // An executor function receives a cancel function as a parameter</span><br><span class="line">    cancel = c;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// cancel the request</span><br><span class="line">cancel();</span><br></pre></td></tr></table></figure><blockquote><p>Note: you can cancel several requests with the same cancel token.</p></blockquote><h2 id="Using-application-x-www-form-urlencoded-format"><a href="#Using-application-x-www-form-urlencoded-format" class="headerlink" title="Using application/x-www-form-urlencoded format"></a>Using application/x-www-form-urlencoded format</h2><p>By default, axios serializes JavaScript objects to <code>JSON</code>. To send data in the <code>application/x-www-form-urlencoded</code> format instead, you can use one of the following options.</p><h3 id="Browser"><a href="#Browser" class="headerlink" title="Browser"></a>Browser</h3><p>In a browser, you can use the <a href="https://link.jianshu.com/?t=https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams"><code>URLSearchParams</code></a> API as follows:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var params = new URLSearchParams();</span><br><span class="line">params.append(&#x27;param1&#x27;, &#x27;value1&#x27;);</span><br><span class="line">params.append(&#x27;param2&#x27;, &#x27;value2&#x27;);</span><br><span class="line">axios.post(&#x27;/foo&#x27;, params);</span><br></pre></td></tr></table></figure><blockquote><p>Note that <code>URLSearchParams</code> is not supported by all browsers (see <a href="https://link.jianshu.com/?t=http://www.caniuse.com/%23feat=urlsearchparams">caniuse.com</a>), but there is a <a href="https://link.jianshu.com/?t=https://github.com/WebReflection/url-search-params">polyfill</a> available (make sure to polyfill the global environment).</p></blockquote><p>Alternatively, you can encode data using the <a href="https://link.jianshu.com/?t=https://github.com/ljharb/qs"><code>qs</code></a> library:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var qs = require(&#x27;qs&#x27;);</span><br><span class="line">axios.post(&#x27;/foo&#x27;, qs.stringify(&#123; &#x27;bar&#x27;: 123 &#125;));</span><br></pre></td></tr></table></figure><h3 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h3><p>In node.js, you can use the <a href="https://link.jianshu.com/?t=https://nodejs.org/api/querystring.html"><code>querystring</code></a> module as follows:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var querystring = require(&#x27;querystring&#x27;);</span><br><span class="line">axios.post(&#x27;http://something.com/&#x27;, querystring.stringify(&#123; foo: &#x27;bar&#x27; &#125;));</span><br></pre></td></tr></table></figure><p>You can also use the <a href="https://link.jianshu.com/?t=https://github.com/ljharb/qs"><code>qs</code></a> library.</p><h2 id="Semver"><a href="#Semver" class="headerlink" title="Semver"></a>Semver</h2><p>Until axios reaches a <code>1.0</code> release, breaking changes will be released with a new minor version. For example <code>0.5.1</code>, and <code>0.5.4</code> will have the same API, but <code>0.6.0</code> will have breaking changes.</p><h2 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h2><p>axios depends on a native ES6 Promise implementation to be <a href="https://link.jianshu.com/?t=http://caniuse.com/promises">supported</a>.<br>If your environment doesn’t support ES6 Promises, you can <a href="https://link.jianshu.com/?t=https://github.com/jakearchibald/es6-promise">polyfill</a>.</p><h2 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h2><p>axios includes <a href="https://link.jianshu.com/?t=http://typescriptlang.org">TypeScript</a> definitions.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import axios from &#x27;axios&#x27;;</span><br><span class="line">axios.get(&#x27;/user?ID=12345&#x27;);</span><br></pre></td></tr></table></figure><h2 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h2><ul><li><a href="https://link.jianshu.com/?t=https://github.com/axios/axios/blob/master/CHANGELOG.md">Changelog</a></li><li><a href="https://link.jianshu.com/?t=https://github.com/axios/axios/blob/master/UPGRADE_GUIDE.md">Upgrade Guide</a></li><li><a href="https://link.jianshu.com/?t=https://github.com/axios/axios/blob/master/ECOSYSTEM.md">Ecosystem</a></li><li><a href="https://link.jianshu.com/?t=https://github.com/axios/axios/blob/master/CONTRIBUTING.md">Contributing Guide</a></li><li><a href="https://link.jianshu.com/?t=https://github.com/axios/axios/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a></li></ul><h2 id="Credits"><a href="#Credits" class="headerlink" title="Credits"></a>Credits</h2><p>axios is heavily inspired by the <a href="https://link.jianshu.com/?t=https://docs.angularjs.org/api/ng/service/%2524http">$http service</a> provided in <a href="https://link.jianshu.com/?t=https://angularjs.org/">Angular</a>. Ultimately axios is an effort to provide a standalone <code>$http</code>-like service for use outside of Angular.</p><h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>MIT</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;原文地址：&lt;a href=&quot;https://link.jianshu.com/?t=http://blog.lee-cloud.xyz/post/1/Axios-zhong-wen-wen-dang&quot;&gt;lewis1990@amoy&lt;/a&gt;&lt;/p&gt;
</summary>
      
    
    
    
    <category term="前端" scheme="https://blog.lovelee.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="axios" scheme="https://blog.lovelee.cn/tags/axios/"/>
    
  </entry>
  
  <entry>
    <title>git+gitee</title>
    <link href="https://blog.lovelee.cn/2022/09/18/git+gitee/"/>
    <id>https://blog.lovelee.cn/2022/09/18/git+gitee/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="使用Git-码云-："><a href="#使用Git-码云-：" class="headerlink" title="使用Git + 码云 ："></a><strong>使用Git + 码云 ：</strong></h1><h2 id="1-使用Gitee和使用GitHub类似，我们在Gitee上注册账号并登录后，需要先上传自己的SSH公钥。选择右上角用户头像-gt-菜单“修改资料”，然后选择“SSH公钥”，填写一个便于识别的标题，然后把用户主目录下的-ssh-id-rsa-pub-文件的内容粘贴进去："><a href="#1-使用Gitee和使用GitHub类似，我们在Gitee上注册账号并登录后，需要先上传自己的SSH公钥。选择右上角用户头像-gt-菜单“修改资料”，然后选择“SSH公钥”，填写一个便于识别的标题，然后把用户主目录下的-ssh-id-rsa-pub-文件的内容粘贴进去：" class="headerlink" title="1.使用Gitee和使用GitHub类似，我们在Gitee上注册账号并登录后，需要先上传自己的SSH公钥。选择右上角用户头像 -&gt; 菜单“修改资料”，然后选择“SSH公钥”，填写一个便于识别的标题，然后把用户主目录下的.ssh/id_rsa.pub****文件的内容粘贴进去："></a><strong>1.使用Gitee和使用GitHub类似，我们在Gitee上注册账号并登录后，需要先上传自己的SSH公钥。选择右上角用户头像 -&gt; 菜单“修改资料”，然后选择“SSH公钥”，填写一个便于识别的标题，然后把用户主目录下的</strong><strong>.ssh/id_rsa.pub****文件的内容粘贴进去：</strong></h2><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/457f43d33117c0a36dabc701ab458e72/0?w=640&h=502" alt="img">         </p><p>点击“确定”即可完成并看到刚才添加的Key：</p><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/c4ca8f92aba156eb7ddfdc98f0b6ebcb/0?w=640&h=216" alt="img">         </p><p>如果我们已经有了一个本地的git仓库（例如，一个名为learngit的本地库），如何把它关联到Gitee的远程库上呢？</p><p>首先，我们在Gitee上创建一个新的项目，选择右上角用户头像 -&gt; 菜单“控制面板”，然后点击“创建项目”：</p><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/644923703b9ece4ff808e94f66b58e97/0?w=640&h=587" alt="img">         </p><p>项目名称最好与本地库保持一致：</p><p>然后，我们在本地库上使用命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add</span><br></pre></td></tr></table></figure><p>把它和Gitee的远程库关联：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@gitee.com:liaoxuefeng/learngit.git</span><br></pre></td></tr></table></figure><p>之后，就可以正常地用git push和git pull推送了！</p><p>如果在使用命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add</span><br></pre></td></tr></table></figure><p>时报错：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@gitee.com:liaoxuefeng/learngit.git</span><br><span class="line">fatal: remote origin already exists.</span><br></pre></td></tr></table></figure><p>这说明本地库已经关联了一个名叫</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">origin</span><br></pre></td></tr></table></figure><p>的远程库，此时，可以先用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p>查看远程库信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line">origingit@github.com:michaelliao/learngit.git (fetch)</span><br><span class="line">origingit@github.com:michaelliao/learngit.git (push)</span><br></pre></td></tr></table></figure><p>可以看到，本地库已经关联了origin的远程库，并且，该远程库指向GitHub。</p><p>我们可以删除已有的GitHub远程库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote rm origin</span><br></pre></td></tr></table></figure><p>再关联Gitee的远程库（注意路径中需要填写正确的用户名）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@gitee.com:liaoxuefeng/learngit.git</span><br></pre></td></tr></table></figure><p>此时，我们再查看远程库信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line">origingit@gitee.com:liaoxuefeng/learngit.git (fetch)</span><br><span class="line">origingit@gitee.com:liaoxuefeng/learngit.git (push)</span><br></pre></td></tr></table></figure><p>现在可以看到，origin已经被关联到Gitee的远程库了。通过</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push</span><br></pre></td></tr></table></figure><p>命令就可以把本地库推送到Gitee上。</p><p>有的小伙伴又要问了，一个本地库能不能既关联GitHub，又关联Gitee呢？</p><p>答案是肯定的，因为git本身是分布式版本控制系统，可以同步到另外一个远程库，当然也可以同步到另外两个远程库。</p><p>使用多个远程库时，我们要注意，git给远程库起的默认名称是origin，如果有多个远程库，我们需要用不同的名称来标识不同的远程库。</p><p>仍然以learngit本地库为例，我们先删除已关联的名为origin的远程库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote rm origin</span><br></pre></td></tr></table></figure><p>然后，先关联GitHub的远程库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add github git@github.com:michaelliao/learngit.git</span><br></pre></td></tr></table></figure><p>注意，远程库的名称叫github，不叫origin了。</p><p>接着，再关联Gitee的远程库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add gitee git@gitee.com:liaoxuefeng/learngit.git</span><br></pre></td></tr></table></figure><p>同样注意，远程库的名称叫gitee，不叫origin。</p><p>现在，我们用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p>查看远程库信息，可以看到两个远程库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line">giteegit@gitee.com:liaoxuefeng/learngit.git (fetch)</span><br><span class="line">giteegit@gitee.com:liaoxuefeng/learngit.git (push)</span><br><span class="line">githubgit@github.com:michaelliao/learngit.git (fetch)</span><br><span class="line">githubgit@github.com:michaelliao/learngit.git (push)</span><br></pre></td></tr></table></figure><p>如果要推送到GitHub，使用命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push github master</span><br></pre></td></tr></table></figure><p>如果要推送到Gitee，使用命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push gitee master</span><br></pre></td></tr></table></figure><p>这样一来，我们的本地库就可以同时与多个远程库互相同步：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">┌─────────┐ ┌─────────┐</span><br><span class="line">│ GitHub  │ │  Gitee  │</span><br><span class="line">└─────────┘ └─────────┘</span><br><span class="line">     ▲           ▲</span><br><span class="line">     └─────┬─────┘</span><br><span class="line">           │</span><br><span class="line">    ┌─────────────┐</span><br><span class="line">    │ Local Repo  │</span><br><span class="line">    └─────────────┘</span><br></pre></td></tr></table></figure><h2 id="2-重头戏"><a href="#2-重头戏" class="headerlink" title="2.重头戏"></a><strong>2.重头戏</strong></h2><h3 id="插播剧情：使用git软件创建关联（省时省力，与git命令配合使用效果更佳）"><a href="#插播剧情：使用git软件创建关联（省时省力，与git命令配合使用效果更佳）" class="headerlink" title="插播剧情：使用git软件创建关联（省时省力，与git命令配合使用效果更佳）"></a><strong>插播剧情：使用git软件创建关联（省时省力，与git命令配合使用效果更佳）</strong></h3><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/2963cbe2a2892415d4d7ae05ff6ce62f/0?w=509&h=412" alt="img">         </p><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/adcc47ec10b1bbce78a222fb6251722a/0?w=702&h=295" alt="img">         </p><h4 id="有一点要注意：在-D-WangQiang-Source-Repos-文件夹下，一定-不能有-wqMV-这个文件夹，但是我们还要把名字输入上，系统会自动创建目录，”人性化操作”-否则会报错，目录已存在。"><a href="#有一点要注意：在-D-WangQiang-Source-Repos-文件夹下，一定-不能有-wqMV-这个文件夹，但是我们还要把名字输入上，系统会自动创建目录，”人性化操作”-否则会报错，目录已存在。" class="headerlink" title="有一点要注意：在 D:/WangQiang/Source/Repos 文件夹下，一定****不能有 -  wqMV 这个文件夹，但是我们还要把名字输入上，系统会自动创建目录，”人性化操作”,否则会报错，目录已存在。"></a><strong>有一点要注意：在 D:/WangQiang/Source/Repos 文件夹下，一定****不能有 -</strong>  <strong>wqMV</strong> <strong>这个文件夹，但是我们还要把名字输入上，系统会自动创建目录，”人性化操作”,否则会报错，目录已存在。</strong></h4><h4 id="点击clone，等待进入程序，即可完成创建目录并完成关联"><a href="#点击clone，等待进入程序，即可完成创建目录并完成关联" class="headerlink" title="点击clone，等待进入程序，即可完成创建目录并完成关联"></a><strong>点击clone，等待进入程序，即可完成创建目录并完成关联</strong></h4><p><a href="https://blog.csdn.net/relyeditor/article/details/85627655">参考链接</a></p><h3 id="2-1-git-remote-v-查看当前git仓库关联的远程库信息"><a href="#2-1-git-remote-v-查看当前git仓库关联的远程库信息" class="headerlink" title="2.1 git remote -v  查看当前git仓库关联的远程库信息"></a><strong>2.1 git remote -v  查看当前git仓库关联的远程库信息</strong></h3><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/c18c08c1349f996eb1b239b61e4fc20d/0?w=436&h=113" alt="img">         </p><h3 id="2-2-关联多个远程仓库"><a href="#2-2-关联多个远程仓库" class="headerlink" title="2.2 关联多个远程仓库"></a><strong>2.2 关联多个远程仓库</strong></h3><p>一个本地库既关联GitHub，又关联Gitee。</p><p>使用多个远程库时，我们要注意，git给远程库起的默认名称是 origin  </p><p>使用 git remote add 名称 地址 来增加新的远程仓库规则 ，如下图，就多了一个wx的仓库（地址随意）</p><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/3c5979734d2bce5e4f29628cdd25d444/0?w=597&h=119" alt="img">         </p><h3 id="2-3-删除无用仓库"><a href="#2-3-删除无用仓库" class="headerlink" title="2.3 删除无用仓库"></a><strong>2.3 删除无用仓库</strong></h3><p>git remote rm 名称 即删除掉默认命名的 origin 仓库关联</p><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/b6fa9baa1de987fa7a71653e559324ff/0?w=424&h=84" alt="img">         </p><h3 id="2-4-提交文件-（全部提交）"><a href="#2-4-提交文件-（全部提交）" class="headerlink" title="2.4 提交文件 （全部提交）"></a><strong>2.4 提交文件 （全部提交）</strong></h3><p>git add .  即可提交全部文件(系统会自动比对)到缓存区</p><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/26cd6d92170335fcea94387f0d30a662/0?w=495&h=26" alt="img">         </p><p>git commit -m “提交备注” 即本次提交的信息说明</p><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/6b74853d586e544b0d0ebe6ae6628853/0?w=492&h=40" alt="img">         </p><p>git push 名称 主/分支 即可按照仓库昵称提交到远程仓库</p><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/86124f3fd5258c899c04638fdc2a7b47/0?w=458&h=36" alt="img">         </p><h3 id="2-5-查看线上仓库"><a href="#2-5-查看线上仓库" class="headerlink" title="2.5 查看线上仓库"></a><strong>2.5 查看线上仓库</strong></h3><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/b4a34576ef9a8fd29f2bdfaf894edf34/0?w=1011&h=306" alt="img">         </p><h2 id="3-关于码云的公钥-（一般使用账户公钥，权限大于等于仓库公钥）"><a href="#3-关于码云的公钥-（一般使用账户公钥，权限大于等于仓库公钥）" class="headerlink" title="3. 关于码云的公钥 （一般使用账户公钥，权限大于等于仓库公钥）"></a><strong>3. 关于码云的公钥 （一般使用<strong><strong>账户公钥</strong></strong>，权限大于等于仓库公钥）</strong></h2><h3 id="仓库公钥"><a href="#仓库公钥" class="headerlink" title="仓库公钥:"></a><strong>仓库公钥:</strong></h3><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/775f62ad571c159cbc57390209535ee3/0?w=1025&h=523" alt="img">         </p><h3 id="如何生成公钥"><a href="#如何生成公钥" class="headerlink" title="如何生成公钥:"></a><strong>如何生成公钥:</strong></h3><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/14d2e51b6270c2b27fca7409cdef24c1/0?w=703&h=1667" alt="img">         </p><p>​                  <img src="https://qqadapt.qpic.cn/txdocpic/0/fcdbd20b7c27d213df7a2c08e2a9125b/0?w=712&h=1742" alt="img">         </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;使用Git-码云-：&quot;&gt;&lt;a href=&quot;#使用Git-码云-：&quot; class=&quot;headerlink&quot; title=&quot;使用Git + 码云 ：&quot;&gt;&lt;/a&gt;&lt;strong&gt;使用Git + 码云 ：&lt;/strong&gt;&lt;/h1&gt;&lt;h2 id=&quot;1-使用Gitee和使用</summary>
      
    
    
    
    <category term="前端" scheme="https://blog.lovelee.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="git" scheme="https://blog.lovelee.cn/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>git使用（版本1）</title>
    <link href="https://blog.lovelee.cn/2022/09/18/git1/"/>
    <id>https://blog.lovelee.cn/2022/09/18/git1/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="git基础"><a href="#git基础" class="headerlink" title="git基础"></a>git基础</h1><p>Git是一款免费、开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目.<br>Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。<br>Git 是一个快速、可扩展的分布式版本控制系统，它具有极为丰富的命令集，此文主要介绍git的使用,了解git的三个区,通过git连接github,以及常用git的常用命令.<br><a href="https://zhufengzhufeng.github.io/img/git.png"><img src="https://zhufengzhufeng.github.io/img/git.png" alt="img"></a></p><h2 id="git的使用"><a href="#git的使用" class="headerlink" title="git的使用"></a>git的使用</h2><h2 id="1-版本控制"><a href="#1-版本控制" class="headerlink" title="1.版本控制"></a>1.版本控制</h2><h3 id="1-1-备份文件"><a href="#1-1-备份文件" class="headerlink" title="1.1 备份文件"></a>1.1 备份文件</h3><ul><li>类似于网盘备份</li><li>我们的代码也需要备份。修改完了以后提交给版本库进行保管，哪一天代码没了也可以找回来。</li></ul><h3 id="1-2-记录历史"><a href="#1-2-记录历史" class="headerlink" title="1.2 记录历史"></a>1.2 记录历史</h3><ul><li>比如我们打游戏就要<code>存档</code>，万一挂了还可以从上个存档的地方重玩。</li><li>和网盘不同，网盘保留的是最新的状态，<code>历史的记录</code>都没有了，修改的记录也都找不回来了</li><li>网盘无法知道文件里的某行<code>代码</code>是何人在哪个时间添加进去的</li></ul><h3 id="1-3-回到过去"><a href="#1-3-回到过去" class="headerlink" title="1.3 回到过去"></a>1.3 回到过去</h3><ul><li>如果我有一天不小心删除了某个文件，我们可以通过历史备份找回来</li></ul><h3 id="1-4-多端共享"><a href="#1-4-多端共享" class="headerlink" title="1.4 多端共享"></a>1.4 多端共享</h3><ul><li>Git仓库可以通过PC端、Android、IOS<code>移动端</code>等各个终端访问</li><li>可以<code>随时随地</code>修改代码,公司没干完的工作回家接着干</li></ul><h3 id="1-5-团队协作"><a href="#1-5-团队协作" class="headerlink" title="1.5 团队协作"></a>1.5 团队协作</h3><ul><li>多个人或团队<code>合作</code>编写一个项目</li><li>合并代码处理<code>冲突</code></li></ul><h2 id="2-什么是git"><a href="#2-什么是git" class="headerlink" title="2.什么是git"></a>2.什么是git</h2><ul><li>为了告别手动方式管理Linux代码,并且符合开源和免费,Linus花了<code>两周时间</code>自己用 C 写了一个分布式版本控制系统，这就是Git</li><li>Git迅速成为最流行的分布式版本控制系统，尤其是 2008 年 GitHub 网站上线了，它为开源项目 免费提供Git存储 ，无数开源项目开始迁移至GitHub，包括jQuery，PHP，Ruby等等。</li></ul><h2 id="3-git的安装"><a href="#3-git的安装" class="headerlink" title="3.git的安装"></a>3.git的安装</h2><h3 id="3-1-windows下安装"><a href="#3-1-windows下安装" class="headerlink" title="3.1 windows下安装"></a>3.1 windows下安装</h3><p>下载地址 <a href="http://git-scm.com/">http://git-scm.com</a></p><p><a href="https://zhufengzhufeng.github.io/img/git/windowdownloadgit.jpg"><img src="https://zhufengzhufeng.github.io/img/git/windowdownloadgit.jpg" alt="img"></a><br><a href="https://zhufengzhufeng.github.io/img/git/gitinstall.jpg"><img src="https://zhufengzhufeng.github.io/img/git/gitinstall.jpg" alt="img"></a><br><a href="https://zhufengzhufeng.github.io/img/git/gitstype.jpg"><img src="https://zhufengzhufeng.github.io/img/git/gitstype.jpg" alt="img"></a></p><h3 id="3-2-mac下安装"><a href="#3-2-mac下安装" class="headerlink" title="3.2 mac下安装"></a>3.2 mac下安装</h3><p>下载Homebrew<a href="http://brew.sh/">http://brew.sh</a></p><p><a href="https://zhufengzhufeng.github.io/img/git/macinstallhomebrew.jpg"><img src="https://zhufengzhufeng.github.io/img/git/macinstallhomebrew.jpg" alt="img"></a></p><ul><li>拷贝对应脚本到终端下安装HomeBrew</li><li>然后在终端执行 brew install git命令安装*git</li></ul><blockquote><p>安装xcode会默认下载git</p></blockquote><h2 id="4-配置git用户和邮箱"><a href="#4-配置git用户和邮箱" class="headerlink" title="4. 配置git用户和邮箱"></a>4. 配置git用户和邮箱</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;你的github用户名&quot;    </span><br><span class="line">$ git config --global user.email &quot;你的github邮箱&quot;</span><br></pre></td></tr></table></figure><blockquote><p>不配置用户名和邮箱的话无法提交,因为git不知道你是谁</p></blockquote><p>查看配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name </span><br><span class="line">$ git config --global user.email </span><br><span class="line">$ git config --list</span><br></pre></td></tr></table></figure><h2 id="5-初始化git"><a href="#5-初始化git" class="headerlink" title="5.初始化git"></a>5.初始化git</h2><ul><li>先创建一个空目录 ，然后进入此目录</li><li>点击右键选择Git-Bash打开命令行</li><li>输入git init命令把这个目录变成Git可以管理的仓库</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure><blockquote><p>通过ls -al命令查看所有文件</p></blockquote><h2 id="6-git中的三个区"><a href="#6-git中的三个区" class="headerlink" title="6.git中的三个区"></a>6.git中的三个区</h2><p>工作流<br><a href="http://card.mugeda.com/campaigns/56d2c4a0a3664e3308000407/20160304090522/56d97729a3664e9c65000047/index.html">http://card.mugeda.com/campaigns/56d2c4a0a3664e3308000407/20160304090522/56d97729a3664e9c65000047/index.html</a></p><ul><li><p>工作区</p><p>通过git add 添加到暂存区</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add &#x27;文件名&#x27;</span><br></pre></td></tr></table></figure></li><li><p>暂存区<br>特点:<code>过渡</code>的作用，避免<code>误操作</code>，<code>保护</code>工作区和历史区，分支处理;</p><p>通过git commit 添加到历史区</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m&quot;注释内容&quot;</span><br></pre></td></tr></table></figure></li><li><p>历史区</p><p>查看历史状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>修改时通过git status查看当前状态</p></blockquote><h2 id="7-git-diff"><a href="#7-git-diff" class="headerlink" title="7.git diff"></a>7.git diff</h2><p>不同区的代码比较</p><h3 id="7-1-工作区和暂存区"><a href="#7-1-工作区和暂存区" class="headerlink" title="7.1 工作区和暂存区"></a>7.1 工作区和暂存区</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br></pre></td></tr></table></figure><h3 id="7-2-暂存区和历史区"><a href="#7-2-暂存区和历史区" class="headerlink" title="7.2 暂存区和历史区"></a>7.2 暂存区和历史区</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --cached（--staged）</span><br></pre></td></tr></table></figure><h3 id="7-3-工作区和版本库"><a href="#7-3-工作区和版本库" class="headerlink" title="7.3 工作区和版本库"></a>7.3 工作区和版本库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff master</span><br></pre></td></tr></table></figure><h2 id="8-撤销"><a href="#8-撤销" class="headerlink" title="8. 撤销"></a>8. 撤销</h2><h3 id="8-1-撤销回git-add的内容"><a href="#8-1-撤销回git-add的内容" class="headerlink" title="8.1 撤销回git add的内容"></a>8.1 撤销回git add的内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset Head &quot;文件名&quot;</span><br></pre></td></tr></table></figure><h3 id="8-2-撤回文件"><a href="#8-2-撤回文件" class="headerlink" title="8.2 撤回文件"></a>8.2 撤回文件</h3><ul><li><p>先从缓存区撤销,缓存区无内容，从历史区域撤销</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout &quot;文件名&quot;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>有的时候我们希望提交时合并到上一次的提交 git commit –amend</p></blockquote><h2 id="9-删除"><a href="#9-删除" class="headerlink" title="9.删除"></a>9.删除</h2><h3 id="9-1-删除暂存区和工作区"><a href="#9-1-删除暂存区和工作区" class="headerlink" title="9.1 删除暂存区和工作区"></a>9.1 删除暂存区和工作区</h3><p>删除暂存区中的内容,并且保证工作区中的内容已经不存在</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm &quot;文件名&quot;</span><br></pre></td></tr></table></figure><blockquote><p>若本地文件存在则不能删除，需要通过-f参数删除</p></blockquote><h3 id="9-2-仅删除缓存区"><a href="#9-2-仅删除缓存区" class="headerlink" title="9.2 仅删除缓存区"></a>9.2 仅删除缓存区</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm --cached &quot;文件名&quot;</span><br></pre></td></tr></table></figure><h2 id="10-恢复"><a href="#10-恢复" class="headerlink" title="10. 恢复"></a>10. 恢复</h2><h3 id="10-1-恢复某个版本文件"><a href="#10-1-恢复某个版本文件" class="headerlink" title="10.1 恢复某个版本文件"></a>10.1 恢复某个版本文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout commit_id filename 某个文件</span><br></pre></td></tr></table></figure><h3 id="10-2-通过版本id恢复"><a href="#10-2-通过版本id恢复" class="headerlink" title="10.2 通过版本id恢复"></a>10.2 通过版本id恢复</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard commit_id</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="10-3-恢复未来"><a href="#10-3-恢复未来" class="headerlink" title="10.3 恢复未来"></a>10.3 恢复未来</h3><p>查看当时回滚时的版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="10-4-快速版本回退"><a href="#10-4-快速版本回退" class="headerlink" title="10.4 快速版本回退"></a>10.4 快速版本回退</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard HEAD^</span><br><span class="line">$ git reset --hard HEAD~3</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="11-同步远程仓库"><a href="#11-同步远程仓库" class="headerlink" title="11. 同步远程仓库"></a>11. 同步远程仓库</h2><h3 id="11-1-gitHub"><a href="#11-1-gitHub" class="headerlink" title="11.1 gitHub"></a>11.1 gitHub</h3><ul><li>注册账号</li><li>新建项目</li></ul><h3 id="11-2-添加远程仓库"><a href="#11-2-添加远程仓库" class="headerlink" title="11.2 添加远程仓库"></a>11.2 添加远程仓库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin &quot;地址&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="11-3-添加忽略文件"><a href="#11-3-添加忽略文件" class="headerlink" title="11.3 添加忽略文件"></a>11.3 添加忽略文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ touch .gitignore</span><br><span class="line">$ echo .DS_Store</span><br><span class="line">$ echo node_modules</span><br><span class="line">$ echo .idea</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="11-4-推送代码"><a href="#11-4-推送代码" class="headerlink" title="11.4 推送代码"></a>11.4 推送代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="11-5-查看"><a href="#11-5-查看" class="headerlink" title="11.5 查看"></a>11.5 查看</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git remote 查看名字</span><br><span class="line">$ git remote -v 查看地址</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="12-代码的合并"><a href="#12-代码的合并" class="headerlink" title="12.代码的合并"></a>12.代码的合并</h2><h3 id="12-1-git-fetch"><a href="#12-1-git-fetch" class="headerlink" title="12.1 git fetch"></a>12.1 git fetch</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>拉取过来手动合并</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git diff master origin/master</span><br><span class="line">$ git merge origin/master</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="12-2-git-pull"><a href="#12-2-git-pull" class="headerlink" title="12.2 git pull"></a>12.2 git pull</h3><p>拉取并合并</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="13-例：作业提交流程"><a href="#13-例：作业提交流程" class="headerlink" title="13. 例：作业提交流程"></a>13. 例：作业提交流程</h3><h3 id="13-1-第一次交作业流程-组长"><a href="#13-1-第一次交作业流程-组长" class="headerlink" title="13.1 第一次交作业流程(组长)"></a>13.1 第一次交作业流程(组长)</h3><ul><li><code>fork</code>珠峰培训讲师的作业仓库</li><li>把自己的仓库<code>下载</code>到本地</li><li>把自己的作业 <code>上传</code>到自己的github仓库</li><li>发<code>pull request</code>给讲师</li><li>添加组员账号</li></ul><h3 id="13-2-第二次交作业流程-组员"><a href="#13-2-第二次交作业流程-组员" class="headerlink" title="13.2 第二次交作业流程(组员)"></a>13.2 第二次交作业流程(组员)</h3><ul><li>克隆组长项目</li><li>先<code>拉取</code>组长仓库最新代码</li><li>将自己的作业（放入对应的文件夹）</li><li>git add/git commit</li><li>再push前拉取组长仓库最新代码</li><li>push到组长仓库</li></ul><h3 id="13-3-第二次交作业流程-组长"><a href="#13-3-第二次交作业流程-组长" class="headerlink" title="13.3 第二次交作业流程(组长)"></a>13.3 第二次交作业流程(组长)</h3><ul><li>在本地<code>增加</code>讲师仓库</li><li><code>拉取</code>自己的最新代码</li><li><code>拉取</code>老师的最新的代码,如果冲突需要解决冲突</li><li>把自己的作业 拷贝进去(如果组长没有要提交的东西可省略)</li><li>把自己的作业上<code>传到</code>自己的github仓库(如果组长没有要提交的东西可省略)</li><li>发<code>pull request</code>给讲师</li></ul><hr><p>eixun.cn/course/31&gt;</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;git基础&quot;&gt;&lt;a href=&quot;#git基础&quot; class=&quot;headerlink&quot; title=&quot;git基础&quot;&gt;&lt;/a&gt;git基础&lt;/h1&gt;&lt;p&gt;Git是一款免费、开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目.&lt;br&gt;Git 是 Linus T</summary>
      
    
    
    
    <category term="前端" scheme="https://blog.lovelee.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="git" scheme="https://blog.lovelee.cn/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Hexo+butterfly搭建博客随手记</title>
    <link href="https://blog.lovelee.cn/2022/09/18/hexo-buttfly-note/"/>
    <id>https://blog.lovelee.cn/2022/09/18/hexo-buttfly-note/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<div class="timeline purple"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2022</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>08-27</p></div></div><div class='timeline-item-content'><p>由于昨天 08-26 <mark class="hl-label blue">vercel</mark>  IP被国内墙掉，给出解释是大陆地区DNS受到污染，于是我刚学会的vercel托管就无法访问了，直接GG🙁。退而求其次的想着还好有github.io备用，虽然速度没有vercel快,但好在git一键导入也还舒服。<br>忍一时风平浪静，退一步越想越气。于是我尝试群里大佬们的方法，<mark class="hl-label purple">vercel-domain</mark> ,反正我也是想搞域名加服务器了，于是买了域名，顺势学会了配置二级域名，顺便把 <mark class="hl-label pink">twikoo</mark> 也给domain回来了。鼓掌！🧐</p></div></div></div>]]></content>
    
    
    <summary type="html">想到什么就写什么，大多是过程中的思考和经验（不是教程）</summary>
    
    
    
    
    <category term="hexo" scheme="https://blog.lovelee.cn/tags/hexo/"/>
    
    <category term="butterfly" scheme="https://blog.lovelee.cn/tags/butterfly/"/>
    
    <category term="note" scheme="https://blog.lovelee.cn/tags/note/"/>
    
    <category term="vercel" scheme="https://blog.lovelee.cn/tags/vercel/"/>
    
  </entry>
  
  <entry>
    <title>less用法</title>
    <link href="https://blog.lovelee.cn/2022/09/18/less/"/>
    <id>https://blog.lovelee.cn/2022/09/18/less/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><blockquote><p>Less （Leaner Style Sheets 的缩写） 是一门向后兼容的 CSS 扩展语言。这里呈现的是 Less 的官方文档（中文版），包含了 Less 语言以及利用 JavaScript 开发的用于将 Less 样式转换成 CSS 样式的 Less.js 工具。</p></blockquote><p>因为 Less 和 CSS 非常像，学习很容易。而且 Less 仅对 CSS 语言增加了少许方便的扩展，这就是 Less 如此易学的原因之一。</p><ul><li><em>For detailed documentation on Less language features, see Features</em></li><li><em>For a list of Less Built-in functions, see Functions</em></li><li><em>For detailed usage instructions, see Using Less.js</em></li><li><em>For third-party tools for Less, see Tools</em></li></ul><p>What does Less add to CSS? Here’s a quick overview of features.</p><h1 id="变量（Variables）"><a href="#变量（Variables）" class="headerlink" title="变量（Variables）"></a>变量（Variables）</h1><p>These are pretty self-explanatory:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@width:</span> <span class="number">10px</span>;</span><br><span class="line"><span class="variable">@height:</span> <span class="variable">@width</span> + <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@width</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="variable">@height</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Learn More About Variables</strong></p><h1 id="混合（Mixins）"><a href="#混合（Mixins）" class="headerlink" title="混合（Mixins）"></a>混合（Mixins）</h1><p>Mixins are a way of including (“mixing in”) a bunch of properties from one rule-set into another rule-set. So say we have the following class:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bordered</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: dotted <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>And we want to use these properties inside other rule-sets. Well, we just have to drop in the name of the class where we want the properties, like so:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#111</span>;</span><br><span class="line">  <span class="selector-class">.bordered</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.post</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="selector-class">.bordered</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The properties of the <code>.bordered</code> class will now appear in both <code>#menu a</code> and <code>.post a</code>. (Note that you can also use <code>#ids</code> as mixins.)</p><p><strong>Learn More About Mixins</strong></p><h1 id="嵌套（Nesting）"><a href="#嵌套（Nesting）" class="headerlink" title="嵌套（Nesting）"></a>嵌套（Nesting）</h1><p>Less gives you the ability to use nesting instead of, or in combination with cascading. Let’s say we have the following CSS:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.navigation</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.logo</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In Less, we can also write it this way:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  <span class="selector-class">.navigation</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.logo</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The resulting code is more concise, and mimics the structure of your HTML.</p><p>You can also bundle pseudo-selectors with your mixins using this method. Here’s the classic clearfix hack, rewritten as a mixin (<code>&amp;</code> represents the current selector parent):</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  zoom: 1;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Learn More About Parent Selectors</strong></p><h2 id="Nested-At-Rules-and-Bubbling"><a href="#Nested-At-Rules-and-Bubbling" class="headerlink" title="Nested At-Rules and Bubbling"></a>Nested At-Rules and Bubbling</h2><p>At-rules such as <code>@media</code> or <code>@supports</code> can be nested in the same way as selectors. The at-rule is placed on top and relative order against other elements inside the same ruleset remains unchanged. This is called bubbling.</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.component</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="keyword">@media</span>  (<span class="attribute">min-resolution</span>: <span class="number">192dpi</span>) &#123;</span><br><span class="line">      <span class="attribute">background-image</span>: url(<span class="string">/img/retina2x.png</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">1280px</span>) &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.component</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.component</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) <span class="keyword">and</span> (<span class="attribute">min-resolution</span>: <span class="number">192dpi</span>) &#123;</span><br><span class="line">  <span class="selector-class">.component</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">/img/retina2x.png</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">1280px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.component</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="运算（Operations）"><a href="#运算（Operations）" class="headerlink" title="运算（Operations）"></a>运算（Operations）</h1><p>Arithmetical operations <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> can operate on any number, color or variable. If it is possible, mathematical operations take units into account and convert numbers before adding, subtracting or comparing them. The result has leftmost explicitly stated unit type. If the conversion is impossible or not meaningful, units are ignored. Example of impossible conversion: px to cm or rad to %.</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// numbers are converted into the same units</span></span><br><span class="line"><span class="variable">@conversion-1:</span> <span class="number">5cm</span> + <span class="number">10mm</span>; <span class="comment">// result is 6cm</span></span><br><span class="line"><span class="variable">@conversion-2:</span> <span class="number">2</span> - <span class="number">3cm</span> - <span class="number">5mm</span>; <span class="comment">// result is -1.5cm</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// conversion is impossible</span></span><br><span class="line"><span class="variable">@incompatible-units:</span> <span class="number">2</span> + <span class="number">5px</span> - <span class="number">3cm</span>; <span class="comment">// result is 4px</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// example with variables</span></span><br><span class="line"><span class="variable">@base:</span> <span class="number">5%</span>;</span><br><span class="line"><span class="variable">@filler:</span> <span class="variable">@base</span> * <span class="number">2</span>; <span class="comment">// result is 10%</span></span><br><span class="line"><span class="variable">@other:</span> <span class="variable">@base</span> + <span class="variable">@filler</span>; <span class="comment">// result is 15%</span></span><br></pre></td></tr></table></figure><p>Multiplication and division do not convert numbers. It would not be meaningful in most cases - a length multiplied by a length gives an area and css does not support specifying areas. Less will operate on numbers as they are and assign explicitly stated unit type to the result.</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@base:</span> <span class="number">2cm</span> * <span class="number">3mm</span>; <span class="comment">// result is 6cm</span></span><br></pre></td></tr></table></figure><p>You can also do arithemtic on colors:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@color:</span> <span class="number">#224488</span> / <span class="number">2</span>; <span class="comment">//results in #112244</span></span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#112244</span> + <span class="number">#111</span>; <span class="comment">// result is #223355</span></span><br></pre></td></tr></table></figure><p>However, you may find Less’s <a href="https://less.bootcss.com/functions/#color-operations">Color Functions</a> more useful.</p><h2 id="calc-特例"><a href="#calc-特例" class="headerlink" title="calc() 特例"></a>calc() 特例</h2><p><em>Released v3.0.0</em></p><p>为了与 CSS 保持兼容，<code>calc()</code> 并不对数学表达式进行计算，但是在嵌套函数中会计算变量和数学公式的值。</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@var:</span> <span class="number">50vh</span>/<span class="number">2</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">50%</span> + (<span class="variable">@var</span> - <span class="number">20px</span>));  <span class="comment">// result is calc(50% + (25vh - 20px))</span></span><br></pre></td></tr></table></figure><h1 id="Escaping"><a href="#Escaping" class="headerlink" title="Escaping"></a>Escaping</h1><p>Escaping allows you to use any arbitrary string as property or variable value. Anything inside <code>~&quot;anything&quot;</code> or <code>~&#39;anything&#39;</code> is used as is with no changes except <a href="https://less.bootcss.com/features/#variables-feature-variable-interpolation">interpolation</a>.</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@min768:</span> <span class="string">~&quot;(min-width: 768px)&quot;</span>;</span><br><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">  <span class="keyword">@media</span> <span class="variable">@min768</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.element</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Note, as of Less 3.5, you can simply write:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@min768:</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>);</span><br><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">  <span class="keyword">@media</span> <span class="variable">@min768</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In 3.5+, many cases previously requiring “quote-escaping” are not needed.</p><h1 id="函数（Functions）"><a href="#函数（Functions）" class="headerlink" title="函数（Functions）"></a>函数（Functions）</h1><p>Less 内置了多种函数用于转换颜色、处理字符串、算术运算等。这些函数在<a href="https://less.bootcss.com/functions/">函数手册</a>中有详细介绍。</p><p>函数的用法非常简单。下面这个例子将介绍如何利用 percentage 函数将 0.5 转换为 50%，将颜色饱和度增加 5%，以及颜色亮度降低 25% 并且色相值增加 8 等用法：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@base:</span> <span class="number">#f04615</span>;</span><br><span class="line"><span class="variable">@width:</span> <span class="number">0.5</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">percentage</span>(<span class="variable">@width</span>); <span class="comment">// returns `50%`</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">saturate</span>(<span class="variable">@base</span>, <span class="number">5%</span>);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">spin</span>(<span class="built_in">lighten</span>(<span class="variable">@base</span>, <span class="number">25%</span>), <span class="number">8</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>参见：函数手册</strong></p><h1 id="Namespaces-and-Accessors"><a href="#Namespaces-and-Accessors" class="headerlink" title="Namespaces and Accessors"></a>Namespaces and Accessors</h1><p>(Not to be confused with <a href="http://www.w3.org/TR/css3-namespace/">CSS <code>@namespace</code></a> or <a href="http://www.w3.org/TR/css3-selectors/#typenmsp">namespace selectors</a>).</p><p>Sometimes, you may want to group your mixins, for organizational purposes, or just to offer some encapsulation. You can do this pretty intuitively in Less. Say you want to bundle some mixins and variables under <code>#bundle</code>, for later reuse or distributing:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#bundle</span>() &#123;</span><br><span class="line">  <span class="selector-class">.button</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">background-color</span>: grey;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">background-color</span>: white;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.tab</span> &#123; ... &#125;</span><br><span class="line">  <span class="selector-class">.citation</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Now if we want to mixin the <code>.button</code> class in our <code>#header a</code>, we can do:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">  <span class="selector-id">#bundle</span><span class="selector-class">.button</span>();  <span class="comment">// can also be written as #bundle &gt; .button</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Note: append <code>()</code> to your namespace (e.g. <code>#bundle()</code>) if you don’t want it to appear in your CSS output i.e. <code>#bundle .tab</code>.</p><h1 id="Maps"><a href="#Maps" class="headerlink" title="Maps"></a>Maps</h1><p>As of Less 3.5, you can also use mixins and rulesets as maps of values.</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#colors</span>() &#123;</span><br><span class="line">  primary: blue;</span><br><span class="line">  secondary: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: #colors[primary];</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid #colors[secondary];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>This outputs, as expected:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>See also: Maps</strong></p><h1 id="作用域（Scope）"><a href="#作用域（Scope）" class="headerlink" title="作用域（Scope）"></a>作用域（Scope）</h1><p>Scope in Less is very similar to that of CSS. Variables and mixins are first looked for locally, and if they aren’t found, it’s inherited from the “parent” scope.</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@var:</span> red;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="variable">@var:</span> white;</span><br><span class="line">  <span class="selector-id">#header</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">@var</span>; <span class="comment">// white</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Like CSS custom properties, mixin and variable definitions do not have to be placed before a line where they are referenced. So the following Less code is identical to the previous example:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@var:</span> red;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="selector-id">#header</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">@var</span>; <span class="comment">// white</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable">@var:</span> white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>参见：懒加载</strong></p><h1 id="注释（Comments）"><a href="#注释（Comments）" class="headerlink" title="注释（Comments）"></a>注释（Comments）</h1><p>块注释和行注释都可以使用：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 一个块注释</span></span><br><span class="line"><span class="comment"> * style comment! */</span></span><br><span class="line"><span class="variable">@var:</span> red;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这一行被注释掉了！</span></span><br><span class="line"><span class="variable">@var:</span> white;</span><br></pre></td></tr></table></figure><h1 id="导入（Importing）"><a href="#导入（Importing）" class="headerlink" title="导入（Importing）"></a>导入（Importing）</h1><p>“导入”的工作方式和你预期的一样。你可以导入一个 <code>.less</code> 文件，此文件中的所有变量就可以全部使用了。如果导入的文件是 <code>.less</code> 扩展名，则可以将扩展名省略掉：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;library&quot;</span>; // library<span class="selector-class">.less</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;typo.css&quot;</span>;</span><br></pre></td></tr></table></figure><h2 id="循环与引用"><a href="#循环与引用" class="headerlink" title="循环与引用"></a>循环与引用</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//执行语句的选择器</span></span><br><span class="line"><span class="variable">@deviceList:</span> h2, h3, h4, h5, h6;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置数组的长度</span></span><br><span class="line"><span class="variable">@len:</span> <span class="built_in">length</span>(<span class="variable">@deviceList</span>);</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Mixin</span>(<span class="variable">@index</span>) <span class="keyword">when</span> (<span class="variable">@index</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 根据index获取对应的某个值 extract(数组名, 对应的序号)</span></span><br><span class="line">    <span class="variable">@var:</span> <span class="built_in">extract</span>(<span class="variable">@deviceList</span>, <span class="variable">@index</span>);</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#page</span> <span class="variable">@&#123;var&#125;</span> &#123;</span><br><span class="line">        <span class="attribute">padding-left</span>: <span class="number">28px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.Mixin</span>(<span class="variable">@index</span> - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Mixin</span>(<span class="variable">@len</span>);</span><br></pre></td></tr></table></figure><h2 id="条件编译"><a href="#条件编译" class="headerlink" title="条件编译"></a>条件编译</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义</span></span><br><span class="line"><span class="selector-class">.top7</span>(<span class="variable">@order</span>) <span class="keyword">when</span> (<span class="variable">@order</span> =<span class="number">7</span>) &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//引用</span></span><br><span class="line"><span class="selector-class">.top7</span>(<span class="variable">@index1</span>);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">最近less水平又有提高了，搏一搏</summary>
    
    
    
    <category term="前端" scheme="https://blog.lovelee.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="less" scheme="https://blog.lovelee.cn/tags/less/"/>
    
  </entry>
  
  <entry>
    <title>node中的模块</title>
    <link href="https://blog.lovelee.cn/2022/09/18/node%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/"/>
    <id>https://blog.lovelee.cn/2022/09/18/node%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="node中的模块"><a href="#node中的模块" class="headerlink" title="node中的模块"></a>node中的模块</h1><p>javaScript 从一个仅仅在浏览器上面的一个玩具语言，一转眼演变成无所不能神一般的存在。但是，由于天生存在着一点戏剧性，模块系统作为一门语言最基本的属性却是javaScript所缺的。<br><a href="https://zhufengzhufeng.github.io/img/node.png"><img src="https://zhufengzhufeng.github.io/img/node.png" alt="img"></a></p><h2 id="1-JS的不足"><a href="#1-JS的不足" class="headerlink" title="1. JS的不足"></a>1. JS的不足</h2><p>js没有模块系统，不支持封闭作用域或依赖管理<br>没有标准库，没有文件系统API<br>没有包管理系统，不能自动加载和安装依赖</p><h2 id="2-commonjs规范"><a href="#2-commonjs规范" class="headerlink" title="2.commonjs规范"></a>2.commonjs规范</h2><p>一个 node.js由大量模块组成，每个JS文件都是一个模块<br>实现了require方法，npm基于commonjs实现了自动加载和安装依赖</p><h2 id="3-模块化优点"><a href="#3-模块化优点" class="headerlink" title="3.模块化优点"></a>3.模块化优点</h2><ul><li>增加内聚性，有助分工协作</li><li>方便重构</li><li>提高代码质量</li></ul><h2 id="3-模块使用"><a href="#3-模块使用" class="headerlink" title="3.模块使用"></a>3.模块使用</h2><ul><li><p>定义模块</p></li><li><p>导出模块 module.exports和exports</p></li><li><p>使用模块 require(‘filename’);</p></li><li><p>实现原理</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(function(exports,require,module,__filename,__dirname)&#123;</span><br><span class="line">    return module.exports;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li></ul><p>module.exports和exports的区别</p><h2 id="4-require的应用"><a href="#4-require的应用" class="headerlink" title="4.require的应用"></a>4.require的应用</h2><ul><li><p>加载模块后会缓存，多次加载后得到同一对象</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require(&#x27;./test.js&#x27;)</span><br></pre></td></tr></table></figure></li><li><p>查看模块缓存</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(require.cache);</span><br></pre></td></tr></table></figure></li><li><p>查询模块绝对路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require.resolve(&#x27;./test.js&#x27;);</span><br></pre></td></tr></table></figure></li><li><p>查看单个的模块缓存</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require.cache[require.resolve(&#x27;./test.js&#x27;)]</span><br></pre></td></tr></table></figure></li><li><p>删除模块缓存</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete require.cache[require.resolve(&#x27;./test.js&#x27;)];</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-包和npm"><a href="#5-包和npm" class="headerlink" title="5.包和npm"></a>5.包和npm</h2><ul><li>多个模块可以封装成一个包</li><li>npm是node.js默认的模块管理器,用来安装和管理node模块 网址为 <a href="http://npmjs.org/">http://npmjs.org</a></li><li>可以用包的方式通过npm安装、卸载、发布包</li></ul><h2 id="6-组织和管理模块"><a href="#6-组织和管理模块" class="headerlink" title="6.组织和管理模块"></a>6.组织和管理模块</h2><p>放置多个模块的文件夹称为包,可以通过包来对一组具有相互依赖的有关系模块进行管理。</p><ul><li><p>初始化一个项目</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;name&quot;:&quot;包的名称&quot;,</span><br><span class="line">&quot;description&quot;：&quot;包的简要说明。&quot;,</span><br><span class="line">&quot;version&quot;:&quot;版本号&quot;,</span><br><span class="line">&quot;keywords&quot;：&quot;关键字&quot;,</span><br><span class="line">&quot;licenses&quot;:&quot;许可证&quot;,</span><br><span class="line">&quot;repositories&quot;：&quot;仓库地址 &quot;,</span><br><span class="line">&quot;dependencies&quot;:&quot;包的依赖，一个关联数组，由包名称和版本组成。&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="7-安装第三方包"><a href="#7-安装第三方包" class="headerlink" title="7.安装第三方包"></a>7.安装第三方包</h2><ul><li><p>全局安装 直接下载到Node的安装目录中，各个项目都可以调用,适合工具模块，比如webpack</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -global [package name]</span><br></pre></td></tr></table></figure></li><li><p>本地安装 将一个模块下载到当前目录的node_modules子目录，然后只有在当前目录和它的子目录之中，才能调用这个模块</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install  [package name] --save-dev/--save</span><br></pre></td></tr></table></figure></li><li><p>查看全局路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm root -g</span><br></pre></td></tr></table></figure></li></ul><h2 id="8-卸载第三方包"><a href="#8-卸载第三方包" class="headerlink" title="8.卸载第三方包"></a>8.卸载第三方包</h2><ul><li><p>卸载全局</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall -g [package name]</span><br></pre></td></tr></table></figure></li><li><p>卸载本地</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall [package name] --save-dev</span><br></pre></td></tr></table></figure></li></ul><h2 id="9-发布全局项目"><a href="#9-发布全局项目" class="headerlink" title="9.发布全局项目"></a>9.发布全局项目</h2><ul><li><p>创建并进入目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir jiang &amp;&amp; cd jiang</span><br></pre></td></tr></table></figure></li><li><p>初始化项目</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init jiang</span><br></pre></td></tr></table></figure></li><li><p>注册用户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm adduser</span><br></pre></td></tr></table></figure></li><li><p>发布项目</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure></li></ul><h2 id="10-源管理工具"><a href="#10-源管理工具" class="headerlink" title="10.源管理工具"></a>10.源管理工具</h2><ul><li><p>安装此工具</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nrm</span><br></pre></td></tr></table></figure></li><li><p>显示所有的源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm ls</span><br></pre></td></tr></table></figure></li><li><p>切换到中国源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm use cnpm</span><br></pre></td></tr></table></figure></li></ul><p>注意项目的名称不能是别人已经注册的名称,尽量用自己的名字做前缀 如果注册失败的话可能是因为改了镜像地址了，需要改回来 npm config set registry “<a href="http://registry.npmjs.org/">http://registry.npmjs.org/</a>“ 查看所有的配置项 npm config ls</p><h2 id="11-模块分类"><a href="#11-模块分类" class="headerlink" title="11.模块分类"></a>11.模块分类</h2><ul><li><p>内置模块</p><h3 id="util"><a href="#util" class="headerlink" title="util"></a>util</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">require(&#x27;./person&#x27;);</span><br><span class="line">inherits继承</span><br><span class="line">inspect解析属性</span><br><span class="line">isArray isRegExp isDate isError判断类型</span><br></pre></td></tr></table></figure></li><li><p>文件模块</p><h3 id="自定义模块"><a href="#自定义模块" class="headerlink" title="自定义模块"></a>自定义模块</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require(&#x27;./person&#x27;);</span><br></pre></td></tr></table></figure></li><li><p>第三方模块</p><h3 id="mime模块"><a href="#mime模块" class="headerlink" title="mime模块"></a>mime模块</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require(&#x27;mime&#x27;);</span><br></pre></td></tr></table></figure></li></ul><h2 id="12-模块查找规则"><a href="#12-模块查找规则" class="headerlink" title="12.模块查找规则"></a>12.模块查找规则</h2><p>当没有以’/‘或者’./‘来指向一个文件时，这个模块要么是核心模块,要么就是从node_modules文件夹加载的<br>第三方模块</p><ol><li>从module.paths取出第一个目录开始。</li><li>直接从目录中查找，存在结束，不存在下一条。</li><li>尝试添加.js、.json查找</li><li>尝试将require的参数作为一个包来查找，读取package.json，取得main配置项指定的文件查找，不存在进行3</li><li>继续失败查看下一个目录</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;node中的模块&quot;&gt;&lt;a href=&quot;#node中的模块&quot; class=&quot;headerlink&quot; title=&quot;node中的模块&quot;&gt;&lt;/a&gt;node中的模块&lt;/h1&gt;&lt;p&gt;javaScript 从一个仅仅在浏览器上面的一个玩具语言，一转眼演变成无所不能神一般的存在</summary>
      
    
    
    
    <category term="服务端" scheme="https://blog.lovelee.cn/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
    
    <category term="nodejs" scheme="https://blog.lovelee.cn/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>发布自己的npm包</title>
    <link href="https://blog.lovelee.cn/2022/09/18/publish_to_npm/"/>
    <id>https://blog.lovelee.cn/2022/09/18/publish_to_npm/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h2 id="发布自己的npm包"><a href="#发布自己的npm包" class="headerlink" title="发布自己的npm包"></a>发布自己的npm包</h2><ul><li><p>首先在npm网站上注册一个账号，这个账号之后会用到。</p></li><li><p>npm网站地址：<a href="https://www.npmjs.com/">https://www.npmjs.com/</a></p></li><li><p>npm网站注册地址：<a href="https://www.npmjs.com/signup">https://www.npmjs.com/signup</a></p></li></ul><div class="note purple no-icon flat"><p>注意：这里需要使用的源 是 npm 自己。不能用淘宝的源等其他，注意要先进行切换。这里推荐使用 <mark class="hl-label red">nrm</mark>  , 有兴趣的可以去了解一下</p></div><ul><li><img src="https://img.gejiba.com/images/2245876ae4759b14d6a277b21ac03599.png" alt="img"></li></ul><blockquote><p>推荐：工具使用 cmd  </p></blockquote><ul><li><p>找到自己上传包的父级目录，打开命令行:</p><ul><li><ol><li><code>npm login</code> </li></ol><p>​    <img src="https://img.gejiba.com/images/96ba6025cbdcdaa5a0219dd6f1a66af5.png" alt="img"> </p></li><li><ol start="2"><li><code>npm init</code> 创建项目 <mark class="hl-label orange">已有项目的可以跳过</mark> </li></ol></li><li><ol start="3"><li>配置 <code>package.json</code></li></ol></li><li><ol start="4"><li>打包上传 <code>npm publish</code> 第一次上传 不需要加 包名 后续上传出现问题可以尝试 <code>npm publish 包名</code></li></ol><p><img src="https://img.gejiba.com/images/6fea7435422ee2a9c41b5f1bbf89bd53.png" alt="img"></p></li><li><ol start="5"><li>成功后会显示 <code>+包名</code></li></ol></li><li><ol start="6"><li>更新版本时注意更改<code>packgae.json</code>中的版本号</li></ol></li><li><ol start="7"><li>上传成功后，可以测试下载 <code>npm install 包名</code></li></ol><p><img src="https://img.gejiba.com/images/2d312bb04a9434c3c750d475f171c825.png" alt="img"></p><p>PS: 也会收到成功(success)邮件推送</p></li><li><ol start="8"><li>测试用的包还是尽快下架 <code>npm --force unpublish 包名</code></li></ol><p><img src="https://img.gejiba.com/images/6353685ae37f66f5f4e626570930f3d3.png" alt="img"></p></li></ul></li></ul><div class="note red flat"><p>记得发布完成，切换回其他源（taobao），继续芜湖~</p></div><h3 id="接下来就可以为自己的代码世界添砖加瓦了！！！Goodluck🤩！！！"><a href="#接下来就可以为自己的代码世界添砖加瓦了！！！Goodluck🤩！！！" class="headerlink" title="接下来就可以为自己的代码世界添砖加瓦了！！！Goodluck🤩！！！"></a>接下来就可以为自己的代码世界添砖加瓦了！！！Goodluck🤩！！！</h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;发布自己的npm包&quot;&gt;&lt;a href=&quot;#发布自己的npm包&quot; class=&quot;headerlink&quot; title=&quot;发布自己的npm包&quot;&gt;&lt;/a&gt;发布自己的npm包&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;首先在npm网站上注册一个账号，这个账号之后会用到。&lt;/p&gt;
&lt;/</summary>
      
    
    
    
    <category term="前端" scheme="https://blog.lovelee.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="npm" scheme="https://blog.lovelee.cn/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>sass</title>
    <link href="https://blog.lovelee.cn/2022/09/18/sass/"/>
    <id>https://blog.lovelee.cn/2022/09/18/sass/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Sass-Syntactically-Awesome-StyleSheets"><a href="#Sass-Syntactically-Awesome-StyleSheets" class="headerlink" title="Sass (Syntactically Awesome StyleSheets)"></a><a href="http://sass-lang.com/documentation/file.SASS_REFERENCE.html">Sass (Syntactically Awesome StyleSheets)</a></h1><p>Sass 是一款强化 CSS 的辅助工具，它在 CSS 语法的基础上增加了变量 (variables)、嵌套 (nested rules)、混合 (mixins)、导入 (inline imports) 等高级功能，这些拓展令 CSS 更加强大与优雅。使用 Sass 以及 Sass 的样式库（如 <a href="http://compass-style.org/">Compass</a>）有助于更好地组织管理样式文件，以及更高效地开发项目。</p><h2 id="1-特色功能-Features"><a href="#1-特色功能-Features" class="headerlink" title="1. 特色功能 (Features)"></a>1. 特色功能 (Features)</h2><ul><li>完全兼容 CSS3</li><li>在 CSS 基础上增加变量、嵌套 (nesting)、混合 (mixins) 等功能</li><li>通过<a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html">函数</a>进行颜色值与属性值的运算</li><li>提供<a href="https://www.sass.hk/docs/#t8">控制指令 (control directives)</a>等高级功能</li><li>自定义输出格式</li></ul><h2 id="2-语法格式-Syntax"><a href="#2-语法格式-Syntax" class="headerlink" title="2. 语法格式 (Syntax)"></a>2. 语法格式 (Syntax)</h2><p>Sass 有两种语法格式。首先是 SCSS (Sassy CSS) —— 也是本文示例所使用的格式 —— 这种格式仅在 CSS3 语法的基础上进行拓展，所有 CSS3 语法在 SCSS 中都是通用的，同时加入 Sass 的特色功能。此外，SCSS 也支持大多数 CSS hacks 写法以及浏览器前缀写法 (vendor-specific syntax)，以及早期的 IE 滤镜写法。这种格式以 <code>.scss</code> 作为拓展名。</p><p>另一种也是最早的 Sass 语法格式，被称为缩进格式 (Indented Sass) 通常简称 “Sass”，是一种简化格式。它使用 “缩进” 代替 “花括号” 表示属性属于某个选择器，用 “换行” 代替 “分号” 分隔属性，很多人认为这样做比 SCSS 更容易阅读，书写也更快速。缩进格式也可以使用 Sass 的全部功能，只是与 SCSS 相比个别地方采取了不同的表达方式，具体请查看 <a href="http://sass-lang.com/docs/yardoc/file.INDENTED_SYNTAX.html">the indented syntax reference</a>。这种格式以 <code>.sass</code> 作为拓展名。</p><p>任何一种格式可以直接 <a href="https://www.sass.hk/docs/#t7-1">导入 (@import)</a> 到另一种格式中使用，或者通过 <code>sass-convert</code> 命令行工具转换成另一种格式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Convert Sass to SCSS</span><br><span class="line">$ sass-convert style.sass style.scss</span><br><span class="line"></span><br><span class="line"># Convert SCSS to Sass</span><br><span class="line">$ sass-convert style.scss style.sass</span><br></pre></td></tr></table></figure><h2 id="3-使用-Sass-Using-Sass"><a href="#3-使用-Sass-Using-Sass" class="headerlink" title="3. 使用 Sass (Using Sass)"></a>3. 使用 Sass (Using Sass)</h2><p>Sass 可以通过以下三种方式使用：作为命令行工具；作为独立的 Ruby 模块 (Ruby module)；或者作为 Rack-enabled 框架的插件（例如 Ruby on Rails 与 Merb）。无论哪种方式都需要先安装 Sass gem （Windows 系统需要先<a href="http://rubyinstaller.org/">安装 Ruby</a>）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install sass</span><br></pre></td></tr></table></figure><p>在命令行中运行 Sass：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sass input.scss output.css</span><br></pre></td></tr></table></figure><p>监视单个 Sass 文件，每次修改并保存时自动编译：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sass --watch input.scss:output.css</span><br></pre></td></tr></table></figure><p>监视整个文件夹：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sass --watch app/sass:public/stylesheets</span><br></pre></td></tr></table></figure><p>更多命令的用法请通过 <code>sass --help</code> 获取帮助。</p><p>在 Ruby 中使用 Sass 也非常容易，Sass gem 安装完毕后运行 <code>require &quot;sass&quot;</code> 然后按照下面的方法使用 <a href="http://sass-lang.com/docs/yardoc/Sass/Engine.html">Sass::Engine</a>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">engine = Sass::Engine.new(&quot;#main &#123;background-color: #0000ff&#125;&quot;, :syntax =&gt; :scss)</span><br><span class="line">engine.render #=&gt; &quot;#main &#123; background-color: #0000ff; &#125;\n&quot;</span><br></pre></td></tr></table></figure><h3 id="3-1-Rack-Rails-Merb-Plugin"><a href="#3-1-Rack-Rails-Merb-Plugin" class="headerlink" title="3.1. Rack/Rails/Merb Plugin"></a>3.1. Rack/Rails/Merb Plugin</h3><p>在 Rails 3 之前的版本中使用 Sass，需要在 <code>environment.rb</code> 文件中添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.gem &quot;sass&quot;</span><br></pre></td></tr></table></figure><p>Rails 3 则需要在 Gemfile 中添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem &quot;sass&quot;</span><br></pre></td></tr></table></figure><p>在 Merb 中使用 Sass，需要在 <code>config/dependencies.rb</code> 中添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dependency &quot;merb-haml&quot;</span><br></pre></td></tr></table></figure><p>在 Rack 中使用 Sass，需要在 <code>config.ru</code> 中添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">require &#x27;sass/plugin/rack&#x27;</span><br><span class="line">use Sass::Plugin::Rack</span><br></pre></td></tr></table></figure><p>样式文件与 views 不同，不包含任何动态内容，因此 CSS 只需要在 Sass 文件被修改后再编译生成。默认情况下 <code>.sass</code> 与 <code>.scss</code> 文件放置在 <code>public/stylesheets/sass</code> 中（可通过 <a href="http://sass-lang.com/documentation/file.SASS_REFERENCE.html#template_location-option">:template_location</a> 修改路径），编译生成的 CSS 文件放置在 <code>public/stylesheets</code> 中。例如 <code>public/stylesheets/sass/main.scss</code> 编译生成 <code>public/stylesheets/main.css</code>。</p><h3 id="3-2-缓存-Caching"><a href="#3-2-缓存-Caching" class="headerlink" title="3.2. 缓存 (Caching)"></a>3.2. 缓存 (Caching)</h3><p>Sass 自动缓存编译后的模板与 <a href="http://sass-lang.com/documentation/file.SASS_REFERENCE.html#partials">partials</a>，这样做能够显著提升重新编译的速度，尤其在处理由 <code>@import</code> 导入多个子文件的大型项目时。</p><p>单独使用 Sass，缓存内容保存在 <code>.sass-cache</code> 文件夹中。在 Rails 和 Merb 项目中缓存文件保存在 <code>tmp/sass-cache</code> 文件夹中（可通过 <a href="https://www.sass.hk/docs/"><code>:cache_location</code></a> 修改路径）。禁用缓存可将 <code>:cache</code> 设为 <code>false</code>。</p><h3 id="3-3-配置选项-Options"><a href="#3-3-配置选项-Options" class="headerlink" title="3.3. 配置选项 (Options)"></a>3.3. 配置选项 (Options)</h3><p><a href="http://sass-lang.com/documentation/file.SASS_REFERENCE.html#options">暂未翻译</a></p><h3 id="3-4-判断语法格式-Syntax-Selection"><a href="#3-4-判断语法格式-Syntax-Selection" class="headerlink" title="3.4. 判断语法格式 (Syntax Selection)"></a>3.4. 判断语法格式 (Syntax Selection)</h3><p>Sass 命令行工具根据文件的拓展名判断所使用的语法格式，没有文件名时 <code>sass</code> 命令默认编译 <code>.sass</code> 文件，添加 <code>--scss</code> 选项或者使用 <code>scss</code> 命令编译 SCSS 文件。</p><h3 id="3-5-编码格式-Encodings"><a href="#3-5-编码格式-Encodings" class="headerlink" title="3.5. 编码格式 (Encodings)"></a>3.5. 编码格式 (Encodings)</h3><p>在 Ruby 1.9 及以上环境中运行 Sass 时，Sass 对文件的编码格式比较敏感，首先会根据 <a href="http://www.w3.org/TR/2013/WD-css-syntax-3-20130919/#determine-the-fallback-encoding">CSS spec</a> 判断样式文件的编码格式，如果失败则检测 Ruby string encoding。也就是说，Sass 首先检查 Unicode byte order mark，然后是 <code>@charset</code> 声明，最后是 Ruby string encoding，假如都没有检测到，默认使用 UTF-8 编码。</p><p>与 CSS 相同，使用 <code>@charset</code> 可以声明特定的编码格式。在样式文件的起始位置（前面没有任何空白与注释）插入 <code>@charset &quot;encoding-name&quot;</code>， Sass 将会按照给出的编码格式编译文件。注意所使用的编码格式必须可转换为 Unicode 字符集。</p><p>Sass 以 UTF-8 编码输出 CSS 文件，当且仅当编译后的文件中包含非 ASCII 字符时，才会在输出文件中添加 <code>@charset</code> 声明，而在压缩模式下 (compressed mode) 使用 UTF-8 byte order mark 代替 <code>@charset</code> 声明语句。</p><h2 id="4-CSS-功能拓展-CSS-Extensions"><a href="#4-CSS-功能拓展-CSS-Extensions" class="headerlink" title="4. CSS 功能拓展 (CSS Extensions)"></a>4. CSS 功能拓展 (CSS Extensions)</h2><h3 id="4-1-嵌套规则-Nested-Rules"><a href="#4-1-嵌套规则-Nested-Rules" class="headerlink" title="4.1. 嵌套规则 (Nested Rules)"></a>4.1. 嵌套规则 (Nested Rules)</h3><p>Sass 允许将一套 CSS 样式嵌套进另一套样式中，内层的样式将它外层的选择器作为父选择器，例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#00ff00</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">97%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.redbox</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ff0000</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000000</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#00ff00</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">97%</span>; &#125;</span><br><span class="line">  <span class="selector-id">#main</span> <span class="selector-tag">p</span> <span class="selector-class">.redbox</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ff0000</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000000</span>; &#125;</span><br></pre></td></tr></table></figure><p>嵌套功能避免了重复输入父选择器，而且令复杂的 CSS 结构更易于管理：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">97%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">p</span>, <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">2em</span>;</span><br><span class="line">    <span class="selector-tag">a</span> &#123; <span class="attribute">font-weight</span>: bold; &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  pre &#123; <span class="attribute">font-size</span>: <span class="number">3em</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">97%</span>; &#125;</span><br><span class="line">  <span class="selector-id">#main</span> <span class="selector-tag">p</span>, <span class="selector-id">#main</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">2em</span>; &#125;</span><br><span class="line">    <span class="selector-id">#main</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span>, <span class="selector-id">#main</span> <span class="selector-tag">div</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">      <span class="attribute">font-weight</span>: bold; &#125;</span><br><span class="line">  <span class="selector-id">#main</span> pre &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">3em</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="4-2-父选择器-amp-Referencing-Parent-Selectors-amp"><a href="#4-2-父选择器-amp-Referencing-Parent-Selectors-amp" class="headerlink" title="4.2. 父选择器 &amp; (Referencing Parent Selectors: &amp;)"></a>4.2. 父选择器 <code>&amp;</code> (Referencing Parent Selectors: <code>&amp;</code>)</h3><p>在嵌套 CSS 规则时，有时也需要直接使用嵌套外层的父选择器，例如，当给某个元素设定 <code>hover</code> 样式时，或者当 <code>body</code> 元素有某个 classname 时，可以用 <code>&amp;</code> 代表嵌套规则外层的父选择器。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123; <span class="attribute">text-decoration</span>: underline; &#125;</span><br><span class="line">  <span class="selector-tag">body</span><span class="selector-class">.firefox</span> &amp; &#123; <span class="attribute">font-weight</span>: normal; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none; &#125;</span><br><span class="line">  <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline; &#125;</span><br><span class="line">  <span class="selector-tag">body</span><span class="selector-class">.firefox</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: normal; &#125;</span><br></pre></td></tr></table></figure><p>编译后的 CSS 文件中 <code>&amp;</code> 将被替换成嵌套外层的父选择器，如果含有多层嵌套，最外层的父选择器会一层一层向下传递：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> &#123; <span class="attribute">color</span>: red; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black; &#125;</span><br><span class="line">  <span class="selector-id">#main</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold; &#125;</span><br><span class="line">    <span class="selector-id">#main</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: red; &#125;</span><br></pre></td></tr></table></figure><p><code>&amp;</code> 必须作为选择器的第一个字符，其后可以跟随后缀生成复合的选择器，例如</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  &amp;-sidebar &#123; <span class="attribute">border</span>: <span class="number">1px</span> solid; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black; &#125;</span><br><span class="line">  <span class="selector-id">#main-sidebar</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid; &#125;</span><br></pre></td></tr></table></figure><p>当父选择器含有不合适的后缀时，Sass 将会报错。</p><h3 id="4-3-属性嵌套-Nested-Properties"><a href="#4-3-属性嵌套-Nested-Properties" class="headerlink" title="4.3. 属性嵌套 (Nested Properties)"></a>4.3. 属性嵌套 (Nested Properties)</h3><p>有些 CSS 属性遵循相同的命名空间 (namespace)，比如 <code>font-family, font-size, font-weight</code> 都以 <code>font</code> 作为属性的命名空间。为了便于管理这样的属性，同时也为了避免了重复输入，Sass 允许将属性嵌套在命名空间中，例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.funky</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: &#123;</span><br><span class="line">    family: fantasy;</span><br><span class="line">    size: <span class="number">30em</span>;</span><br><span class="line">    weight: bold;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.funky</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: fantasy;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30em</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold; &#125;</span><br></pre></td></tr></table></figure><p>命名空间也可以包含自己的属性值，例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.funky</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">20px</span>/<span class="number">24px</span> &#123;</span><br><span class="line">    family: fantasy;</span><br><span class="line">    weight: bold;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.funky</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">20px</span>/<span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: fantasy;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold; &#125;</span><br></pre></td></tr></table></figure><h3 id="4-4-占位符选择器-foo-Placeholder-Selectors-foo"><a href="#4-4-占位符选择器-foo-Placeholder-Selectors-foo" class="headerlink" title="4.4. 占位符选择器 %foo (Placeholder Selectors: %foo)"></a>4.4. 占位符选择器 <code>%foo</code> (Placeholder Selectors: <code>%foo</code>)</h3><p>Sass 额外提供了一种特殊类型的选择器：占位符选择器 (placeholder selector)。与常用的 id 与 class 选择器写法相似，只是 <code>#</code> 或 <code>.</code> 替换成了 <code>%</code>。必须通过 <a href="https://www.sass.hk/docs/#t7-3">@extend</a> 指令调用，更多介绍请查阅 <a href="https://www.sass.hk/docs/#t7-3-6">@extend-Only Selectors</a>。</p><p>当占位符选择器单独使用时（未通过 <code>@extend</code> 调用），不会编译到 CSS 文件中。</p><h2 id="5-注释-与-Comments-and"><a href="#5-注释-与-Comments-and" class="headerlink" title="5. 注释 /* */ 与 // (Comments: /* */ and //)"></a>5. 注释 <code>/* */</code> 与 <code>//</code> (Comments: <code>/* */</code> and <code>//</code>)</h2><p>Sass 支持标准的 CSS 多行注释 <code>/* */</code>，以及单行注释 <code>//</code>，前者会 被完整输出到编译后的 CSS 文件中，而后者则不会，例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* This comment is</span></span><br><span class="line"><span class="comment"> * several lines long.</span></span><br><span class="line"><span class="comment"> * since it uses the CSS comment syntax,</span></span><br><span class="line"><span class="comment"> * it will appear in the CSS output. */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123; <span class="attribute">color</span>: black; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// These comments are only one line long each.</span></span><br><span class="line"><span class="comment">// They won&#x27;t appear in the CSS output,</span></span><br><span class="line"><span class="comment">// since they use the single-line comment syntax.</span></span><br><span class="line"><span class="selector-tag">a</span> &#123; <span class="attribute">color</span>: green; &#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* This comment is</span></span><br><span class="line"><span class="comment"> * several lines long.</span></span><br><span class="line"><span class="comment"> * since it uses the CSS comment syntax,</span></span><br><span class="line"><span class="comment"> * it will appear in the CSS output. */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green; &#125;</span><br></pre></td></tr></table></figure><p>将 <code>!</code> 作为多行注释的第一个字符表示在压缩输出模式下保留这条注释并输出到 CSS 文件中，通常用于添加版权信息。</p><p>插值语句 (interpolation) 也可写进多行注释中输出变量值：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$version</span>: <span class="string">&quot;1.2.3&quot;</span>;</span><br><span class="line"><span class="comment">/* This CSS is generated by My Snazzy Framework version #&#123;$version&#125;. */</span></span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* This CSS is generated by My Snazzy Framework version 1.2.3. */</span></span><br></pre></td></tr></table></figure><h2 id="6-SassScript"><a href="#6-SassScript" class="headerlink" title="6. SassScript"></a>6. SassScript</h2><p>在 CSS 属性的基础上 Sass 提供了一些名为 SassScript 的新功能。 SassScript 可作用于任何属性，允许属性使用变量、算数运算等额外功能。</p><p>通过 interpolation，SassScript 甚至可以生成选择器或属性名，这一点对编写 mixin 有很大帮助。</p><h3 id="6-1-Interactive-Shell"><a href="#6-1-Interactive-Shell" class="headerlink" title="6.1. Interactive Shell"></a>6.1. Interactive Shell</h3><p>Interactive Shell 可以在命令行中测试 SassScript 的功能。在命令行中输入 <code>sass -i</code>，然后输入想要测试的 SassScript 查看输出结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sass -i</span><br><span class="line">&gt;&gt; &quot;Hello, Sassy World!&quot;</span><br><span class="line">&quot;Hello, Sassy World!&quot;</span><br><span class="line">&gt;&gt; 1px + 1px + 1px</span><br><span class="line">3px</span><br><span class="line">&gt;&gt; #777 + #777</span><br><span class="line">#eeeeee</span><br><span class="line">&gt;&gt; #777 + #888</span><br><span class="line">white</span><br></pre></td></tr></table></figure><h3 id="6-2-变量-Variables"><a href="#6-2-变量-Variables" class="headerlink" title="6.2. 变量 ###  (Variables: ### )"></a>6.2. 变量 <code>###  (Variables: </code>### )</h3><p>SassScript 最普遍的用法就是变量，变量以美元符号开头，赋值方法与 CSS 属性的写法一样：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$width</span>: <span class="number">5em</span>;</span><br></pre></td></tr></table></figure><p>直接使用即调用变量：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: $width;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>变量支持块级作用域，嵌套规则内定义的变量只能在嵌套规则内使用（局部变量），不在嵌套规则内定义的变量则可在任何地方使用（全局变量）。将局部变量转换为全局变量可以添加 <code>!global</code>声明：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="variable">$width</span>: <span class="number">5em</span> !global;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">$width</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">$width</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-3-数据类型-Data-Types"><a href="#6-3-数据类型-Data-Types" class="headerlink" title="6.3. 数据类型 (Data Types)"></a>6.3. 数据类型 (Data Types)</h3><p>SassScript 支持 6 种主要的数据类型：</p><ul><li>数字，<code>1, 2, 13, 10px</code></li><li>字符串，有引号字符串与无引号字符串，<code>&quot;foo&quot;, &#39;bar&#39;, baz</code></li><li>颜色，<code>blue, #04a3f9, rgba(255,0,0,0.5)</code></li><li>布尔型，<code>true, false</code></li><li>空值，<code>null</code></li><li>数组 (list)，用空格或逗号作分隔符，<code>1.5em 1em 0 2em, Helvetica, Arial, sans-serif</code></li><li>maps, 相当于 JavaScript 的 object，<code>(key1: value1, key2: value2)</code></li></ul><p>SassScript 也支持其他 CSS 属性值，比如 Unicode 字符集，或 <code>!important</code> 声明。然而Sass 不会特殊对待这些属性值，一律视为无引号字符串。</p><h4 id="6-3-1-字符串-Strings"><a href="#6-3-1-字符串-Strings" class="headerlink" title="6.3.1. 字符串 (Strings)"></a>6.3.1. 字符串 (Strings)</h4><p>SassScript 支持 CSS 的两种字符串类型：有引号字符串 (quoted strings)，如 <code>&quot;Lucida Grande&quot;</code> <code>&#39;http://sass-lang.com&#39;</code>；与无引号字符串 (unquoted strings)，如 <code>sans-serif</code> <code>bold</code>，在编译 CSS 文件时不会改变其类型。只有一种情况例外，使用 <code>#&#123;&#125;</code> (interpolation) 时，有引号字符串将被编译为无引号字符串，这样便于在 mixin 中引用选择器名：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> firefox-message(<span class="variable">$selector</span>) &#123;</span><br><span class="line">  <span class="selector-tag">body</span><span class="selector-class">.firefox</span> #&#123;<span class="variable">$selector</span>&#125;<span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;Hi, Firefox users!&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@include</span> firefox-message(<span class="string">&quot;.header&quot;</span>);</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span><span class="selector-class">.firefox</span> <span class="selector-class">.header</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;Hi, Firefox users!&quot;</span>; &#125;</span><br></pre></td></tr></table></figure><h4 id="6-3-2-数组-Lists"><a href="#6-3-2-数组-Lists" class="headerlink" title="6.3.2. 数组 (Lists)"></a>6.3.2. 数组 (Lists)</h4><p>数组 (lists) 指 Sass 如何处理 CSS 中 <code>margin: 10px 15px 0 0</code> 或者 <code>font-face: Helvetica, Arial, sans-serif</code> 这样通过空格或者逗号分隔的一系列的值。事实上，独立的值也被视为数组 —— 只包含一个值的数组。</p><p>数组本身没有太多功能，但 <a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#list-functions">Sass list functions</a> 赋予了数组更多新功能：<code>nth</code> 函数可以直接访问数组中的某一项；<code>join</code> 函数可以将多个数组连接在一起；<code>append</code> 函数可以在数组中添加新值；而 <code>@each</code> 指令能够遍历数组中的每一项。</p><p>数组中可以包含子数组，比如 <code>1px 2px, 5px 6px</code> 是包含 <code>1px 2px</code> 与 <code>5px 6px</code> 两个数组的数组。如果内外两层数组使用相同的分隔方式，需要用圆括号包裹内层，所以也可以写成 <code>(1px 2px) (5px 6px)</code>。变化是，之前的 <code>1px 2px, 5px 6px</code> 使用逗号分割了两个子数组 (comma-separated)，而 <code>(1px 2px) (5px 6px)</code> 则使用空格分割(space-separated)。</p><p>当数组被编译为 CSS 时，Sass 不会添加任何圆括号（CSS 中没有这种写法），所以 <code>(1px 2px) (5px 6px)</code> 与 <code>1px 2px, 5px 6px</code> 在编译后的 CSS 文件中是完全一样的，但是它们在 Sass 文件中却有不同的意义，前者是包含两个数组的数组，而后者是包含四个值的数组。</p><p>用 <code>()</code> 表示不包含任何值的空数组（在 Sass 3.3 版之后也视为空的 map）。空数组不可以直接编译成 CSS，比如编译 <code>font-family: ()</code> Sass 将会报错。如果数组中包含空数组或空值，编译时将被清除，比如 <code>1px 2px () 3px</code> 或 <code>1px 2px null 3px</code>。</p><p>基于逗号分隔的数组允许保留结尾的逗号，这样做的意义是强调数组的结构关系，尤其是需要声明只包含单个值的数组时。例如 <code>(1,)</code> 表示只包含 <code>1</code> 的数组，而 <code>(1 2 3,)</code> 表示包含 <code>1 2 3</code> 这个以空格分隔的数组的数组。</p><h4 id="6-3-3-Maps"><a href="#6-3-3-Maps" class="headerlink" title="6.3.3. Maps"></a>6.3.3. Maps</h4><p>Maps represent an association between keys and values, where keys are used to look up values. They make it easy to collect values into named groups and access those groups dynamically. They have no direct parallel in CSS, although they’re syntactically similar to media query expressions: </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scss $map: (key1: value1, key2: value2, key3: value3);</span><br></pre></td></tr></table></figure><p> Unlike lists, maps must always be surrounded by parentheses and must always be comma-separated. Both the keys and values in maps can be any SassScript object. A map may only have one value associated with a given key (although that value may be a list). A given value may be associated with many keys, though. Like lists, maps are mostly manipulated using SassScript functions. The map-get function looks up values in a map and the map-merge function adds values to a map. The @each directive can be used to add styles for each key/value pair in a map. The order of pairs in a map is always the same as when the map was created. Maps can also be used anywhere lists can. When used by a list function, a map is treated as a list of pairs. For example, (key1: value1, key2: value2) would be treated as the nested list key1 value1, key2 value2 by list functions. Lists cannot be treated as maps, though, with the exception of the empty list. () represents both a map with no key/value pairs and a list with no elements. Note that map keys can be any Sass data type (even another map) and the syntax for declaring a map allows arbitrary SassScript expressions that will be evaluated to determine the key. Maps cannot be converted to plain CSS. Using one as the value of a variable or an argument to a CSS function will cause an error. Use the inspect($value) function to produce an output string useful for debugging maps. </p><p>中文简要说明:</p><p>Maps可视为键值对的集合，键被用于定位值 在css种没有对应的概念。 和Lists不同Maps必须被圆括号包围，键值对被都好分割 。 Maps中的keys和values可以是sassscript的任何对象。（包括任意的sassscript表达式 arbitrary SassScript expressions） 和Lists一样Maps主要为sassscript函数服务，如 map-get函数用于查找键值，map-merge函数用于map和新加的键值融合，@each命令可添加样式到一个map中的每个键值对。 Maps可用于任何Lists可用的地方，在List函数中 Map会被自动转换为List ， 如 (key1: value1, key2: value2)会被List函数转换为 key1 value1, key2 value2 ，反之则不能。(网友Soledad提供)</p><h4 id="6-3-4-颜色-Colors"><a href="#6-3-4-颜色-Colors" class="headerlink" title="6.3.4. 颜色 (Colors)"></a>6.3.4. 颜色 (Colors)</h4><p>Any CSS color expression returns a SassScript Color value. This includes a large number of named colors which are indistinguishable from unquoted strings. In compressed output mode, Sass will output the smallest CSS representation of a color. For example, #FF0000 will output as red in compressed mode, but blanchedalmond will output as #FFEBCD. A common issue users encounter with named colors is that since Sass prefers the same output format as was typed in other output modes, a color interpolated into a selector becomes invalid syntax when compressed. To avoid this, always quote named colors if they are meant to be used in the construction of a selector.</p><h3 id="6-4-运算-Operations"><a href="#6-4-运算-Operations" class="headerlink" title="6.4. 运算 (Operations)"></a>6.4. 运算 (Operations)</h3><p>所有数据类型均支持相等运算 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">==</span><br></pre></td></tr></table></figure><p> 或 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!=</span><br></pre></td></tr></table></figure><p>，此外，每种数据类型也有其各自支持的运算方式。</p><h4 id="6-4-1-数字运算-Number-Operations"><a href="#6-4-1-数字运算-Number-Operations" class="headerlink" title="6.4.1. 数字运算 (Number Operations)"></a>6.4.1. 数字运算 (Number Operations)</h4><p>SassScript 支持数字的加减乘除、取整等运算 (<code>+, -, *, /, %</code>)，如果必要会在不同单位间转换值。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1in</span> + <span class="number">8pt</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1.111in</span>; &#125;</span><br></pre></td></tr></table></figure><p>关系运算 <code>&lt;, &gt;, &lt;=, &gt;=</code> 也可用于数字运算，相等运算 <code>==, !=</code> 可用于所有数据类型。</p><h5 id="6-4-1-1-除法运算-Division-and"><a href="#6-4-1-1-除法运算-Division-and" class="headerlink" title="6.4.1.1. 除法运算 / (Division and /)"></a>6.4.1.1. 除法运算 <code>/</code> (Division and <code>/</code>)</h5><p><code>/</code> 在 CSS 中通常起到分隔数字的用途，SassScript 作为 CSS 语言的拓展当然也支持这个功能，同时也赋予了 <code>/</code> 除法运算的功能。也就是说，如果 <code>/</code> 在 SassScript 中把两个数字分隔，编译后的 CSS 文件中也是同样的作用。</p><p>以下三种情况 <code>/</code> 将被视为除法运算符号：</p><ul><li>如果值，或值的一部分，是变量或者函数的返回值</li><li>如果值被圆括号包裹</li><li>如果值是算数表达式的一部分</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">10px</span>/<span class="number">8px</span>;             <span class="comment">// Plain CSS, no division</span></span><br><span class="line">  <span class="variable">$width</span>: <span class="number">1000px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">$width</span>/<span class="number">2</span>;            <span class="comment">// Uses a variable, does division</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">round</span>(<span class="number">1.5</span>)/<span class="number">2</span>;        <span class="comment">// Uses a function, does division</span></span><br><span class="line">  <span class="attribute">height</span>: (<span class="number">500px</span>/<span class="number">2</span>);          <span class="comment">// Uses parentheses, does division</span></span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">5px</span> + <span class="number">8px</span>/<span class="number">2px</span>; <span class="comment">// Uses +, does division</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">10px</span>/<span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">9px</span>; &#125;</span><br></pre></td></tr></table></figure><p>如果需要使用变量，同时又要确保 <code>/</code> 不做除法运算而是完整地编译到 CSS 文件中，只需要用 <code>#&#123;&#125;</code> 插值语句将变量包裹。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="variable">$font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="variable">$line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">font</span>: #&#123;<span class="variable">$font-size</span>&#125;/#&#123;<span class="variable">$line-height</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">12px</span>/<span class="number">30px</span>; &#125;</span><br></pre></td></tr></table></figure><h4 id="6-4-2-颜色值运算-Color-Operations"><a href="#6-4-2-颜色值运算-Color-Operations" class="headerlink" title="6.4.2. 颜色值运算 (Color Operations)"></a>6.4.2. 颜色值运算 (Color Operations)</h4><p>颜色值的运算是分段计算进行的，也就是分别计算红色，绿色，以及蓝色的值：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#010203</span> + <span class="number">#040506</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>计算 <code>01 + 04 = 05</code> <code>02 + 05 = 07</code> <code>03 + 06 = 09</code>，然后编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#050709</span>; &#125;</span><br></pre></td></tr></table></figure><p>使用 <a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html">color functions</a> 比计算颜色值更方便一些。</p><p>数字与颜色值之间也可以进行算数运算，同样也是分段计算的，比如</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#010203</span> * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>计算 <code>01 * 2 = 02</code> <code>02 * 2 = 04</code> <code>03 * 2 = 06</code>，然后编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#020406</span>; &#125;</span><br></pre></td></tr></table></figure><p>需要注意的是，如果颜色值包含 alpha channel（rgba 或 hsla 两种颜色值），必须拥有相等的 alpha 值才能进行运算，因为算术运算不会作用于 alpha 值。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.75</span>) + <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0.75</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0.75</span>); &#125;</span><br></pre></td></tr></table></figure><p>颜色值的 alpha channel 可以通过 <a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#opacify-instance_method">opacify</a> 或 <a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#transparentize-instance_method">transparentize</a> 两个函数进行调整。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$translucent-red</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">opacify</span>(<span class="variable">$translucent-red</span>, <span class="number">0.3</span>);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">transparentize</span>(<span class="variable">$translucent-red</span>, <span class="number">0.25</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.25</span>); &#125;</span><br></pre></td></tr></table></figure><p>IE 滤镜要求所有的颜色值包含 alpha 层，而且格式必须固定 <code>#AABBCCDD</code>，使用 <code>ie_hex_str</code> 函数可以很容易地将颜色转化为 IE 滤镜要求的格式。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$translucent-red</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line"><span class="variable">$green</span>: <span class="number">#00ff00</span>;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">filter</span>: progid:DXImageTransform.Microsoft.<span class="built_in">gradient</span>(enabled=<span class="string">&#x27;false&#x27;</span>, startColorstr=<span class="string">&#x27;#&#123;ie-hex-str($green)&#125;&#x27;</span>, endColorstr=<span class="string">&#x27;#&#123;ie-hex-str($translucent-red)&#125;&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">filter</span>: progid:DXImageTransform.Microsoft.<span class="built_in">gradient</span>(enabled=<span class="string">&#x27;false&#x27;</span>, startColorstr=<span class="number">#FF00FF00</span>, endColorstr=<span class="number">#80FF0000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-4-3-字符串运算-String-Operations"><a href="#6-4-3-字符串运算-String-Operations" class="headerlink" title="6.4.3. 字符串运算 (String Operations)"></a>6.4.3. 字符串运算 (String Operations)</h4><p><code>+</code> 可用于连接字符串</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: e + -resize;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: e-resize; &#125;</span><br></pre></td></tr></table></figure><p>注意，如果有引号字符串（位于 <code>+</code> 左侧）连接无引号字符串，运算结果是有引号的，相反，无引号字符串（位于 <code>+</code> 左侧）连接有引号字符串，运算结果则没有引号。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;Foo &quot;</span> + Bar;</span><br><span class="line">  <span class="attribute">font-family</span>: sans- + <span class="string">&quot;serif&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;Foo Bar&quot;</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: sans-serif; &#125;</span><br></pre></td></tr></table></figure><p>运算表达式与其他值连用时，用空格做连接符：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">3px</span> + <span class="number">4px</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">7px</span> auto; &#125;</span><br></pre></td></tr></table></figure><p>在有引号的文本字符串中使用 <code>#&#123;&#125;</code> 插值语句可以添加动态的值：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;I ate #&#123;5 + 10&#125; pies!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;I ate 15 pies!&quot;</span>; &#125;</span><br></pre></td></tr></table></figure><p>空的值被视作插入了空字符串：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$value</span>: null;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;I ate #&#123;$value&#125; pies!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;I ate pies!&quot;</span>; &#125;</span><br></pre></td></tr></table></figure><h4 id="6-4-4-布尔运算-Boolean-Operations"><a href="#6-4-4-布尔运算-Boolean-Operations" class="headerlink" title="6.4.4. 布尔运算 (Boolean Operations)"></a>6.4.4. 布尔运算 (Boolean Operations)</h4><p>SassScript 支持布尔型的 <code>and</code> <code>or</code> 以及 <code>not</code> 运算。</p><h4 id="6-4-5-数组运算-List-Operations"><a href="#6-4-5-数组运算-List-Operations" class="headerlink" title="6.4.5. 数组运算 (List Operations)"></a>6.4.5. 数组运算 (List Operations)</h4><p>数组不支持任何运算方式，只能使用 <a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#list-functions">list functions</a> 控制。</p><h3 id="6-5-圆括号-Parentheses"><a href="#6-5-圆括号-Parentheses" class="headerlink" title="6.5. 圆括号 (Parentheses)"></a>6.5. 圆括号 (Parentheses)</h3><p>圆括号可以用来影响运算的顺序：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1em</span> + (<span class="number">2em</span> * <span class="number">3</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">7em</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="6-6-函数-Functions"><a href="#6-6-函数-Functions" class="headerlink" title="6.6. 函数 (Functions)"></a>6.6. 函数 (Functions)</h3><p>SassScript 定义了多种函数，有些甚至可以通过普通的 CSS 语句调用：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">100%</span>, <span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff0000</span>; &#125;</span><br></pre></td></tr></table></figure><h4 id="6-6-1-关键词参数-Keyword-Arguments"><a href="#6-6-1-关键词参数-Keyword-Arguments" class="headerlink" title="6.6.1. 关键词参数 (Keyword Arguments)"></a>6.6.1. 关键词参数 (Keyword Arguments)</h4><p>Sass 函数允许使用关键词参数 (keyword arguments)，上面的例子也可以写成：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">hsl</span>(<span class="variable">$hue</span>: <span class="number">0</span>, <span class="variable">$saturation</span>: <span class="number">100%</span>, <span class="variable">$lightness</span>: <span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>虽然不够简明，但是阅读起来会更方便。关键词参数给函数提供了更灵活的接口，以及容易调用的参数。关键词参数可以打乱顺序使用，如果使用默认值也可以省缺，另外，参数名被视为变量名，下划线、短横线可以互换使用。</p><p>通过 <a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html">Sass::Script::Functions</a> 查看完整的 Sass 函数列表，参数名，以及如何自定义函数。</p><h3 id="6-7-插值语句-Interpolation"><a href="#6-7-插值语句-Interpolation" class="headerlink" title="6.7. 插值语句 #{} (Interpolation: #{})"></a>6.7. 插值语句 <code>#&#123;&#125;</code> (Interpolation: <code>#&#123;&#125;</code>)</h3><p>通过 <code>#&#123;&#125;</code> 插值语句可以在选择器或属性名中使用变量：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$name</span>: foo;</span><br><span class="line"><span class="variable">$attr</span>: border;</span><br><span class="line"><span class="selector-tag">p</span>.#&#123;<span class="variable">$name</span>&#125; &#123;</span><br><span class="line">  #&#123;<span class="variable">$attr</span>&#125;-<span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-class">.foo</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: blue; &#125;</span><br></pre></td></tr></table></figure><p><code>#&#123;&#125;</code> 插值语句也可以在属性值中插入 SassScript，大多数情况下，这样可能还不如使用变量方便，但是使用 <code>#&#123;&#125;</code> 可以避免 Sass 运行运算表达式，直接编译 CSS。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="variable">$font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="variable">$line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">font</span>: #&#123;<span class="variable">$font-size</span>&#125;/#&#123;<span class="variable">$line-height</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">12px</span>/<span class="number">30px</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="6-8-amp-in-SassScript"><a href="#6-8-amp-in-SassScript" class="headerlink" title="6.8. &amp; in SassScript"></a>6.8. <code>&amp;</code> in SassScript</h3><p>Just like when it’s used in selectors, &amp; in SassScript refers to the current parent selector. It’s a comma-separated list of space-separated lists. For example:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.foo</span><span class="selector-class">.bar</span> <span class="selector-class">.baz</span><span class="selector-class">.bang</span>, <span class="selector-class">.bip</span><span class="selector-class">.qux</span> &#123;</span><br><span class="line">  <span class="variable">$selector</span>: &amp;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The value of $selector is now ((“.foo.bar” “.baz.bang”), “.bip.qux”). The compound selectors are quoted here to indicate that they’re strings, but in reality they would be unquoted. Even if the parent selector doesn’t contain a comma or a space, &amp; will always have two levels of nesting, so it can be accessed consistently.</p><p>If there is no parent selector, the value of &amp; will be null. This means you can use it in a mixin to detect whether a parent selector exists:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> does-parent-exist &#123;</span><br><span class="line">  <span class="keyword">@if</span> &amp; &#123;</span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">@else</span> &#123;</span><br><span class="line">    <span class="selector-tag">a</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-9-变量定义-default-Variable-Defaults-default"><a href="#6-9-变量定义-default-Variable-Defaults-default" class="headerlink" title="6.9. 变量定义 !default (Variable Defaults: !default)"></a>6.9. 变量定义 <code>!default</code> (Variable Defaults: <code>!default</code>)</h3><p>可以在变量的结尾添加 <code>!default</code> 给一个未通过 <code>!default</code> 声明赋值的变量赋值，此时，如果变量已经被赋值，不会再被重新赋值，但是如果变量还没有被赋值，则会被赋予新的值。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$content</span>: <span class="string">&quot;First content&quot;</span>;</span><br><span class="line"><span class="variable">$content</span>: <span class="string">&quot;Second content?&quot;</span> !default;</span><br><span class="line"><span class="variable">$new_content</span>: <span class="string">&quot;First time reference&quot;</span> !default;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="variable">$content</span>;</span><br><span class="line">  new-<span class="attribute">content</span>: <span class="variable">$new_content</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;First content&quot;</span>;</span><br><span class="line">  new-<span class="attribute">content</span>: <span class="string">&quot;First time reference&quot;</span>; &#125;</span><br></pre></td></tr></table></figure><p>变量是 null 空值时将视为未被 <code>!default</code> 赋值。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$content</span>: null;</span><br><span class="line"><span class="variable">$content</span>: <span class="string">&quot;Non-null content&quot;</span> !default;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="variable">$content</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;Non-null content&quot;</span>; &#125;</span><br></pre></td></tr></table></figure><h2 id="7-Rules-与指令-Rules-and-Directives"><a href="#7-Rules-与指令-Rules-and-Directives" class="headerlink" title="7. @-Rules 与指令 (@-Rules and Directives)"></a>7. @-Rules 与指令 (@-Rules and Directives)</h2><p>Sass 支持所有的 CSS3 @-Rules，以及 Sass 特有的 “指令”（directives）。这一节会详细解释，更多资料请查看 <a href="https://www.sass.hk/docs/#8">控制指令 (control directives)</a> 与 <a href="https://www.sass.hk/docs/#9">混合指令 (mixin directives)</a> 两个部分。</p><h3 id="7-1-import"><a href="#7-1-import" class="headerlink" title="7.1. @import"></a>7.1. @import</h3><p>Sass 拓展了 <code>@import</code> 的功能，允许其导入 SCSS 或 Sass 文件。被导入的文件将合并编译到同一个 CSS 文件中，另外，被导入的文件中所包含的变量或者混合指令 (mixin) 都可以在导入的文件中使用。</p><p>Sass 在当前地址，或 Rack, Rails, Merb 的 Sass 文件地址寻找 Sass 文件，如果需要设定其他地址，可以用 <code>:load_paths</code> 选项，或者在命令行中输入 <code>--load-path</code> 命令。</p><p>通常，<code>@import</code> 寻找 Sass 文件并将其导入，但在以下情况下，<code>@import</code> 仅作为普通的 CSS 语句，不会导入任何 Sass 文件。</p><ul><li>文件拓展名是 <code>.css</code>；</li><li>文件名以 <code>http://</code> 开头；</li><li>文件名是 <code>url()</code>；</li><li><code>@import</code> 包含 media queries。</li></ul><p>如果不在上述情况内，文件的拓展名是 <code>.scss</code> 或 <code>.sass</code>，则导入成功。没有指定拓展名，Sass 将会试着寻找文件名相同，拓展名为 <code>.scss</code> 或 <code>.sass</code> 的文件并将其导入。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;foo.scss&quot;</span>;</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;foo&quot;</span>;</span><br></pre></td></tr></table></figure><p>都会导入文件 foo.scss，但是</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;foo.css&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;foo&quot;</span> screen;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;http://foo.com/bar&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> url(foo);</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;foo.css&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;foo&quot;</span> screen;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;http://foo.com/bar&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> url(foo);</span><br></pre></td></tr></table></figure><p>Sass 允许同时导入多个文件，例如同时导入 rounded-corners 与 text-shadow 两个文件：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;rounded-corners&quot;</span>, <span class="string">&quot;text-shadow&quot;</span>;</span><br></pre></td></tr></table></figure><p>导入文件也可以使用 <code>#&#123; &#125;</code> 插值语句，但不是通过变量动态导入 Sass 文件，只能作用于 CSS 的 <code>url()</code> 导入方式：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$family</span>: <span class="built_in">unquote</span>(<span class="string">&quot;Droid+Sans&quot;</span>);</span><br><span class="line"><span class="keyword">@import</span> url(<span class="string">&quot;http://fonts.googleapis.com/css?family=\#&#123;$family&#125;&quot;</span>);</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(<span class="string">&quot;http://fonts.googleapis.com/css?family=Droid+Sans&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="7-1-1-分音-Partials"><a href="#7-1-1-分音-Partials" class="headerlink" title="7.1.1. 分音 (Partials)"></a>7.1.1. 分音 (Partials)</h4><p>如果需要导入 SCSS 或者 Sass 文件，但又不希望将其编译为 CSS，只需要在文件名前添加下划线，这样会告诉 Sass 不要编译这些文件，但导入语句中却不需要添加下划线。</p><p>例如，将文件命名为 <code>_colors.scss</code>，便不会编译 <code>_colours.css</code> 文件。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;colors&quot;</span>;</span><br></pre></td></tr></table></figure><p>上面的例子，导入的其实是 <code>_colors.scss</code> 文件</p><p>注意，不可以同时存在添加下划线与未添加下划线的同名文件，添加下划线的文件将会被忽略。</p><h4 id="7-1-2-嵌套-import"><a href="#7-1-2-嵌套-import" class="headerlink" title="7.1.2. 嵌套 @import"></a>7.1.2. 嵌套 @import</h4><p>大多数情况下，一般在文件的最外层（不在嵌套规则内）使用 <code>@import</code>，其实，也可以将 <code>@import</code> 嵌套进 CSS 样式或者 <code>@media</code> 中，与平时的用法效果相同，只是这样导入的样式只能出现在嵌套的层中。</p><p>假设 example.scss 文件包含以下样式：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后导入到 <code>#main</code> 样式内</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&quot;example&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将会被编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> <span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Directives that are only allowed at the base level of a document, like @mixin or @charset, are not allowed in files that are @imported in a nested context. 这一句不理解</p></blockquote><p>不可以在混合指令 (mixin) 或控制指令 (control directives) 中嵌套 <code>@import</code>。</p><h3 id="7-2-media"><a href="#7-2-media" class="headerlink" title="7.2. @media"></a>7.2. @media</h3><p>Sass 中 <code>@media</code> 指令与 CSS 中用法一样，只是增加了一点额外的功能：允许其在 CSS 规则中嵌套。如果 <code>@media</code> 嵌套在 CSS 规则内，编译时，<code>@media</code> 将被编译到文件的最外层，包含嵌套的父选择器。这个功能让 <code>@media</code> 用起来更方便，不需要重复使用选择器，也不会打乱 CSS 的书写流程。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">orientation</span>: landscape) &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>; &#125;</span><br><span class="line">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">orientation</span>: landscape) &#123;</span><br><span class="line">    <span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">500px</span>; &#125; &#125;</span><br><span class="line"><span class="keyword">@media</span>` 的 queries 允许互相嵌套使用，编译时，Sass 自动添加 `<span class="keyword">and</span></span><br><span class="line">@media screen &#123;</span><br><span class="line">  <span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">    <span class="keyword">@media</span> (<span class="attribute">orientation</span>: landscape) &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">orientation</span>: landscape) &#123;</span><br><span class="line">  <span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>; &#125; &#125;</span><br></pre></td></tr></table></figure><p><code>@media</code> 甚至可以使用 SassScript（比如变量，函数，以及运算符）代替条件的名称或者值：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$media</span>: screen;</span><br><span class="line"><span class="variable">$feature</span>: -webkit-min-device-pixel-ratio;</span><br><span class="line"><span class="variable">$value</span>: <span class="number">1.5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> #&#123;<span class="variable">$media</span>&#125; and ($feature: $value) &#123;</span><br><span class="line">  <span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">1.5</span>) &#123;</span><br><span class="line">  <span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>; &#125; &#125;</span><br></pre></td></tr></table></figure><h3 id="7-3-extend"><a href="#7-3-extend" class="headerlink" title="7.3. @extend"></a>7.3. @extend</h3><p>在设计网页的时候常常遇到这种情况：一个元素使用的样式与另一个元素完全相同，但又添加了额外的样式。通常会在 HTML 中给元素定义两个 class，一个通用样式，一个特殊样式。假设现在要设计一个普通错误样式与一个严重错误样式，一般会这样写：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;error seriousError&quot;&gt;</span><br><span class="line">  Oh no! You&#x27;ve been hacked!</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>样式如下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>麻烦的是，这样做必须时刻记住使用 <code>.seriousError</code> 时需要参考 <code>.error</code> 的样式，带来了很多不变：智能比如加重维护负担，导致 bug，或者给 HTML 添加无语意的样式。使用 <code>@extend</code> 可以避免上述情况，告诉 Sass 将一个选择器下的所有样式继承给另一个选择器。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> .error;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面代码的意思是将 <code>.error</code> 下的所有样式继承给 <code>.seriousError</code>，<code>border-width: 3px;</code> 是单独给 <code>.seriousError</code> 设定特殊样式，这样，使用 <code>.seriousError</code> 的地方可以不再使用 <code>.error</code>。</p><p>其他使用到 <code>.error</code> 的样式也会同样继承给 <code>.seriousError</code>，例如，另一个样式 <code>.error.intrusion</code> 使用了 <code>hacked.png</code> 做背景，<code>&lt;div class=&quot;seriousError intrusion&quot;&gt;</code> 也同样会使用 <code>hacked.png</code> 背景。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span><span class="selector-class">.intrusion</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;/image/hacked.png&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="7-3-1-How-it-Works"><a href="#7-3-1-How-it-Works" class="headerlink" title="7.3.1. How it Works"></a>7.3.1. How it Works</h4><p><code>@extend</code> 的作用是将重复使用的样式 (<code>.error</code>) 延伸 (extend) 给需要包含这个样式的特殊样式（<code>.seriousError</code>），刚刚的例子：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.error</span><span class="selector-class">.intrusion</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;/image/hacked.png&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> .error;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span>, <span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.error</span><span class="selector-class">.intrusion</span>, <span class="selector-class">.seriousError</span><span class="selector-class">.intrusion</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;/image/hacked.png&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>; &#125;</span><br></pre></td></tr></table></figure><p>当合并选择器时，<code>@extend</code> 会很聪明地避免无谓的重复，<code>.seriousError.seriousError</code> 将编译为 <code>.seriousError</code>，不能匹配任何元素的选择器（比如 <code>#main#footer</code> ）也会删除。</p><h4 id="7-3-2-延伸复杂的选择器-Extending-Complex-Selectors"><a href="#7-3-2-延伸复杂的选择器-Extending-Complex-Selectors" class="headerlink" title="7.3.2. 延伸复杂的选择器 (Extending Complex Selectors)"></a>7.3.2. 延伸复杂的选择器 (Extending Complex Selectors)</h4><p>Class 选择器并不是唯一可以被延伸 (extend) 的，Sass 允许延伸任何定义给单个元素的选择器，比如 <code>.special.cool</code>，<code>a:hover</code> 或者 <code>a.user[href^=&quot;http://&quot;]</code> 等，例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hoverlink</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> <span class="attribute">a</span>:<span class="attribute">hover</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同 class 元素一样，<code>a:hover</code> 的样式将继承给 <code>.hoverlink</code>。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hoverlink</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> <span class="attribute">a</span>:<span class="attribute">hover</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>, <span class="selector-class">.hoverlink</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: underline; &#125;</span><br></pre></td></tr></table></figure><p>与上面 <code>.error.intrusion</code> 的例子一样，所有 <code>a:hover</code> 的样式将继承给 <code>.hoverlink</code>，包括其他使用到 <code>a:hover</code> 的样式，例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hoverlink</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> <span class="attribute">a</span>:<span class="attribute">hover</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comment</span> <span class="selector-tag">a</span><span class="selector-class">.user</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.comment</span> <span class="selector-tag">a</span><span class="selector-class">.user</span><span class="selector-pseudo">:hover</span>, <span class="selector-class">.comment</span> <span class="selector-class">.user</span><span class="selector-class">.hoverlink</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold; &#125;</span><br></pre></td></tr></table></figure><h4 id="7-3-3-多重延伸-Multiple-Extends"><a href="#7-3-3-多重延伸-Multiple-Extends" class="headerlink" title="7.3.3. 多重延伸 (Multiple Extends)"></a>7.3.3. 多重延伸 (Multiple Extends)</h4><p>同一个选择器可以延伸给多个选择器，它所包含的属性将继承给所有被延伸的选择器：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.attention</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">3em</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ff0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> .error;</span><br><span class="line">  <span class="keyword">@extend</span> .attention;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span>, <span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.attention</span>, <span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">3em</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ff0</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>; &#125;</span><br></pre></td></tr></table></figure><p>每个 <code>.seriousError</code> 将包含 <code>.error</code> 与 <code>.attention</code> 下的所有样式，这时，后定义的样式享有优先权：<code>.seriousError</code> 的背景颜色是 <code>#ff0</code> 而不是 <code>#fdd</code>，因为 <code>.attention</code> 在 <code>.error</code> 之后定义。</p><p>多重延伸可以使用逗号分隔选择器名，比如 <code>@extend .error, .attention;</code> 与 <code>@extend .error;</code> <code>@extend.attention</code> 有相同的效果。</p><h4 id="7-3-4-继续延伸-Chaining-Extends"><a href="#7-3-4-继续延伸-Chaining-Extends" class="headerlink" title="7.3.4. 继续延伸 (Chaining Extends)"></a>7.3.4. 继续延伸 (Chaining Extends)</h4><p>当一个选择器延伸给第二个后，可以继续将第二个选择器延伸给第三个，例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> .error;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.criticalError</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> .seriousError;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">10%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在，每个 <code>.seriousError</code> 选择器将包含 <code>.error</code> 的样式，而 <code>.criticalError</code> 不仅包含 <code>.seriousError</code> 的样式也会同时包含 <code>.error</code> 的所有样式，上面的代码编译为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span>, <span class="selector-class">.seriousError</span>, <span class="selector-class">.criticalError</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.seriousError</span>, <span class="selector-class">.criticalError</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.criticalError</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">10%</span>; &#125;</span><br></pre></td></tr></table></figure><h4 id="7-3-5-选择器列-Selector-Sequences"><a href="#7-3-5-选择器列-Selector-Sequences" class="headerlink" title="7.3.5. 选择器列 (Selector Sequences)"></a>7.3.5. 选择器列 (Selector Sequences)</h4><p>暂时不可以将选择器列 (Selector Sequences)，比如 <code>.foo .bar</code> 或 <code>.foo + .bar</code>，延伸给其他元素，但是，却可以将其他元素延伸给选择器列：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#fake-links</span> <span class="selector-class">.link</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>, <span class="selector-id">#fake-links</span> <span class="selector-class">.link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue; &#125;</span><br><span class="line">  <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>, <span class="selector-id">#fake-links</span> <span class="selector-class">.link</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline; &#125;</span><br></pre></td></tr></table></figure><h5 id="7-3-5-1-合并选择器列-Merging-Selector-Sequences"><a href="#7-3-5-1-合并选择器列-Merging-Selector-Sequences" class="headerlink" title="7.3.5.1. 合并选择器列 (Merging Selector Sequences)"></a>7.3.5.1. 合并选择器列 (Merging Selector Sequences)</h5><p>有时会遇到复杂的情况，比如选择器列中的某个元素需要延伸给另一个选择器列，这种情况下，两个选择器列需要合并，比如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#admin</span> <span class="selector-class">.tabbar</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#demo</span> <span class="selector-class">.overview</span> <span class="selector-class">.fakelink</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>技术上讲能够生成所有匹配条件的结果，但是这样生成的样式表太复杂了，上面这个简单的例子就可能有 10 种结果。所以，Sass 只会编译输出有用的选择器。</p><p>当两个列 (sequence) 合并时，如果没有包含相同的选择器，将生成两个新选择器：第一列出现在第二列之前，或者第二列出现在第一列之前：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#admin</span> <span class="selector-class">.tabbar</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#demo</span> <span class="selector-class">.overview</span> <span class="selector-class">.fakelink</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#admin</span> <span class="selector-class">.tabbar</span> <span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-id">#admin</span> <span class="selector-class">.tabbar</span> <span class="selector-id">#demo</span> <span class="selector-class">.overview</span> <span class="selector-class">.fakelink</span>,</span><br><span class="line"><span class="selector-id">#demo</span> <span class="selector-class">.overview</span> <span class="selector-id">#admin</span> <span class="selector-class">.tabbar</span> <span class="selector-class">.fakelink</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold; &#125;</span><br></pre></td></tr></table></figure><p>如果两个列 (sequence) 包含了相同的选择器，相同部分将会合并在一起，其他部分交替输出。在下面的例子里，两个列都包含 <code>#admin</code>，输出结果中它们合并在了一起：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#admin</span> <span class="selector-class">.tabbar</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#admin</span> <span class="selector-class">.overview</span> <span class="selector-class">.fakelink</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#admin</span> <span class="selector-class">.tabbar</span> <span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-id">#admin</span> <span class="selector-class">.tabbar</span> <span class="selector-class">.overview</span> <span class="selector-class">.fakelink</span>,</span><br><span class="line"><span class="selector-id">#admin</span> <span class="selector-class">.overview</span> <span class="selector-class">.tabbar</span> <span class="selector-class">.fakelink</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold; &#125;</span><br></pre></td></tr></table></figure><h4 id="7-3-6-extend-Only-选择器-extend-Only-Selectors"><a href="#7-3-6-extend-Only-选择器-extend-Only-Selectors" class="headerlink" title="7.3.6. @extend-Only 选择器 (@extend-Only Selectors)"></a>7.3.6. @extend-Only 选择器 (@extend-Only Selectors)</h4><p>有时，需要定义一套样式并不是给某个元素用，而是只通过 <code>@extend</code> 指令使用，尤其是在制作 Sass 样式库的时候，希望 Sass 能够忽略用不到的样式。</p><p>如果使用普通的 CSS 规则，最后会编译出很多用不到的样式，也容易与其他样式名冲突，所以，Sass 引入了“占位符选择器” (placeholder selectors)，看起来很像普通的 <code>id</code> 或 <code>class</code> 选择器，只是 <code>#</code> 或 <code>.</code> 被替换成了 <code>%</code>。可以像 class 或者 id 选择器那样使用，当它们单独使用时，不会被编译到 CSS 文件中。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This ruleset won&#x27;t be rendered on its own.</span></span><br><span class="line"><span class="selector-id">#context</span> <span class="selector-tag">a</span>%extreme &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>占位符选择器需要通过延伸指令使用，用法与 class 或者 id 选择器一样，被延伸后，占位符选择器本身不会被编译。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.notice</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> %extreme;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#context</span> <span class="selector-tag">a</span><span class="selector-class">.notice</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2em</span>; &#125;</span><br></pre></td></tr></table></figure><h4 id="7-3-7-optional-声明-The-optional-Flag"><a href="#7-3-7-optional-声明-The-optional-Flag" class="headerlink" title="7.3.7. !optional 声明 (The !optional Flag)"></a>7.3.7. <code>!optional</code> 声明 (The <code>!optional</code> Flag)</h4><p>如果 <code>@extend</code> 失败会收到错误提示，比如，这样写 <code>a.important &#123;@extend .notice&#125;</code>，当没有 <code>.notice</code> 选择器时，将会报错，只有 <code>h1.notice</code> 包含 <code>.notice</code> 时也会报错，因为 <code>h1</code> 与 <code>a</code> 冲突，会生成新的选择器。</p><p>如果要求 <code>@extend</code> 不生成新选择器，可以通过 <code>!optional</code> 声明达到这个目的，例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> .notice !optional;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="7-3-8-在指令中延伸-extend-in-Directives"><a href="#7-3-8-在指令中延伸-extend-in-Directives" class="headerlink" title="7.3.8. 在指令中延伸 (@extend in Directives)"></a>7.3.8. 在指令中延伸 (@extend in Directives)</h4><p>在指令中使用 <code>@extend</code> 时（比如在 <code>@media</code> 中）有一些限制：Sass 不可以将 <code>@media</code> 层外的 CSS 规则延伸给指令层内的 CSS，这样会生成大量的无用代码。也就是说，如果在 <code>@media</code> （或者其他 CSS 指令）中使用 <code>@extend</code>，必须延伸给相同指令层中的选择器。</p><p>下面的例子是可行的：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line">  <span class="selector-class">.error</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">    <span class="keyword">@extend</span> .error;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但不可以这样：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line">  <span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">    <span class="comment">// INVALID EXTEND: .error is used outside of the &quot;@media print&quot; directive</span></span><br><span class="line">    <span class="keyword">@extend</span> .error;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>希望有一天，浏览器可以原生支持 <code>@extend</code> 指令，这样就可以在任何指令中使用延伸功能，不再受限制了。</p><h3 id="7-4-at-root"><a href="#7-4-at-root" class="headerlink" title="7.4. @at-root"></a>7.4. @at-root</h3><p>The @at-root directive causes one or more rules to be emitted at the root of the document, rather than being nested beneath their parent selectors. It can either be used with a single inline selector:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">@at-root</span> .child &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Which would produce:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.child</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure><p>Or it can be used with a block containing multiple selectors:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">@at-root</span> &#123;</span><br><span class="line">    <span class="selector-class">.child1</span> &#123; ... &#125;</span><br><span class="line">    <span class="selector-class">.child2</span> &#123; ... &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.step-child</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Which would output the following:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.child1</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.child2</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.parent</span> <span class="selector-class">.step-child</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure><h4 id="7-4-1-at-root-without-…-and-at-root-with-…"><a href="#7-4-1-at-root-without-…-and-at-root-with-…" class="headerlink" title="7.4.1. @at-root (without: …) and @at-root (with: …)"></a>7.4.1. @at-root (without: …) and @at-root (with: …)</h4><p>By default, @at-root just excludes selectors. However, it’s also possible to use @at-root to move outside of nested directives such as @media as well. For example:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line">  <span class="selector-class">.page</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">8in</span>;</span><br><span class="line">    <span class="keyword">@at-root</span> (<span class="attribute">without</span>: media) &#123;</span><br><span class="line">      <span class="attribute">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>produces:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line">  <span class="selector-class">.page</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">8in</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.page</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>You can use @at-root (without: …) to move outside of any directive. You can also do it with multiple directives separated by a space: @at-root (without: media supports) moves outside of both @media and @supports queries.</p><p>There are two special values you can pass to @at-root. “rule” refers to normal CSS rules; @at-root (without: rule) is the same as @at-root with no query. @at-root (without: all) means that the styles should be moved outside of all directives and CSS rules.</p><p>If you want to specify which directives or rules to include, rather than listing which ones should be excluded, you can use with instead of without. For example, @at-root (with: rule) will move outside of all directives, but will preserve any CSS rules.</p><h3 id="7-5-debug"><a href="#7-5-debug" class="headerlink" title="7.5. @debug"></a>7.5. @debug</h3><p>The @debug directive prints the value of a SassScript expression to the standard error output stream. It’s useful for debugging Sass files that have complicated SassScript going on. For example:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@debug</span> <span class="number">10em</span> + <span class="number">12em</span>;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Line 1 DEBUG: 22em</span><br></pre></td></tr></table></figure><h3 id="7-6-warn"><a href="#7-6-warn" class="headerlink" title="7.6. @warn"></a>7.6. @warn</h3><p>The @warn directive prints the value of a SassScript expression to the standard error output stream. It’s useful for libraries that need to warn users of deprecations or recovering from minor mixin usage mistakes. There are two major distinctions between @warn and @debug:</p><ol><li>You can turn warnings off with the –quiet command-line option or the :quiet Sass option.</li><li>A stylesheet trace will be printed out along with the message so that the user being warned can see where their styles caused the warning.</li></ol><p>Usage Example:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> adjust-location(<span class="variable">$x</span>, <span class="variable">$y</span>) &#123;</span><br><span class="line">  <span class="keyword">@if</span> unitless(<span class="variable">$x</span>) &#123;</span><br><span class="line">    <span class="keyword">@warn</span> <span class="string">&quot;Assuming #&#123;$x&#125; to be in pixels&quot;</span>;</span><br><span class="line">    <span class="variable">$x</span>: <span class="number">1px</span> * <span class="variable">$x</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@if</span> unitless(<span class="variable">$y</span>) &#123;</span><br><span class="line">    <span class="keyword">@warn</span> <span class="string">&quot;Assuming #&#123;$y&#125; to be in pixels&quot;</span>;</span><br><span class="line">    <span class="variable">$y</span>: <span class="number">1px</span> * <span class="variable">$y</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attribute">position</span>: relative; <span class="attribute">left</span>: <span class="variable">$x</span>; <span class="attribute">top</span>: <span class="variable">$y</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-7-warn"><a href="#7-7-warn" class="headerlink" title="7.7. @warn"></a>7.7. @warn</h3><p>The @error directive throws the value of a SassScript expression as a fatal error, including a nice stack trace. It’s useful for validating arguments to mixins and functions. For example:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> adjust-location(<span class="variable">$x</span>, <span class="variable">$y</span>) &#123;</span><br><span class="line">  <span class="keyword">@if</span> unitless(<span class="variable">$x</span>) &#123;</span><br><span class="line">    <span class="keyword">@error</span> <span class="string">&quot;$x may not be unitless, was #&#123;$x&#125;.&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@if</span> unitless(<span class="variable">$y</span>) &#123;</span><br><span class="line">    <span class="keyword">@error</span> <span class="string">&quot;$y may not be unitless, was #&#123;$y&#125;.&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attribute">position</span>: relative; <span class="attribute">left</span>: <span class="variable">$x</span>; <span class="attribute">top</span>: <span class="variable">$y</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>There is currently no way to catch errors.</p><h2 id="8-控制指令-Control-Directives"><a href="#8-控制指令-Control-Directives" class="headerlink" title="8. 控制指令 (Control Directives)"></a>8. 控制指令 (Control Directives)</h2><p>SassScript 提供了一些基础的控制指令，比如在满足一定条件时引用样式，或者设定范围重复输出格式。控制指令是一种高级功能，日常编写过程中并不常用到，主要与混合指令 (mixin) 配合使用，尤其是用在 <a href="http://compass-style.org/">Compass</a> 等样式库中。</p><h3 id="8-1-if"><a href="#8-1-if" class="headerlink" title="8.1. if()"></a>8.1. if()</h3><p>The built-in if() function allows you to branch on a condition and returns only one of two possible outcomes. It can be used in any script context. The if function only evaluates the argument corresponding to the one that it will return – this allows you to refer to variables that may not be defined or to have calculations that would otherwise cause an error (E.g. divide by zero).</p><h3 id="8-2-if"><a href="#8-2-if" class="headerlink" title="8.2. @if"></a>8.2. @if</h3><p>当 <code>@if</code> 的表达式返回值不是 <code>false</code> 或者 <code>null</code> 时，条件成立，输出 <code>&#123;&#125;</code> 内的代码：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="keyword">@if</span> <span class="number">1</span> + <span class="number">1</span> == <span class="number">2</span> &#123; <span class="attribute">border</span>: <span class="number">1px</span> solid; &#125;</span><br><span class="line">  <span class="keyword">@if</span> <span class="number">5</span> &lt; <span class="number">3</span> &#123; <span class="attribute">border</span>: <span class="number">2px</span> dotted; &#125;</span><br><span class="line">  <span class="keyword">@if</span> null  &#123; <span class="attribute">border</span>: <span class="number">3px</span> double; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid; &#125;</span><br></pre></td></tr></table></figure><p><code>@if</code> 声明后面可以跟多个 <code>@else if</code> 声明，或者一个 <code>@else</code> 声明。如果 <code>@if</code> 声明失败，Sass 将逐条执行 <code>@else if</code> 声明，如果全部失败，最后执行 <code>@else</code> 声明，例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$type</span>: monster;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="keyword">@if</span> <span class="variable">$type</span> == ocean &#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">  &#125; <span class="keyword">@else</span> if <span class="variable">$type</span> == matador &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">  &#125; <span class="keyword">@else</span> if <span class="variable">$type</span> == monster &#123;</span><br><span class="line">    <span class="attribute">color</span>: green;</span><br><span class="line">  &#125; <span class="keyword">@else</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green; &#125;</span><br></pre></td></tr></table></figure><h3 id="8-3-for"><a href="#8-3-for" class="headerlink" title="8.3. @for"></a>8.3. @for</h3><p><code>@for</code> 指令可以在限制的范围内重复输出格式，每次按要求（变量的值）对输出结果做出变动。这个指令包含两种格式：<code>@for $var from &lt;start&gt; through &lt;end&gt;</code>，或者 <code>@for $var from &lt;start&gt; to &lt;end&gt;</code>，区别在于 <code>through</code> 与 <code>to</code> 的含义：<em>当使用 through 时，条件范围包含 <start> 与 <end> 的值，而使用 to 时条件范围只包含 <start> 的值不包含 <end> 的值</em>。另外，<code>$var</code> 可以是任何变量，比如 <code>$i</code>；<code>&lt;start&gt;</code> 和 <code>&lt;end&gt;</code> 必须是整数值。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@for</span> <span class="variable">$i</span> from <span class="number">1</span> through <span class="number">3</span> &#123;</span><br><span class="line">  <span class="selector-class">.item-</span>#&#123;<span class="variable">$i</span>&#125; &#123; <span class="attribute">width</span>: <span class="number">2em</span> * <span class="variable">$i</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item-1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2em</span>; &#125;</span><br><span class="line"><span class="selector-class">.item-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">4em</span>; &#125;</span><br><span class="line"><span class="selector-class">.item-3</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">6em</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="8-4-each"><a href="#8-4-each" class="headerlink" title="8.4. @each"></a>8.4. @each</h3><p><code>@each</code> 指令的格式是 <code>$var in &lt;list&gt;</code>, <code>$var</code> 可以是任何变量名，比如 <code>$length</code> 或者 <code>$name</code>，而 <code>&lt;list&gt;</code> 是一连串的值，也就是值列表。</p><p><code>@each</code> 将变量 <code>$var</code> 作用于值列表中的每一个项目，然后输出结果，例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@each</span> <span class="variable">$animal</span> in puma, sea-slug, egret, salamander &#123;</span><br><span class="line">  .#&#123;<span class="variable">$animal</span>&#125;-<span class="attribute">icon</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/#&#123;$animal&#125;.png&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.puma-icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/puma.png&#x27;</span>); &#125;</span><br><span class="line"><span class="selector-class">.sea-slug-icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/sea-slug.png&#x27;</span>); &#125;</span><br><span class="line"><span class="selector-class">.egret-icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/egret.png&#x27;</span>); &#125;</span><br><span class="line"><span class="selector-class">.salamander-icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/salamander.png&#x27;</span>); &#125;</span><br></pre></td></tr></table></figure><h4 id="8-4-1-Multiple-Assignment"><a href="#8-4-1-Multiple-Assignment" class="headerlink" title="8.4.1 Multiple Assignment"></a>8.4.1 Multiple Assignment</h4><p>The @each directive can also use multiple variables, as in @each $var1, $var2, … in . If is a list of lists, each element of the sub-lists is assigned to the respective variable. For example:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@each</span> <span class="variable">$animal</span>, <span class="variable">$color</span>, <span class="variable">$cursor</span> in (puma, black, default),</span><br><span class="line">                                  (sea-slug, blue, <span class="attribute">pointer</span>),</span><br><span class="line">                                  (egret, white, move) &#123;</span><br><span class="line">  .#&#123;<span class="variable">$animal</span>&#125;-<span class="attribute">icon</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/#&#123;$animal&#125;.png&#x27;</span>);</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="variable">$color</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: <span class="variable">$cursor</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>is compiled to:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.puma-icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/puma.png&#x27;</span>);</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid black;</span><br><span class="line">  <span class="attribute">cursor</span>: default; &#125;</span><br><span class="line"><span class="selector-class">.sea-slug-icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/sea-slug.png&#x27;</span>);</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid blue;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer; &#125;</span><br><span class="line"><span class="selector-class">.egret-icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/egret.png&#x27;</span>);</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid white;</span><br><span class="line">  <span class="attribute">cursor</span>: move; &#125;</span><br></pre></td></tr></table></figure><p>Since maps are treated as lists of pairs, multiple assignment works with them as well. For example:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@each</span> <span class="variable">$header</span>, <span class="variable">$size</span> in (h1: <span class="number">2em</span>, h2: <span class="number">1.5em</span>, h3: <span class="number">1.2em</span>) &#123;</span><br><span class="line">  #&#123;<span class="variable">$header</span>&#125; &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">$size</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>is compiled to:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2em</span>; &#125;</span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5em</span>; &#125;</span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.2em</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="8-5-while"><a href="#8-5-while" class="headerlink" title="8.5. @while"></a>8.5. @while</h3><p><code>@while</code> 指令重复输出格式直到表达式返回结果为 <code>false</code>。这样可以实现比 <code>@for</code> 更复杂的循环，只是很少会用到。例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$i</span>: <span class="number">6</span>;</span><br><span class="line"><span class="keyword">@while</span> <span class="variable">$i</span> &gt; <span class="number">0</span> &#123;</span><br><span class="line">  <span class="selector-class">.item-</span>#&#123;<span class="variable">$i</span>&#125; &#123; <span class="attribute">width</span>: <span class="number">2em</span> * <span class="variable">$i</span>; &#125;</span><br><span class="line">  <span class="variable">$i</span>: <span class="variable">$i</span> - <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item-6</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">12em</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item-4</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">8em</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">4em</span>; &#125;</span><br></pre></td></tr></table></figure><h2 id="9-混合指令-Mixin-Directives"><a href="#9-混合指令-Mixin-Directives" class="headerlink" title="9. 混合指令 (Mixin Directives)"></a>9. 混合指令 (Mixin Directives)</h2><p>混合指令（Mixin）用于定义可重复使用的样式，避免了使用无语意的 class，比如 <code>.float-left</code>。混合指令可以包含所有的 CSS 规则，绝大部分 Sass 规则，甚至通过参数功能引入变量，输出多样化的样式。</p><h3 id="9-1-定义混合指令-mixin-Defining-a-Mixin-mixin"><a href="#9-1-定义混合指令-mixin-Defining-a-Mixin-mixin" class="headerlink" title="9.1. 定义混合指令 @mixin (Defining a Mixin: @mixin)"></a>9.1. 定义混合指令 <code>@mixin</code> (Defining a Mixin: <code>@mixin</code>)</h3><p>混合指令的用法是在 <code>@mixin</code> 后添加名称与样式，比如名为 <code>large-text</code> 的混合通过下面的代码定义：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> large-text &#123;</span><br><span class="line">  <span class="attribute">font</span>: &#123;</span><br><span class="line">    family: Arial;</span><br><span class="line">    size: <span class="number">20px</span>;</span><br><span class="line">    weight: bold;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>混合也需要包含选择器和属性，甚至可以用 <code>&amp;</code> 引用父选择器：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> clearfix &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  &amp;<span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;.&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">  &#125;</span><br><span class="line">  * <span class="selector-tag">html</span> &amp; &#123; <span class="attribute">height</span>: <span class="number">1px</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-2-引用混合样式-include-Including-a-Mixin-include"><a href="#9-2-引用混合样式-include-Including-a-Mixin-include" class="headerlink" title="9.2. 引用混合样式 @include (Including a Mixin: @include)"></a>9.2. 引用混合样式 <code>@include</code> (Including a Mixin: <code>@include</code>)</h3><p>使用 <code>@include</code> 指令引用混合样式，格式是在其后添加混合名称，以及需要的参数（可选）：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.page-title</span> &#123;</span><br><span class="line">  <span class="keyword">@include</span> large-text;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.page-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: Arial;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff0000</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>; &#125;</span><br></pre></td></tr></table></figure><p>也可以在最外层引用混合样式，不会直接定义属性，也不可以使用父选择器。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> silly-links &#123;</span><br><span class="line">  <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@include</span> silly-links;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">  <span class="attribute">background-color</span>: red; &#125;</span><br></pre></td></tr></table></figure><p>混合样式中也可以包含其他混合样式，比如</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> compound &#123;</span><br><span class="line">  <span class="keyword">@include</span> highlighted-background;</span><br><span class="line">  <span class="keyword">@include</span> header-text;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@mixin</span> highlighted-background &#123; <span class="attribute">background-color</span>: <span class="number">#fc0</span>; &#125;</span><br><span class="line"><span class="keyword">@mixin</span> header-text &#123; <span class="attribute">font-size</span>: <span class="number">20px</span>; &#125;</span><br></pre></td></tr></table></figure><p>混合样式中应该只定义后代选择器，这样可以安全的导入到文件的任何位置。</p><h3 id="9-3-参数-Arguments"><a href="#9-3-参数-Arguments" class="headerlink" title="9.3. 参数 (Arguments)"></a>9.3. 参数 (Arguments)</h3><p>参数用于给混合指令中的样式设定变量，并且赋值使用。在定义混合指令的时候，按照变量的格式，通过逗号分隔，将参数写进圆括号里。引用指令时，按照参数的顺序，再将所赋的值对应写进括号：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> sexy-border(<span class="variable">$color</span>, <span class="variable">$width</span>) &#123;</span><br><span class="line">  <span class="attribute">border</span>: &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$color</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="variable">$width</span>;</span><br><span class="line">    style: dashed;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123; <span class="keyword">@include</span> sexy-border(blue, <span class="number">1in</span>); &#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: blue;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">1in</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: dashed; &#125;</span><br></pre></td></tr></table></figure><p>混合指令也可以使用给变量赋值的方法给参数设定默认值，然后，当这个指令被引用的时候，如果没有给参数赋值，则自动使用默认值：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> sexy-border(<span class="variable">$color</span>, <span class="variable">$width</span>: <span class="number">1in</span>) &#123;</span><br><span class="line">  <span class="attribute">border</span>: &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$color</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="variable">$width</span>;</span><br><span class="line">    style: dashed;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123; <span class="keyword">@include</span> sexy-border(blue); &#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123; <span class="keyword">@include</span> sexy-border(blue, <span class="number">2in</span>); &#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: blue;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">1in</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: dashed; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: blue;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">2in</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: dashed; &#125;</span><br></pre></td></tr></table></figure><h4 id="9-3-1-关键词参数-Keyword-Arguments"><a href="#9-3-1-关键词参数-Keyword-Arguments" class="headerlink" title="9.3.1. 关键词参数 (Keyword Arguments)"></a>9.3.1. 关键词参数 (Keyword Arguments)</h4><p>混合指令也可以使用关键词参数，上面的例子也可以写成：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123; <span class="keyword">@include</span> sexy-border(<span class="variable">$color</span>: blue); &#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123; <span class="keyword">@include</span> sexy-border(<span class="variable">$color</span>: blue, <span class="variable">$width</span>: <span class="number">2in</span>); &#125;</span><br></pre></td></tr></table></figure><p>虽然不够简明，但是阅读起来会更方便。关键词参数给函数提供了更灵活的接口，以及容易调用的参数。关键词参数可以打乱顺序使用，如果使用默认值也可以省缺，另外，参数名被视为变量名，下划线、短横线可以互换使用。</p><h4 id="9-3-2-参数变量-Variable-Arguments"><a href="#9-3-2-参数变量-Variable-Arguments" class="headerlink" title="9.3.2. 参数变量 (Variable Arguments)"></a>9.3.2. 参数变量 (Variable Arguments)</h4><p>有时，不能确定混合指令需要使用多少个参数，比如一个关于 <code>box-shadow</code> 的混合指令不能确定有多少个 ‘shadow’ 会被用到。这时，可以使用参数变量 <code>…</code> 声明（写在参数的最后方）告诉 Sass 将这些参数视为值列表处理：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> box-shadow(<span class="variable">$shadows</span>...) &#123;</span><br><span class="line">  -moz-<span class="attribute">box-shadow</span>: <span class="variable">$shadows</span>;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="variable">$shadows</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="variable">$shadows</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.shadows</span> &#123;</span><br><span class="line">  <span class="keyword">@include</span> box-shadow(<span class="number">0px</span> <span class="number">4px</span> <span class="number">5px</span> <span class="number">#666</span>, <span class="number">2px</span> <span class="number">6px</span> <span class="number">10px</span> <span class="number">#999</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.shadowed</span> &#123;</span><br><span class="line">  -moz-<span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">4px</span> <span class="number">5px</span> <span class="number">#666</span>, <span class="number">2px</span> <span class="number">6px</span> <span class="number">10px</span> <span class="number">#999</span>;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">4px</span> <span class="number">5px</span> <span class="number">#666</span>, <span class="number">2px</span> <span class="number">6px</span> <span class="number">10px</span> <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">4px</span> <span class="number">5px</span> <span class="number">#666</span>, <span class="number">2px</span> <span class="number">6px</span> <span class="number">10px</span> <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参数变量也可以用在引用混合指令的时候 (<code>@include</code>)，与平时用法一样，将一串值列表中的值逐条作为参数引用：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> colors(<span class="variable">$text</span>, <span class="variable">$background</span>, <span class="variable">$border</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">$text</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="variable">$background</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="variable">$border</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$values</span>: <span class="number">#ff0000</span>, <span class="number">#00ff00</span>, <span class="number">#0000ff</span>;</span><br><span class="line"><span class="selector-class">.primary</span> &#123;</span><br><span class="line">  <span class="keyword">@include</span> colors(<span class="variable">$values</span>...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.primary</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff0000</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#00ff00</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#0000ff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>You can use variable arguments to wrap a mixin and add additional styles without changing the argument signature of the mixin. If you do so, even keyword arguments will get passed through to the wrapped mixin. For example:</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> wrapped-stylish-mixin(<span class="variable">$args</span>...) &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="keyword">@include</span> stylish-mixin(<span class="variable">$args</span>...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.stylish</span> &#123;</span><br><span class="line">  <span class="comment">// The $width argument will get passed on to &quot;stylish-mixin&quot; as a keyword</span></span><br><span class="line">  <span class="keyword">@include</span> wrapped-stylish-mixin(<span class="number">#00ff00</span>, <span class="variable">$width</span>: <span class="number">100px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面注释内的意思是：<code>$width</code> 参数将会传递给 <code>stylish-mixin</code> 作为关键词。</p><h3 id="9-4-向混合样式中导入内容-Passing-Content-Blocks-to-a-Mixin"><a href="#9-4-向混合样式中导入内容-Passing-Content-Blocks-to-a-Mixin" class="headerlink" title="9.4. 向混合样式中导入内容 (Passing Content Blocks to a Mixin)"></a>9.4. 向混合样式中导入内容 (Passing Content Blocks to a Mixin)</h3><p>在引用混合样式的时候，可以先将一段代码导入到混合指令中，然后再输出混合样式，额外导入的部分将出现在 <code>@content</code> 标志的地方：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> apply-to-ie6-only &#123;</span><br><span class="line">  * <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="keyword">@content</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@include</span> apply-to-ie6-only &#123;</span><br><span class="line">  <span class="selector-id">#logo</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(/logo.gif);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* <span class="selector-tag">html</span> <span class="selector-id">#logo</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">/logo.gif</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>为便于书写，@mixin 可以用 = 表示，而 @include 可以用 + 表示</strong>，所以上面的例子可以写成：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">=apply-to-ie6-only</span><br><span class="line">  * html</span><br><span class="line">    @content</span><br><span class="line"></span><br><span class="line">+apply-to-ie6-only</span><br><span class="line">  #logo</span><br><span class="line">    background-image: url(/logo.gif)</span><br></pre></td></tr></table></figure><p><strong>注意：</strong> 当 <code>@content</code> 在指令中出现过多次或者出现在循环中时，额外的代码将被导入到每一个地方。</p><h4 id="9-4-1-Variable-Scope-and-Content-Blocks"><a href="#9-4-1-Variable-Scope-and-Content-Blocks" class="headerlink" title="9.4.1. Variable Scope and Content Blocks"></a>9.4.1. Variable Scope and Content Blocks</h4><blockquote><p>The block of content passed to a mixin are evaluated in the scope where the block is defined, not in the scope of the mixin. This means that variables local to the mixin cannot be used within the passed style block and variables will resolve to the global value:</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$color</span>: white;</span><br><span class="line"><span class="keyword">@mixin</span> colors(<span class="variable">$color</span>: blue) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="variable">$color</span>;</span><br><span class="line">  <span class="keyword">@content</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="variable">$color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.colors</span> &#123;</span><br><span class="line">  <span class="keyword">@include</span> colors &#123; <span class="attribute">color</span>: <span class="variable">$color</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.colors</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">border-color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Additionally, this makes it clear that the variables and mixins that are used within the passed block are related to the other styles around where the block is defined. For example:</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#sidebar</span> &#123;</span><br><span class="line">  <span class="variable">$sidebar-width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">$sidebar-width</span>;</span><br><span class="line">  <span class="keyword">@include</span> smartphone &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="variable">$sidebar-width</span> / <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="10-函数指令-Function-Directives"><a href="#10-函数指令-Function-Directives" class="headerlink" title="10. 函数指令 (Function Directives)"></a>10. 函数指令 (Function Directives)</h2><p>Sass 支持自定义函数，并能在任何属性值或 Sass script 中使用：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$grid-width</span>: <span class="number">40px</span>;</span><br><span class="line"><span class="variable">$gutter-width</span>: <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@function</span> grid-width(<span class="variable">$n</span>) &#123;</span><br><span class="line">  <span class="keyword">@return</span> <span class="variable">$n</span> * <span class="variable">$grid-width</span> + (<span class="variable">$n</span> - <span class="number">1</span>) * <span class="variable">$gutter-width</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#sidebar</span> &#123; <span class="attribute">width</span>: <span class="built_in">grid-width</span>(<span class="number">5</span>); &#125;</span><br></pre></td></tr></table></figure><p>编译为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">240px</span>; &#125;</span><br></pre></td></tr></table></figure><p>与 mixin 相同，也可以传递若干个全局变量给函数作为参数。一个函数可以含有多条语句，需要调用 <code>@return</code> 输出结果。</p><p>自定义的函数也可以使用关键词参数，上面的例子还可以这样写：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#sidebar</span> &#123; <span class="attribute">width</span>: <span class="built_in">grid-width</span>(<span class="variable">$n</span>: <span class="number">5</span>); &#125;</span><br></pre></td></tr></table></figure><p>建议在自定义函数前添加前缀避免命名冲突，其他人阅读代码时也会知道这不是 Sass 或者 CSS 的自带功能。</p><p>自定义函数与 mixin 相同，都支持 variable arguments</p><h2 id="11-输出格式-Output-Style"><a href="#11-输出格式-Output-Style" class="headerlink" title="11. 输出格式 (Output Style)"></a>11. 输出格式 (Output Style)</h2><p>Sass 默认的 CSS 输出格式很美观也能清晰反映文档结构，为满足其他需求 Sass 也提供了多种输出格式。</p><p>Sass 提供了四种输出格式，可以通过 <code>:style option</code> 选项设定，或者在命令行中使用 <code>--style</code> 选项。</p><h3 id="11-1-nested"><a href="#11-1-nested" class="headerlink" title="11.1. :nested"></a>11.1. <code>:nested</code></h3><p>Nested （嵌套）样式是 Sass 默认的输出格式，能够清晰反映 CSS 与 HTML 的结构关系。选择器与属性等单独占用一行，缩进量与 Sass 文件中一致，每行的缩进量反映了其在嵌套规则内的层数。当阅读大型 CSS 文件时，这种样式可以很容易地分析文件的主要结构。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#000</span>; &#125;</span><br><span class="line">  <span class="selector-id">#main</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10em</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.huge</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">10em</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">text-decoration</span>: underline; &#125;</span><br></pre></td></tr></table></figure><h3 id="11-2-expanded"><a href="#11-2-expanded" class="headerlink" title="11.2. :expanded"></a>11.2. <code>:expanded</code></h3><p>Expanded 输出更像是手写的样式，选择器、属性等各占用一行，属性根据选择器缩进，而选择器不做任何缩进。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#main</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.huge</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">10em</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="11-3-compact"><a href="#11-3-compact" class="headerlink" title="11.3. :compact"></a>11.3. <code>:compact</code></h3><p>Compact 输出方式比起上面两种占用的空间更少，每条 CSS 规则只占一行，包含其下的所有属性。嵌套过的选择器在输出时没有空行，不嵌套的选择器会输出空白行作为分隔符。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123; <span class="attribute">color</span>: <span class="number">#fff</span>; <span class="attribute">background-color</span>: <span class="number">#000</span>; &#125;</span><br><span class="line"><span class="selector-id">#main</span> <span class="selector-tag">p</span> &#123; <span class="attribute">width</span>: <span class="number">10em</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.huge</span> &#123; <span class="attribute">font-size</span>: <span class="number">10em</span>; <span class="attribute">font-weight</span>: bold; <span class="attribute">text-decoration</span>: underline; &#125;</span><br></pre></td></tr></table></figure><h3 id="11-4-compressed"><a href="#11-4-compressed" class="headerlink" title="11.4. :compressed"></a>11.4. <code>:compressed</code></h3><p>Compressed 输出方式删除所有无意义的空格、空白行、以及注释，力求将文件体积压缩到最小，同时也会做出其他调整，比如会自动替换占用空间最小的颜色表达方式。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span>&#123;<span class="attribute">color</span>:<span class="number">#fff</span>;<span class="attribute">background-color</span>:<span class="number">#000</span>&#125;<span class="selector-id">#main</span> <span class="selector-tag">p</span>&#123;<span class="attribute">width</span>:<span class="number">10em</span>&#125;<span class="selector-class">.huge</span>&#123;<span class="attribute">font-size</span>:<span class="number">10em</span>;<span class="attribute">font-weight</span>:bold;<span class="attribute">text-decoration</span>:underline&#125;</span><br></pre></td></tr></table></figure><h2 id="12-拓展-Sass-Extending-Sass"><a href="#12-拓展-Sass-Extending-Sass" class="headerlink" title="12. 拓展 Sass (Extending Sass)"></a>12. 拓展 Sass (Extending Sass)</h2><p>Sass 提供了很多高级自定义功能，使用这些功能需要有良好的 Ruby 基础。</p><h3 id="12-1-自定义-Sass-函数-Defining-Custom-Sass-Functions"><a href="#12-1-自定义-Sass-函数-Defining-Custom-Sass-Functions" class="headerlink" title="12.1. 自定义 Sass 函数 (Defining Custom Sass Functions)"></a>12.1. 自定义 Sass 函数 (Defining Custom Sass Functions)</h3><p>通过 Ruby API 可以自定义 Sass 函数，具体请查看 <a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#adding_custom_functions">source documentation</a>。</p><h3 id="12-2-存储缓存-Cache-Stores"><a href="#12-2-存储缓存-Cache-Stores" class="headerlink" title="12.2. 存储缓存 (Cache Stores)"></a>12.2. 存储缓存 (Cache Stores)</h3><p>Sass caches parsed documents so that they can be reused without parsing them again unless they have changed. By default, Sass will write these cache files to a location on the filesystem indicated by :cache_location. If you cannot write to the filesystem or need to share cache across ruby processes or machines, then you can define your own cache store and set the:cache_store option. For details on creating your own cache store, please see the source documentation.</p><h3 id="12-3-自定义导入-Custom-Importers"><a href="#12-3-自定义导入-Custom-Importers" class="headerlink" title="12.3. 自定义导入 (Custom Importers)"></a>12.3. 自定义导入 (Custom Importers)</h3><p>Sass importers are in charge of taking paths passed to @import and finding the appropriate Sass code for those paths. By default, this code is loaded from the filesystem, but importers could be added to load from a database, over HTTP, or use a different file naming scheme than what Sass expects.</p><p>Each importer is in charge of a single load path (or whatever the corresponding notion is for the backend). Importers can be placed in the :load_paths array alongside normal filesystem paths.</p><p>When resolving an @import, Sass will go through the load paths looking for an importer that successfully imports the path. Once one is found, the imported file is used.</p><p>User-created importers must inherit from Sass::Importers::Base.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Sass-Syntactically-Awesome-StyleSheets&quot;&gt;&lt;a href=&quot;#Sass-Syntactically-Awesome-StyleSheets&quot; class=&quot;headerlink&quot; title=&quot;Sass (Syntactica</summary>
      
    
    
    
    <category term="前端" scheme="https://blog.lovelee.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="sass" scheme="https://blog.lovelee.cn/tags/sass/"/>
    
  </entry>
  
  <entry>
    <title>socket.io使用</title>
    <link href="https://blog.lovelee.cn/2022/09/18/socket.io/"/>
    <id>https://blog.lovelee.cn/2022/09/18/socket.io/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Web-Socket-amp-Socket-io"><a href="#Web-Socket-amp-Socket-io" class="headerlink" title="Web Socket &amp; Socket.io"></a><a href="https://www.cnblogs.com/jlfw/p/12941495.html">Web Socket &amp; Socket.io</a></h1><h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><p>HTTP无法轻松实现实时应用：</p><ul><li>HTTP协议是无状态的，服务器只会响应来自客户端的请求，但是它与客户端之间不具备持续连接。</li><li>我们可以非常轻松的捕获浏览器上发生的事件（比如用户点击了盒子），这个事件可以轻松产生与服务器的数据交互（比如Ajax）。但是，反过来却是不可能的：服务器端发生了一个事件，服务器无法将这个事件的信息实时主动通知它的客户端。只有在客户端查询服务器的当前状态的时候，所发生事件的信息才会从服务器传递到客户端。</li></ul><p>但是，确实聊天室确实存在</p><p>方法：</p><ul><li>长轮询：客户端每隔很短的时间，都会对服务器发出请求，查看是否有新的消息，只要轮询速度足够快，例如1秒，就能给人造成交互是实时进行的印象。这种做法是无奈之举，实际上对服务器、客户端双方都造成了大量的性能浪费。</li><li>长连接：客户端只请求一次，但是服务器会将连接保持，不会返回结果（想象一下我们没有写res.end()时，浏览器一直转小菊花）。服务器有了新数据，就将数据发回来，又有了新数据，就将数据发回来，而一直保持挂起状态。这种做法的也造成了大量的性能浪费。</li></ul><h1 id="WebSocket协议"><a href="#WebSocket协议" class="headerlink" title="WebSocket协议"></a>WebSocket协议</h1><p>WebSocket协议能够让浏览器和服务器全双工实时通信，互相的，服务器也能主动通知客户端</p><ul><li>WebSocket的原理非常的简单：利用HTTP请求产生握手，HTTP头部中含有WebSocket协议的请求，所以握手之后，二者转用TCP协议进行交流（QQ的协议）。现在的浏览器和服务器之间，就是QQ和QQ服务器的关系了。所以WebSocket协议，需要浏览器支持，更需要服务器支持。</li><li>支持WebSocket协议的浏览器有：Chrome 4、火狐4、IE10、Safari5</li><li>支持WebSocket协议的服务器有：Node 0、Apach7.0.2、Nginx1.3</li><li>Socket.IO是业界良心，新手福音。它屏蔽了所有底层细节，让顶层调用非常简单。并且还为不支持WebSocket协议的浏览器，提供了长轮询的透明模拟机制。</li><li>Node.js上需要写一些程序，来处理TCP请求。 使用require(‘dgram’) 模块</li><li>Node的单线程、非阻塞I/O、事件驱动机制，使它非常适合Socket服务器。</li></ul><h1 id="Socket-io"><a href="#Socket-io" class="headerlink" title="Socket.io"></a>Socket.io</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install socket.io</span><br></pre></td></tr></table></figure><p>制作index.html页面。页面中必须引入 /socket.io/socket.io.js, 调用io函数，取得socket对象。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;/socket.io/socket.io.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    var socket = io();  //socket 对象</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>服务器中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var io = require(&#x27;sockte.io&#x27;)(server);</span><br><span class="line">io.on(&#x27;connection&#x27;,function( socket )&#123;</span><br><span class="line">    //socket 对象</span><br><span class="line">    socket.on(&#x27;tiwen&#x27;,function( msg )&#123;</span><br><span class="line">        console.log(&#x27;服务器接受到了请求&#x27;);</span><br><span class="line">        //sockte.emit(&#x27;huida&#x27;,&#x27;ok&#x27;); //单条返回</span><br><span class="line">        //广播 , 就是给当前所有用户的发送信息。</span><br><span class="line">        io.emit(&#x27;huida&#x27;,&#x27;ok&#x27;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>客户端和服务器，都有socket对象。 两个对象都具有emit，和on的时间。emit用于发送，on用户接受。<br>发送的内容可以是任何类型的值。</p><h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><p>前台页面：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;index页面&lt;/h1&gt;</span><br><span class="line">信息内容：&lt;input type=&quot;text&quot; name=&quot;&quot; id=&quot;info&quot; value=&quot;&quot; /&gt;</span><br><span class="line">发送： &lt;input type=&quot;button&quot; name=&quot;&quot; id=&quot;btn&quot; value=&quot;发送&quot; /&gt;</span><br><span class="line">&lt;script src=&quot;/socket.io/socket.io.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">  var socket = io();</span><br><span class="line">  document.getElementById(&quot;btn&quot;).onclick = function (  ) &#123;</span><br><span class="line">    socket.emit(&#x27;tiwen&#x27;,document.getElementById(&quot;info&quot;).value);</span><br><span class="line">  &#125;</span><br><span class="line">  socket.on(&#x27;huida&#x27;,function ( msg ) &#123;</span><br><span class="line">    console.log(&#x27;回答：&#x27; +　msg);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p>后台：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&#x27;http&#x27;);</span><br><span class="line">var fs = require(&#x27;fs&#x27;);</span><br><span class="line"></span><br><span class="line">var server = http.createServer(function ( req,res ) &#123;</span><br><span class="line">  if (  req.url == &#x27;/&#x27; ) &#123;</span><br><span class="line">    // 显示首页</span><br><span class="line">    fs.readFile(&#x27;./index.html&#x27;,function ( err,data ) &#123;</span><br><span class="line">      res.end(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 创建io对象</span><br><span class="line">var io = require(&#x27;socket.io&#x27;)(server);</span><br><span class="line"></span><br><span class="line">// 监听连接事件</span><br><span class="line">io.on(&#x27;connection&#x27;,function ( socket ) &#123;</span><br><span class="line">  console.log( &#x27;一个客户端连接了&#x27; );</span><br><span class="line">  socket.on(&#x27;tiwen&#x27;,function ( msg ) &#123;</span><br><span class="line">        // console.log( &#x27;提问为：&#x27; + msg );</span><br><span class="line">        // socket.emit(&#x27;huida&#x27;,&#x27;好呀&#x27;);</span><br><span class="line">    // 加上广播</span><br><span class="line">    io.emit(&#x27;huida&#x27;,msg);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(80);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Web-Socket-amp-Socket-io&quot;&gt;&lt;a href=&quot;#Web-Socket-amp-Socket-io&quot; class=&quot;headerlink&quot; title=&quot;Web Socket &amp;amp; Socket.io&quot;&gt;&lt;/a&gt;&lt;a href=&quot;htt</summary>
      
    
    
    
    <category term="服务端" scheme="https://blog.lovelee.cn/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
    
    <category term="nodejs" scheme="https://blog.lovelee.cn/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>准备做的/学的</title>
    <link href="https://blog.lovelee.cn/2022/09/18/todo/"/>
    <id>https://blog.lovelee.cn/2022/09/18/todo/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<div class="note purple flat"><p>记录一下准备要做/学的清单</p></div><h2 id="准备-正在"><a href="#准备-正在" class="headerlink" title="准备 | 正在"></a>准备 | 正在</h2><ul><li><input disabled="" type="checkbox"> github action</li><li><input disabled="" type="checkbox"> canvas相关</li><li><input disabled="" type="checkbox"> Linux操作系统</li><li><input disabled="" type="checkbox"> 宝塔使用</li></ul><h2 id="已学过"><a href="#已学过" class="headerlink" title="已学过"></a>已学过</h2><ul><li><input checked="" disabled="" type="checkbox"> 域名解析</li><li><input checked="" disabled="" type="checkbox"> 服务器购买使用</li><li><input checked="" disabled="" type="checkbox"> 服务器环境搭建和程序部署 </li></ul>]]></content>
    
    
    <summary type="html">todos</summary>
    
    
    
    <category term="学习" scheme="https://blog.lovelee.cn/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="study" scheme="https://blog.lovelee.cn/tags/study/"/>
    
    <category term="todos" scheme="https://blog.lovelee.cn/tags/todos/"/>
    
  </entry>
  
  <entry>
    <title>Vue使用小计</title>
    <link href="https://blog.lovelee.cn/2022/09/18/vue%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%AE%A1/"/>
    <id>https://blog.lovelee.cn/2022/09/18/vue%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%AE%A1/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h2 id="组件递归"><a href="#组件递归" class="headerlink" title="组件递归"></a>组件递归</h2><ul><li>组件递归时，出现下次标签不渲染。问题处理：<ul><li><code>name</code> 为组件增加name属性</li></ul></li></ul><h2 id="应用过程"><a href="#应用过程" class="headerlink" title="应用过程"></a>应用过程</h2><ul><li><p>@scroll 绑定后无效</p><ul><li>给绑定元素增加 样式 <code>overflow-x:hidden; | overflow:auto;</code></li></ul></li><li><p>@click 绑定事件阻止行为</p><ul><li>stop 阻止冒泡</li><li>prevent 阻止默认事件</li><li>self 只作用于当前绑定元素</li><li>使用修饰符时，顺序很重要，相应的代码会以同样的顺序产生。</li><li>例如：用 @click.prevent.self 会阻止所有的点击，而 @click.self.prevent 只会阻止元素上的点击。</li></ul></li><li><p>页面使用多个组件只展示一个</p><ul><li>将组件使用双标签展示 如 <Loading /> 改为 <Loading></Loading></li></ul></li><li><p>hook </p></li><li><p>v-on</p></li><li><p>v-bind=”$props” 展开对象 可以省去写很多 键值对 (用于父子组件传值)</p></li><li><p>将不会后期更改的数据 （或大数据）放弃监听</p><ul><li>Object.freeze()</li></ul></li><li><p>简易的store</p><ul><li>const state = Vue.observable({ count: 0 })</li></ul></li><li><p>异步组件 + loading 效果</p><ul><li>使用vuex状态控制vm实例。dispatch控制组件的v-if，就不会出现组件未注册的错误或其他错误</li></ul></li></ul><h2 id="其他注意事项-坑点"><a href="#其他注意事项-坑点" class="headerlink" title="其他注意事项 / 坑点"></a>其他注意事项 / 坑点</h2><ul><li>ERROR Invalid options in vue.config.js: “baseUrl” is not allowed</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vue项目版本是 3.10.0 报错</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  baseUrl: process.env.NODE_ENV === &#x27;production&#x27;</span><br><span class="line">? &#x27;./&#x27;</span><br><span class="line">: &#x27;/&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">在vue-cli.3.3版本后 baseUrl被废除了，因此这边要写成 publicPath</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  publicPath: process.env.NODE_ENV === &#x27;production&#x27;</span><br><span class="line">? &#x27;./&#x27;</span><br><span class="line">: &#x27;/&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>​    </p><h2 id="vue-property-decorator"><a href="#vue-property-decorator" class="headerlink" title="vue-property-decorator"></a>vue-property-decorator</h2><ul><li><a href="https://www.jianshu.com/p/d8ed3aa76e9b">https://www.jianshu.com/p/d8ed3aa76e9b</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;组件递归&quot;&gt;&lt;a href=&quot;#组件递归&quot; class=&quot;headerlink&quot; title=&quot;组件递归&quot;&gt;&lt;/a&gt;组件递归&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;组件递归时，出现下次标签不渲染。问题处理：&lt;ul&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt; 为组件增加nam</summary>
      
    
    
    
    <category term="前端" scheme="https://blog.lovelee.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="Vue" scheme="https://blog.lovelee.cn/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>webpack使用小计</title>
    <link href="https://blog.lovelee.cn/2022/09/18/webpack/"/>
    <id>https://blog.lovelee.cn/2022/09/18/webpack/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="webpack使用小计"><a href="#webpack使用小计" class="headerlink" title="webpack使用小计"></a>webpack使用小计</h1><h2 id="初始化-安装"><a href="#初始化-安装" class="headerlink" title="初始化-安装"></a>初始化-安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">npm init -y </span><br><span class="line"></span><br><span class="line">npm install webpack webpack-dev-server webpack-cli --save-dev</span><br><span class="line"></span><br><span class="line">三者缺一不可。开发到打包必备</span><br><span class="line"></span><br><span class="line">或者使用yarn  (这里npm 安装包不太推荐用yarn 因为好多资源 yarn 安装会出错。避免不必要的麻烦就直接 npm )</span><br><span class="line"></span><br><span class="line">yarn add webpack webpack-cli webpack-dev-server --dev</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>npx webpack 这里的npx</p></blockquote><blockquote><p>Node 自带 npm 模块，所以可以直接使用 npx 命令。万一不能用，就要手动安装一下。 npm install -g npx </p></blockquote><blockquote><p>npx 将资源下载到一个临时目录，使用以后再删除</p></blockquote><blockquote><p><code>如果步骤不对，重新再来。中途重来会导致一系列问题</code></p></blockquote><h2 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h2><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. css生成单独文件  / 已有更新的方法替代</span><br><span class="line">npm install extract-text-webpack-plugin --save-dev </span><br><span class="line">const ExtractTextPlugin = require(&#x27;extract-text-webpack-plugin&#x27;); //css生成单独文件</span><br><span class="line"></span><br><span class="line">2. 推荐使用的webpack css 处理模块</span><br><span class="line">npm install --save-dev mini-css-extract-plugin </span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line">// 构建优化插件</span><br><span class="line">//optimization与entry/plugins同级</span><br><span class="line">optimization: &#123; //合并压缩</span><br><span class="line">minimize: true,</span><br><span class="line">minimizer: [new TerserJSPlugin(&#123;&#125;), new OptimizeCSSAssetsPlugin(&#123;&#125;)],</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">optimization: &#123;</span><br><span class="line">minimize: true,</span><br><span class="line">minimizer: [new TerserJSPlugin(&#123;&#125;), new OptimizeCSSAssetsPlugin(&#123;&#125;)],</span><br><span class="line">splitChunks: &#123;</span><br><span class="line">cacheGroups: &#123; // 多个css 提取到一个styles.css文件中</span><br><span class="line">styles: &#123;</span><br><span class="line">name: &#x27;styles&#x27;,</span><br><span class="line">test: /\.css$/,</span><br><span class="line">chunks: &#x27;all&#x27;,</span><br><span class="line">enforce: true,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">new HtmlWebpackPlugin(&#123; //html</span><br><span class="line">template: &#x27;./src/index.html&#x27;,</span><br><span class="line">&#125;),</span><br><span class="line">new MiniCssExtractPlugin(&#123;</span><br><span class="line">filename: &#x27;[name].css&#x27;,</span><br><span class="line">chunkFilename: &#x27;[id].css&#x27;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">------------</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="正常配置"><a href="#正常配置" class="headerlink" title="正常配置"></a>正常配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">entry:&#x27;./src/index.js&#x27;,</span><br><span class="line">output: &#123;</span><br><span class="line">filename: &#x27;main.js&#x27;, //单个文件名字</span><br><span class="line">path: __dirname + &#x27;/dist&#x27;//另一种配置出口地址方法</span><br><span class="line">&#125;,</span><br><span class="line">-----另一种配置-----</span><br><span class="line">entry: &#123; </span><br><span class="line">index: &#x27;./src/index.js&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">output: &#123;</span><br><span class="line">filename: &#x27;[name].js&#x27;,</span><br><span class="line">path: path.resolve(__dirname, &#x27;dist&#x27;)</span><br><span class="line">&#125;,</span><br><span class="line">module: &#123;</span><br><span class="line">rules: [</span><br><span class="line">&#123;</span><br><span class="line">test: /\.less$/,</span><br><span class="line">// use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;, &#x27;less-loader&#x27;]</span><br><span class="line">use: [&#123;</span><br><span class="line">loader: MiniCssExtractPlugin.loader,</span><br><span class="line">options: &#123;</span><br><span class="line">esModule: true,</span><br><span class="line">&#125;</span><br><span class="line">&#125;, &#x27;css-loader&#x27;, &#x27;less-loader&#x27;]</span><br><span class="line">&#125;,</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">devServer: &#123;</span><br><span class="line">port: 8099,</span><br><span class="line">// 实现支持Broswer路由</span><br><span class="line">historyApiFallback: true,</span><br><span class="line">hot: true,</span><br><span class="line">// contentBase: &#x27;dist&#x27;,</span><br><span class="line">host: &#x27;localhost&#x27;,</span><br><span class="line">compress: true,</span><br><span class="line">open: true</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h2><h3 id="坑1"><a href="#坑1" class="headerlink" title="坑1"></a>坑1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Error: Chunk.entrypoints: Use Chunks.groupsIterable and filter by instanceof Entrypoint instead解决</span><br><span class="line"></span><br><span class="line">webpack4.0以上用3.x extract-webpack-plugin 打包会不兼容，extract-webpack-plugin升级就可以了</span><br><span class="line"></span><br><span class="line">npm install --save-dev extract-text-webpack-plugin@4.0.0-beta.0</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="坑2"><a href="#坑2" class="headerlink" title="坑2"></a>坑2</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Error: Cannot find module &#x27;@babel</span><br><span class="line"></span><br><span class="line">问题产生的原因</span><br><span class="line">babel-loader和babel-core版本不对应所产生的，</span><br><span class="line"></span><br><span class="line">babel-loader 8.x对应babel-core 7.x</span><br><span class="line">babel-loader 7.x对应babel-core 6.x</span><br><span class="line"></span><br><span class="line">如何解决</span><br><span class="line">1、 卸载旧的babel-core</span><br><span class="line">npm un babel-core</span><br><span class="line">2、 安装新的babel-core</span><br><span class="line">npm i -D @babel/core</span><br><span class="line">3、 卸载旧的babel-preset</span><br><span class="line">npm un babel-preset-env</span><br><span class="line">npm un babel-preset-stage-0</span><br><span class="line">4、 安装新的babel-preset</span><br><span class="line">npm i @babel/preset-react</span><br><span class="line">npm i @babel/preset-env</span><br><span class="line">npm i babel-preset-mobx</span><br><span class="line">5、 卸载旧的babel-plugin</span><br><span class="line">npm un babel-plugin-transform-runtime</span><br><span class="line">6、 安装新的babel-plugin</span><br><span class="line">npm install --save-dev @babel/plugin-proposal-object-rest-spread</span><br><span class="line">npm install --save-dev @babel/plugin-transform-runtime</span><br><span class="line">npm install --save @babel/runtime</span><br><span class="line">7、 修改.babelrc文件</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;: [&quot;@babel/preset-env&quot;, &quot;@babel/preset-react&quot;, &quot;mobx&quot;],</span><br><span class="line">    &quot;plugins&quot;: [</span><br><span class="line">        &quot;@babel/plugin-proposal-object-rest-spread&quot;,</span><br><span class="line">        &quot;@babel/plugin-transform-runtime&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="完整的-webpack-config-js-自用"><a href="#完整的-webpack-config-js-自用" class="headerlink" title="完整的 webpack.config.js - 自用"></a>完整的 <code>webpack.config.js</code> - 自用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;);</span><br><span class="line">// 导入非 webpack 自带默认插件</span><br><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;); // html</span><br><span class="line">const MiniCssExtractPlugin = require(&#x27;mini-css-extract-plugin&#x27;); //css 处理</span><br><span class="line">const TerserJSPlugin = require(&#x27;terser-webpack-plugin&#x27;); // js压缩</span><br><span class="line">const OptimizeCSSAssetsPlugin = require(&#x27;optimize-css-assets-webpack-plugin&#x27;); //css压缩</span><br><span class="line"></span><br><span class="line">let env = process.env.NODE_ENV == &quot;development&quot; ? &quot;development&quot; : &quot;production&quot;;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">mode: &#x27;development&#x27;, // development  production</span><br><span class="line">entry: &#123;</span><br><span class="line">index: &#x27;./src/index.js&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">output: &#123;</span><br><span class="line">filename: &#x27;[name].js&#x27;,</span><br><span class="line">path: path.resolve(__dirname, &#x27;dist&#x27;)</span><br><span class="line">&#125;,</span><br><span class="line">optimization: &#123; </span><br><span class="line">minimize: true,</span><br><span class="line">minimizer: [new TerserJSPlugin(&#123;&#125;), new OptimizeCSSAssetsPlugin(&#123;&#125;)],</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line">new HtmlWebpackPlugin(&#123; //html</span><br><span class="line">template: &#x27;./src/index.html&#x27;,</span><br><span class="line">&#125;),</span><br><span class="line">new MiniCssExtractPlugin(&#123;</span><br><span class="line">filename: &#x27;[name].css&#x27;,</span><br><span class="line">chunkFilename: &#x27;[id].css&#x27;,</span><br><span class="line">&#125;)</span><br><span class="line">],</span><br><span class="line">module: &#123;</span><br><span class="line">rules: [&#123;</span><br><span class="line">test: /\.(js|jsx)$/,</span><br><span class="line">use: [&quot;babel-loader&quot;],</span><br><span class="line">exclude: /node_modules/</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: /\.css$/i,</span><br><span class="line">use: [&#123;</span><br><span class="line">loader: MiniCssExtractPlugin.loader,</span><br><span class="line">options: &#123;</span><br><span class="line">esModule: true,</span><br><span class="line">&#125;</span><br><span class="line">&#125;, &#x27;css-loader&#x27;]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: /\.ts$/,</span><br><span class="line">use: &#x27;ts-loader&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: /\.less$/,</span><br><span class="line">use: [&#123;</span><br><span class="line">loader: MiniCssExtractPlugin.loader,</span><br><span class="line">options: &#123;</span><br><span class="line">esModule: true,</span><br><span class="line">&#125;</span><br><span class="line">&#125;, &#x27;css-loader&#x27;, &#x27;less-loader&#x27;]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: /\.(sa|sc)ss$/,</span><br><span class="line">use: [&#123;</span><br><span class="line">loader: MiniCssExtractPlugin.loader,</span><br><span class="line">options: &#123;</span><br><span class="line">esModule: true,</span><br><span class="line">hmr: process.env.NODE_ENV === &#x27;development&#x27;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#x27;css-loader&#x27;,</span><br><span class="line">&#x27;sass-loader&#x27;,</span><br><span class="line">],</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: /.(jpg|png|gif)$/,</span><br><span class="line">use: &#x27;url-loader?limit=8000&#x27;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">devServer: &#123;</span><br><span class="line">port: 8099,</span><br><span class="line">historyApiFallback: true,</span><br><span class="line">hot: true,</span><br><span class="line">host: &#x27;localhost&#x27;,</span><br><span class="line">compress: true,</span><br><span class="line">open: true</span><br><span class="line">&#125;,</span><br><span class="line">devtool: &#x27;cheap-module-eval-source-map&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;webpack使用小计&quot;&gt;&lt;a href=&quot;#webpack使用小计&quot; class=&quot;headerlink&quot; title=&quot;webpack使用小计&quot;&gt;&lt;/a&gt;webpack使用小计&lt;/h1&gt;&lt;h2 id=&quot;初始化-安装&quot;&gt;&lt;a href=&quot;#初始化-安装&quot; cla</summary>
      
    
    
    
    <category term="前端" scheme="https://blog.lovelee.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="webpack" scheme="https://blog.lovelee.cn/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>微信公众号菜单网页开发</title>
    <link href="https://blog.lovelee.cn/2022/09/18/%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/"/>
    <id>https://blog.lovelee.cn/2022/09/18/%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="微信公众号开发"><a href="#微信公众号开发" class="headerlink" title="微信公众号开发"></a>微信公众号开发</h1><h2 id="基础操作"><a href="#基础操作" class="headerlink" title="基础操作"></a>基础操作</h2><blockquote><p> <a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html">官方文档</a></p></blockquote><blockquote><p><a href="https://blog.csdn.net/u013675978/article/details/109993861">小程序内嵌公众号授权思路</a></p></blockquote><h3 id="【公众号微信平台】"><a href="#【公众号微信平台】" class="headerlink" title="【公众号微信平台】"></a>【公众号微信平台】</h3><ul><li>平台中配置需要用到的入口</li></ul><p><img src="https://docimg5.docs.qq.com/image/NwB4yh7GnxFbBLt91GbXpw.png?w=1280&h=555.5115511551155"></p><ul><li>IP白名单设置</li></ul><p><img src="https://docimg10.docs.qq.com/image/BsQi5Q8FYeiUDFyqQqRPuA.png?w=679&h=583"></p><ul><li>用户网页授权同意授权公众号域名设置 与 回调页面 域名相同，下载文件放置根目录 （网站需要进行备案、且不能为ip地址）获取code</li></ul><p><img src="https://docimg7.docs.qq.com/image/OrsDAxzDfNdPUAIF2numeA.png?w=586&h=456"></p><ul><li>公众号菜单里挂出的web链接要使用域名并配有安全证书，不然会出现跳转提示</li></ul><p><img src="https://docimg5.docs.qq.com/image/0n6K1CkH1JHoCUxCw-TttA.png?w=297&h=640" alt="提示"></p><h3 id="【开发程序前端】"><a href="#【开发程序前端】" class="headerlink" title="【开发程序前端】"></a>【开发程序前端】</h3><ul><li>与授权页回调域名进行配合，在重定向后获取到url中的code</li></ul><p><img src="https://docimg5.docs.qq.com/image/YKQ6fzWX8cjIQn-VAm20jQ.png?w=1280&h=671.3353115727002"></p><ul><li>配置公众号菜单链接</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">https://open.weixin.qq.com/connect/oauth2/authorize?appid=appid&amp;redirect_uri=url&amp;response_type=code&amp;scope=snsapi_base&amp;state=1#wechat_redirect</span><br><span class="line"></span><br><span class="line">字段替换：</span><br><span class="line"></span><br><span class="line">appid =&gt; 真实的公众号appid</span><br><span class="line"></span><br><span class="line">redirect_uri =&gt; 注意：此字段一定要进行转码(规则见下附录1)，不可直接使用完整url ，会提示 &quot;redirect_uri域名与后台配置不一致,错误码:10003&quot; </span><br><span class="line"></span><br><span class="line">scope =&gt; 1. snsapi_base  2. snsapi_userinfo</span><br><span class="line"></span><br><span class="line">其他字段为固定值</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="【开发程序后台】"><a href="#【开发程序后台】" class="headerlink" title="【开发程序后台】"></a>【开发程序后台】</h3><ul><li>通过code拿到access_token获取到openid 或者进一步拿到userinfo （详见文档）（公众号网页access_token获取无次数上限，不同于sdk中的基础access_token获取）</li></ul><p><img src="https://docimg10.docs.qq.com/image/YN0ACmB3zNAJ49_rQpDt_g.png?w=1280&h=323.44086021505376"></p><p><img src="https://docimg5.docs.qq.com/image/hVIYcxJqOH-r1mBZOumx4Q.png?w=1172&h=432"></p><p><img src="https://docimg8.docs.qq.com/image/ro_nLFLYJqQRsOJfTYnVzA.png?w=940&h=161"></p><hr><blockquote><p>附录1:(10003错误提示处理)</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">公众号菜单里重定向地址需要替换特殊字符，否则会出现10003错误提示</span><br><span class="line"></span><br><span class="line">url.replace(/\//g,&#x27;%2f&#x27;).replace(/\?/g,&#x27;%3f&#x27;).replace(/\=/g,&#x27;%3d&#x27;).replace(/\:/g,&#x27;%3a&#x27;)</span><br><span class="line"></span><br><span class="line">re_url.replace(/%2f/g,&#x27;/&#x27;).replace(/%3f/g,&#x27;?&#x27;).replace(/%3d/g,&#x27;=&#x27;).replace(/%3a/g,&#x27;:&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>错误提示：</p></blockquote><p><img src="https://docimg2.docs.qq.com/image/FvD-Io7mzRm4Au9rUjij2A.png?w=349&h=212"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;微信公众号开发&quot;&gt;&lt;a href=&quot;#微信公众号开发&quot; class=&quot;headerlink&quot; title=&quot;微信公众号开发&quot;&gt;&lt;/a&gt;微信公众号开发&lt;/h1&gt;&lt;h2 id=&quot;基础操作&quot;&gt;&lt;a href=&quot;#基础操作&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="微信公众号" scheme="https://blog.lovelee.cn/categories/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/"/>
    
    
    <category term="微信公众号" scheme="https://blog.lovelee.cn/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/"/>
    
  </entry>
  
  <entry>
    <title>扫码打开/跳转到微信小程序</title>
    <link href="https://blog.lovelee.cn/2022/09/18/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%93%E5%BC%80%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    <id>https://blog.lovelee.cn/2022/09/18/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%93%E5%BC%80%E5%B0%8F%E7%A8%8B%E5%BA%8F/</id>
    <published>2022-09-18T04:54:00.448Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="公众号页面-小程序扫码打开H5-微信内部打开小程序"><a href="#公众号页面-小程序扫码打开H5-微信内部打开小程序" class="headerlink" title="公众号页面 / 小程序扫码打开H5 微信内部打开小程序"></a>公众号页面 / 小程序扫码打开H5 微信内部打开小程序</h1><h2 id="使用说明及注意事项-amp-问题解决"><a href="#使用说明及注意事项-amp-问题解决" class="headerlink" title="使用说明及注意事项&amp;问题解决"></a>使用说明及注意事项&amp;问题解决</h2><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><p>使用官方签名比对网址，本地debug签名是否与官方一致或正确 <a href="https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=jsapisign">官方测试网址</a></p><p><img src="https://docimg8.docs.qq.com/image/sTycY4i1ypKKNEWlAkhkcA?w=817&h=845" alt="效果图"></p><h2 id="开发步骤-参考地址"><a href="#开发步骤-参考地址" class="headerlink" title="开发步骤 参考地址"></a>开发步骤 <a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_Open_Tag.html#%E5%BC%80%E6%94%BE%E6%A0%87%E7%AD%BE%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3">参考地址</a></h2><h3 id="1-准备已认证的服务号"><a href="#1-准备已认证的服务号" class="headerlink" title="1.准备已认证的服务号"></a>1.准备已认证的服务号</h3><h3 id="2-使用开放标签"><a href="#2-使用开放标签" class="headerlink" title="2. 使用开放标签"></a>2. 使用开放标签</h3><p><img src="https://docimg8.docs.qq.com/image/VVRK7ntS9nCbFdQZdoqmOg?w=963&h=259"></p><h3 id="代码开发"><a href="#代码开发" class="headerlink" title="代码开发"></a>代码开发</h3><p><img src="https://docimg2.docs.qq.com/image/mMHaYhPmKh52SphLo1Z6Tw?w=1616&h=726"></p><h4 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;full&quot;&gt;</span><br><span class="line">       &lt;wx-open-launch-weapp id=&quot;launch-btn&quot; username=&quot;gh_b44e6672d709&quot; path=&quot;/pages/dav/dav?from=wx&quot;</span><br><span class="line">           style=&quot;float: left;width: 100%;height: 100%;text-align: center;display: flex;justify-content: center;&quot;&gt;</span><br><span class="line">           &lt;template&gt; &lt;!--插槽需要加，不然内容空白--&gt;</span><br><span class="line">               &lt;div style=&quot;width: 100%;margin: 0px auto;float: left;&quot;&gt;</span><br><span class="line">                   &lt;div style=&quot;width: 100%;float: left;text-align: center;&quot;&gt;</span><br><span class="line">                       &lt;img src=&quot;http://static.xmgj.cn/images/logo/jyzs_120_120.png&quot;</span><br><span class="line">                           style=&quot;width: 80px;height: auto;margin: 160px auto 0px auto;&quot;&gt;</span><br><span class="line">                   &lt;/div&gt;</span><br><span class="line">                   &lt;p</span><br><span class="line">                       style=&quot;width: 100%;float: left;line-height: 30px;text-align: center;margin: 10px 0px 20px 0px;padding: 0px 15px;box-sizing: border-box;color: #666666;font-size: 15px;float: left;&quot;&gt;</span><br><span class="line">                       请点击下方按钮跳转到微信小程序&lt;/p&gt;</span><br><span class="line">                   &lt;div</span><br><span class="line">                       style=&quot; width: 100%;height: 50px;line-height: 50px;font-weight: 300;float: left;text-align: center;&quot;&gt;</span><br><span class="line">                       &lt;div</span><br><span class="line">                           style=&quot;display: block;width: 200px;height: 45px;line-height: 45px;font-weight: 300;font-size: 15px;background-color: #f4f4f4;color: #929f9b;margin: 0px auto;position: relative;border-radius: 45px;border: none;&quot;&gt;</span><br><span class="line">                           点击前往微信小程序</span><br><span class="line">                       &lt;/div&gt;</span><br><span class="line">                   &lt;/div&gt;</span><br><span class="line">               &lt;/div&gt;</span><br><span class="line">           &lt;/template&gt;</span><br><span class="line">       &lt;/wx-open-launch-weapp&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">   &lt;script src=&quot;https://res.wx.qq.com/open/js/jweixin-1.6.0.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">   &lt;script src=&quot;https://gs.yuntech.cc/oa/js/jquery-1.8.3.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="脚本部分"><a href="#脚本部分" class="headerlink" title="脚本部分"></a>脚本部分</h5><ul><li>其中涉及到几个必填选项<ul><li>appId  当前页面所属的公众号 (是否认证 、 是否设置js sdk 安全调用域名 等设置)</li><li>signature 签名 （需要使用sh1方法）</li><li>timestamp 签名时间戳 （10位）</li><li>其他选项按照示例固定即可</li></ul></li></ul><p><img src="https://docimg6.docs.qq.com/image/lXD-yHGHPyef2qa9V9pQow?w=987&h=848"></p><ul><li>签名算法 <a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html#62">参考地址</a></li></ul><p><img src="https://docimg7.docs.qq.com/image/kN-gJ_F-vQ_cFSQ9lcbyDA?w=1056&h=1322"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">wx.config(&#123;</span><br><span class="line">                 debug: true,</span><br><span class="line">                 appId: &#x27;wx9ba622522608be72&#x27;, // 必填，公众号的唯一标识</span><br><span class="line">                 timestamp, // 必填，生成签名的时间戳</span><br><span class="line">                 nonceStr, // 必填，生成签名的随机串</span><br><span class="line">                 signature:signature1, // 必填，签名</span><br><span class="line">                 jsApiList: [&quot;chooseImage&quot;], //必须要不调用小程序标签渲染不出来</span><br><span class="line">                 openTagList: [&#x27;wx-open-launch-weapp&#x27;] //必须必须要不调用小程序标签渲染不出来</span><br><span class="line">             &#125;);</span><br><span class="line">         wx.ready(function () &#123;</span><br><span class="line">             console.log(&#x27;wx-ready&#x27;)</span><br><span class="line"></span><br><span class="line">         &#125;);</span><br><span class="line"></span><br><span class="line">         wx.error(function (res) &#123;</span><br><span class="line">             // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中</span><br><span class="line">             console.log(&quot;res-err&quot;, res);</span><br><span class="line">             alert(JSON.stringify(res)+&#x27;--------------&#x27;)</span><br><span class="line">         &#125;);</span><br><span class="line"></span><br><span class="line">         var btn = document.getElementById(&#x27;launch-btn&#x27;);</span><br><span class="line">         btn.addEventListener(&#x27;launch&#x27;, function (e) &#123;</span><br><span class="line">             console.log(&#x27;success&#x27;);</span><br><span class="line">         &#125;);</span><br><span class="line">         btn.addEventListener(&#x27;error&#x27;, function (e) &#123;</span><br><span class="line">             console.log(&#x27;fail&#x27;, e.detail);</span><br><span class="line">         &#125;);</span><br></pre></td></tr></table></figure><h2 id="最终结果"><a href="#最终结果" class="headerlink" title="最终结果"></a>最终结果</h2><p><img src="https://docimg9.docs.qq.com/image/JWQCyGhngPOaRU0A9DbIAw?w=1818&h=698"></p><h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><p>如果开发自测没有问题；则可能是白名单或者域名js sdk 无调用权限；详见 官方步骤第一步。（人家说的很清楚~~）</p><p>例如：你的域名：<a href="http://kdjfkd.natappfree.cc/a/login">http://kdjfkd.natappfree.cc/a/login</a>  那么你的安全域名应该配置为：natappfree.cc  坑吧，不要http,也不要二级域名。</p><p>用于签名的url 必须是全部的域名：<a href="http://kdjfkd.natappfree.cc/a/login">http://kdjfkd.natappfree.cc/a/login</a></p><p><img src="https://docimg3.docs.qq.com/image/tVD3bHOdZfKJfzet7M6MLw?w=712&h=725" alt="效果图"></p><div class="note blue no-icon flat"><p>补充</p></div><h1 id="小程序开发记录"><a href="#小程序开发记录" class="headerlink" title="小程序开发记录"></a>小程序开发记录</h1><h2 id="打开小程序"><a href="#打开小程序" class="headerlink" title="打开小程序"></a>打开小程序</h2><p><a href="https://gs.yuntech.cc/oa/jump-wx.html">最终结果</a></p><p><a href="https://gs.yuntech.cc/oa/jump-wx.html">https://gs.yuntech.cc/oa/jump-wx.html</a></p><p><a href="https://gs.yuntech.cc/oa/open-wx.html">https://gs.yuntech.cc/oa/open-wx.html</a></p><h3 id="外链打开小程序-参考文档"><a href="#外链打开小程序-参考文档" class="headerlink" title="外链打开小程序  参考文档"></a>外链打开小程序  <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/url-scheme.html">参考文档</a></h3><ul><li>使用web页面，浏览器跳转微信app短码的方式识别 </li></ul><p><img src="https://docimg8.docs.qq.com/image/X4ZVj5S-OaG01SUJQK2mhA?w=976&h=856"></p><ul><li>片段生成位置 - 小程序平台菜单</li></ul><p><img src="https://docimg8.docs.qq.com/image/L6wI72UBcN0Xk4Wr2RnIHg?w=405&h=168"></p><blockquote><p>需要注意的是，外链严格区别于微信内扫码 / 分享 / 点击链接，所以内部打开使用以下方案</p></blockquote><ul><li>部分源码 - 使用片段 weixin://dl/business/?t=FqTEVoBawKp</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a id=&quot;dianjiimg_links&quot; href=&quot;weixin://dl/business/?t=FqTEVoBawKp&quot;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if(weixin)&#123;</span><br><span class="line">    window.location.href = &quot;https://gs.yuntech.cc/oa/open-wx.html&quot;;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    window.location.href = &quot;weixin://dl/business/?t=FqTEVoBawKp&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>QQ 内聊天分享短码，会识别程序图标 可以使用 下面标签</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;refresh&quot; content=&quot;0;url=weixin://dl/business/?t=FqTEVoBawKp&quot;&gt;</span><br><span class="line">&lt;meta name=&quot;description&quot; content=&quot;打开建云助手&quot; /&gt;</span><br><span class="line">&lt;meta itemprop=&quot;name&quot; content=&quot;打开建云助手&quot; /&gt;</span><br><span class="line">&lt;meta itemprop=&quot;image&quot; content=&quot;http://static.xmgj.cn/images/logo/jyzs_120_120.png&quot; /&gt;</span><br></pre></td></tr></table></figure><blockquote><p>效果如下</p></blockquote><p><img src="https://docimg2.docs.qq.com/image/UmtKAxvaLpDH_8TEZZ3igg?w=1080&h=359"></p><h3 id="微信内部打开小程序"><a href="#微信内部打开小程序" class="headerlink" title="微信内部打开小程序"></a>微信内部打开小程序</h3><blockquote><p>可以与外链打开小程序使用同一个地址，但是地址内部会进行跳转判断。无缝跳转。详细方案见公众号文档</p></blockquote><h2 id="小程序代码开发"><a href="#小程序代码开发" class="headerlink" title="小程序代码开发"></a>小程序代码开发</h2><blockquote><p>components + node_modules 目录下的组件是全局资源， 如果使用分包， 则需要把具体资源剪切到分包中， 用来节省主包（初始包）体积。提高响应速度</p></blockquote><h2 id="公众号组件"><a href="#公众号组件" class="headerlink" title="公众号组件"></a>公众号组件</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">official-account</span>&gt;</span><span class="tag">&lt;/<span class="name">official-account</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/official-account.html">官方地址</a></p><blockquote><p>需要判断是否关注 –过– 公众号</p></blockquote><h2 id="UnionID-机制说明"><a href="#UnionID-机制说明" class="headerlink" title="UnionID 机制说明"></a>UnionID 机制说明</h2><p>如果开发者拥有多个移动应用、网站应用、和公众帐号（包括小程序），可通过 UnionID 来区分用户的唯一性，因为只要是同一个微信开放平台帐号下的移动应用、网站应用和公众帐号（包括小程序），用户的 UnionID 是唯一的。换句话说，同一用户，对同一个微信开放平台下的不同应用，UnionID是相同的。</p><h3 id="UnionID获取途径"><a href="#UnionID获取途径" class="headerlink" title="UnionID获取途径"></a>UnionID获取途径</h3><p>绑定了开发者帐号的小程序，可以通过以下途径获取 UnionID。</p><ol><li>开发者可以直接通过 <a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html">wx.login</a> + <code>code2Session</code> 获取到该用户 UnionID，无须用户授权。</li><li>小程序端调用云函数时，可在云函数中通过 <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/utils/Cloud.getWXContext.html">Cloud.getWXContext</a> 获取 UnionID。</li></ol><h3 id="微信开放平台绑定小程序流程"><a href="#微信开放平台绑定小程序流程" class="headerlink" title="微信开放平台绑定小程序流程"></a>微信开放平台绑定小程序流程</h3><p>登录<a href="https://open.weixin.qq.com/">微信开放平台</a> — 管理中心 — 小程序 — 绑定小程序</p>]]></content>
    
    
    <summary type="html">微信小程序</summary>
    
    
    
    <category term="微信小程序" scheme="https://blog.lovelee.cn/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
    <category term="微信小程序" scheme="https://blog.lovelee.cn/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>ES-next使用说明</title>
    <link href="https://blog.lovelee.cn/2022/09/18/ES-next/"/>
    <id>https://blog.lovelee.cn/2022/09/18/ES-next/</id>
    <published>2022-09-18T04:54:00.444Z</published>
    <updated>2022-09-18T04:54:00.444Z</updated>
    
    <content type="html"><![CDATA[<p>这篇文章的出发点是为了帮助前端开发者串联 ES6前后的 JavaScript 知识，并且可以快速了解 JavaScript 语言的最新进展。</p><p>JavaScript 在当下处于特权地位，因为它是唯一可以在浏览器中运行的语言，并且是被高度集成和优化过的。</p><p>JavaScript 在未来有着极好的发展空间，跟上它的变化不会比现在更加的困难。我的目标是让你能够快速且全面的了解这门语言可以使用的新内容。</p><h4 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h4><h5 id="ECMAScript-简介"><a href="#ECMAScript-简介" class="headerlink" title="ECMAScript 简介"></a>ECMAScript 简介</h5><h5 id="ES2015"><a href="#ES2015" class="headerlink" title="ES2015"></a>ES2015</h5><ul><li>let 和 const</li><li>箭头函数</li><li>类</li><li>默认参数</li><li>模板字符串</li><li>解构赋值</li><li>增强的对象字面量</li><li>For-of 循环</li><li>Promises</li><li>模块</li><li>String 新方法</li><li>Object 新方法</li><li>展开运算符</li><li>Set</li><li>Map</li><li>Generators</li></ul><h5 id="ES2016"><a href="#ES2016" class="headerlink" title="ES2016"></a>ES2016</h5><ul><li>Array.prototype.includes()</li><li>求幂运算符</li></ul><h5 id="ES2017"><a href="#ES2017" class="headerlink" title="ES2017"></a>ES2017</h5><ul><li>字符串填充</li><li>Object.values()</li><li>Object.entries()</li><li>Object.getOwnPropertyDescriptors()</li><li>尾逗号</li><li>共享内存 and 原子操作</li></ul><h5 id="ES2018"><a href="#ES2018" class="headerlink" title="ES2018"></a>ES2018</h5><ul><li>Rest/Spread Properties</li><li>Asynchronous iteration</li><li>Promise.prototype.finally()</li><li>正则表达式改进</li></ul><h5 id="ESNext"><a href="#ESNext" class="headerlink" title="ESNext"></a>ESNext</h5><ul><li>Array.prototype.{flat,flatMap}</li><li>try/catch 可选的参数绑定</li><li>Object.fromEntries()</li><li>String.prototype.{trimStart,trimEnd}</li><li>Symbol.prototype.description</li><li>JSON improvements</li><li>Well-formed JSON.stringify()</li><li>Function.prototype.toString()</li></ul><h4 id="ECMAScript-简介-1"><a href="#ECMAScript-简介-1" class="headerlink" title="ECMAScript 简介"></a>ECMAScript 简介</h4><p>每当阅读 JavaScript 相关的文章时，我都会经常遇到如下术语： ES3, ES5, ES6, ES7, ES8, ES2015, ES2016, ES2017, ECMAScript 2017, ECMAScript 2016, ECMAScript 2015 等等，那么它们是指代的是什么？</p><p>它们都是指代一个名为 ECMAScript 的标准。</p><p>JavaScript 就是基于这个标准实现的，ECMAScript 经常缩写为 ES。</p><p>除了 JavaScript 以外，其它基于 ECMAScript 实现语言包括：</p><ul><li>ActionScript ( Flash 脚本语言)，由于 Adobe 将于 2020 年末停止对 Flash 的支持而逐渐失去热度。</li><li>JScript (微软开发的脚本语言),在第一次浏览器大战最激烈的时期，JavaScript 只被Netscape所支持，微软必须为 Internet Explorer 构建自己的脚本语言。</li></ul><p>但是现在流传最广、影响最大的基于 ES 标准的语言实现无疑就是 JavaScript了</p><p>为啥要用这个奇怪的名字呢？Ecma International 是瑞士标准协会，负责制定国际标准。</p><p>JavaScript 被创建以后，经由 Netscape 和 Sun Microsystems 公司提交给欧洲计算机制造商协会进行标准化，被采纳的 ECMA-262 别名叫 ECMAScript。</p><blockquote><p>This press release by Netscape and Sun Microsystems (the maker of Java) might help figure out the name choice, which might include legal and branding issues by Microsoft which was in the committee, according to Wikipedia.</p></blockquote><p>IE9 之后微软的浏览器中就看不到对 JScript 这个命名的引用了，取而代之都统称为 JavaScript。</p><p>因此，截至201x，JavaScript 成为最流行的基于 ECMAScript 规范实现的语言。</p><h5 id="ECMAScript-当前的版本。"><a href="#ECMAScript-当前的版本。" class="headerlink" title="ECMAScript 当前的版本。"></a>ECMAScript 当前的版本。</h5><p>目前的最新的 ECMAScript 版本是 ES2018。</p><p>于 2018 年 6 月发布。</p><h5 id="TC39-是什么？"><a href="#TC39-是什么？" class="headerlink" title="TC39 是什么？"></a>TC39 是什么？</h5><p>TC39（Technical Committee 39）是一个推动 JavaScript 发展的委员会。</p><p>TC39的成员包括各个主流浏览器厂商以及业务与浏览器紧密相连的公司，其中包括 Mozilla，Google ，Facebook，Apple，Microsoft，Intel，PayPal，SalesForce等。</p><p>每个标准版本提案都必须经过四个不同的阶段，这里有详细的解释。</p><h5 id="ES-Versions"><a href="#ES-Versions" class="headerlink" title="ES Versions"></a>ES Versions</h5><p>令我费解的是 ES 版本的命名依据有时根据迭代的版本号，有时却根据年份来进行命名。而这个命名的不确定性又使得人们更加容易混淆 JS/ES 这个两个概念😄。</p><p>在 ES2015 之前，ECMAScript 各个版本的命名规范通常与跟着标准的版本更新保持一致。因此，2009年 ECMAScript 规范更新以后的的正式版本是 ES5。</p><blockquote><p>Why does this happen? During the process that led to ES2015, the name was changed from ES6 to ES2015, but since this was done late, people still referenced it as ES6, and the community has not left the edition naming behind — the world is still calling ES releases by edition number.</p></blockquote><p>为什么会发生这一切？在ES2015诞生的过程中，名称由ES6更改为ES2015，但由于最终完成太晚，人们仍然称其为ES6，社区也没有将版本号完全抛之于后 — 世界仍然使用 ES 来定义版本号。</p><p>下图比较清晰的展示了版本号与年份的关联:</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/meG6Vo0Meviac0Jv4WVAlibeaSBib1Hh1Y019JXyUEnB5HXEdoX0pA7ibBnpNH5WNnYHqWoPcA84SZSicwkxV2poaeg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p><p>接下来，我们来深入了解 JavaScript 自 ES5 以来增加的特性。</p><h4 id="let和const"><a href="#let和const" class="headerlink" title="let和const"></a>let和const</h4><p>ES2015 之前, var 是唯一可以用来声明变量的语句。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var a = 0</span><br></pre></td></tr></table></figure><p>上面语句如果你遗漏了 var，那么你会把这个值（0）赋给一个未声明的变量，其中声明和未声明变量之间存在一些差异。</p><p>在现代浏览器开启严格模式时，给未声明的变量赋值会抛出 ReferenceError 异常，在较老的浏览器（或者禁用严格模式）的情况下，未声明的变量在执行赋值操作时会隐式的变为全局对象的属性。</p><p>当你声明一个变量却没有进行初始化，那么它的值直到你对它进行赋值操作之前都是 undefined 。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var a //typeof a === &#x27;undefined&#x27;</span><br></pre></td></tr></table></figure><p>你可以对一个变量进行多次重新声明，并覆盖它：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var a = 1</span><br><span class="line">var a = 2</span><br></pre></td></tr></table></figure><p>你也可以在一条声明语句中一次声明多个变量：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var a = 1, b = 2</span><br></pre></td></tr></table></figure><p>作用域是变量可访问的代码部分。</p><p>在函数之外用 var 声明的会分配给全局对象，这种变量可以在全局作用域中被访问到。而在函数内部声明的变量只能在函数局部作用域被访问到，这类似于函数参数。</p><p>在函数中定义的局部变量名如何跟全局变量重名，那么局部变量的优先级更高，在函数内无法访问到同名的全局变量。</p><p>需要注意的是，var 是没有块级作用域（标识符是一对花括号）的，但是 var 是有函数作用域的，所以在新创建的块级作用域或者是函数作用域里面声明变量会覆盖全局同名变量，因为 var 在这两种情况下没有创建新的作用域。</p><p>在函数内部，其中定义的任何变量在所有函数代码中都是可见的，因为JavaScript在执行代码之前实际上将所有变量都移到了顶层（被称为悬挂的东西）。 在函数的内部定义的变量在整个函数作用域中都是可见（可访问），即使变量是在函数体末尾被声明，但是仍然可以再函数体开头部分被引用，因为 JavaScript存在变量提升机制。为避免混淆，请在函数开头声明变量，养成良好的编码规范。</p><h4 id="Using-let"><a href="#Using-let" class="headerlink" title="Using let"></a>Using let</h4><p>let 是ES2015中引入的新功能，它本质上是具有块级作用域的 var 。它可以被当前作用域（函数以及块级作用域）以及子级作用域访问到。</p><p>现代 JavaScript 开发者在 let 和 var 的选择中可能会更倾向于前者。</p><blockquote><p>如果 let 看起来是一个很抽象的术语，当你阅读到 let color = ‘red’ 这一段，因为使用 let 定义了color 为红色，那么这一切就变的有意义了。</p></blockquote><p>在任何函数之外用 let 声明变量，和 var相反的是 它并不会创建全局变量。</p><h4 id="Using-const"><a href="#Using-const" class="headerlink" title="Using const"></a>Using const</h4><p>使用变量 var 或 let 声明的变量可以被重新赋值。 使用 const 声明的变量一经初始化，它的值就永远不能再改变，即不可重新被赋值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const a = &#x27;test&#x27;</span><br></pre></td></tr></table></figure><p>我们不能再为 a 进行赋值操作。然而，a 如果它是一个具有属性或者方法的对象，那么我们可以改变它的属性或者方法。</p><p>const 并不意味着具有不可变性，只是保证用 const 声明的变量的引用地址不被变更。</p><p>类似于 let，const 也具有块级作用域。</p><p>现代 JavaScript 开发者在遇到不会进行二次赋值的变量声明时，应该尽量使用 const。</p><h4 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h4><p>箭头函数的引入极大的改变了代码的书写风格和一些工作机制。</p><p>在我看来，箭头函数很受开发者欢迎，现在很少在比较新的代码库中看到 function 关键字了，虽然它并未被废弃。</p><p>箭头函数看起来会更加的简洁，因为它允许你使用更短的语法来书写函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const myFunction = function() &#123;</span><br><span class="line">  //...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>到</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const myFunction = () =&gt; &#123;</span><br><span class="line">  //...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果函数体中只包含一条语句，你甚至可以省略大括号并直接书写这条语句：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const myFunction = () =&gt; doSomething()</span><br></pre></td></tr></table></figure><p>参数在括号中传递：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const myFunction = (param1, param2) =&gt; doSomething(param1, param2)</span><br></pre></td></tr></table></figure><p>如果该函数只有一个参数，那么可以省略掉括号：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const myFunction = param =&gt; doSomething(param)</span><br></pre></td></tr></table></figure><p>由于这种简短的语法，使得我们可以更便捷的使用比较简短的函数</p><h4 id="隐式返回"><a href="#隐式返回" class="headerlink" title="隐式返回"></a>隐式返回</h4><p>箭头函数支持隐式返回：可以正常的 return 一个返回值但是可以不使用 return 关键字。</p><p>隐式返回只在函数体内只包含一条语句的情况下生效：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const myFunction = () =&gt; &#x27;test&#x27;</span><br><span class="line">myFunction() //&#x27;test&#x27;</span><br></pre></td></tr></table></figure><p>需要注意的一种情况，当返回一个对象时，记得将大括号括在括号中以避免产生歧义，误将其（大括号）解析为函数体的大括号。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const myFunction = () =&gt; (&#123; value: &#x27;test&#x27; &#125;)</span><br><span class="line">myFunction() //&#123;value: &#x27;test&#x27;&#125;</span><br></pre></td></tr></table></figure><h4 id="箭头函数中的-this"><a href="#箭头函数中的-this" class="headerlink" title="箭头函数中的 this"></a>箭头函数中的 this</h4><p>this 可能是一个很难掌握的概念，因为它会根据上下文而进行变化，并且会在不同的 JavaScript的模式（是否为严格模式）下表现出差异。</p><p>理解 this 这个概念对于箭头函数的使用很重要，因为与常规函数相比，箭头函数的表现非常不同。</p><p>对象的方法为常规函数时，方法中的this指向这个对象，因此可以这样做：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const car = &#123;</span><br><span class="line">  model: &#x27;Fiesta&#x27;,</span><br><span class="line">  manufacturer: &#x27;Ford&#x27;,</span><br><span class="line">  fullName: function() &#123;</span><br><span class="line">    return `$&#123;this.manufacturer&#125; $&#123;this.model&#125;`</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行 car.fullName() 会返回 “Ford Fiesta”。</p><p>如果上述方法使用是是箭头函数，由于箭头中的 this 的作用域继承自执行上下文，箭头函数自身不绑定 this，因此 this 的值将在调用堆栈中查找，因此在此代码 car.fullName() 中不会返回常规函数那样的结果，实际会返回字符串 “undefined undefined”：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const car = &#123;</span><br><span class="line">  model: &#x27;Fiesta&#x27;,</span><br><span class="line">  manufacturer: &#x27;Ford&#x27;,</span><br><span class="line">  fullName: () =&gt; &#123;</span><br><span class="line">    return `$&#123;this.manufacturer&#125; $&#123;this.model&#125;`</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因此，箭头函数不适合作为对象方法。</p><p>同样，箭头函数也不适合使用在作为创建构造函数，因为在实例化对象时会抛出 TypeError。</p><p>所以在不需要动态上下文时请使用常规函数。</p><p>当然，在事件监听器上使用箭头函数也会存在问题。因为 DOM 事件侦听器会自动将 this 与目标元素绑定，如果该事件处理程序的逻辑依赖 this，那么需要常规函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const link = document.querySelector(&#x27;#link&#x27;)</span><br><span class="line">link.addEventListener(&#x27;click&#x27;, () =&gt; &#123;</span><br><span class="line">  // this === window</span><br><span class="line">&#125;)</span><br><span class="line">const link = document.querySelector(&#x27;#link&#x27;)</span><br><span class="line">link.addEventListener(&#x27;click&#x27;, function() &#123;</span><br><span class="line">  // this === link</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="Classes类"><a href="#Classes类" class="headerlink" title="Classes类"></a>Classes类</h4><p>JavaScript 实现继承的方式比较罕见：原型继承。原型继承虽然在我看来很棒，但与其它大多数流行的编程语言的继承实现机制不同，后者是基于类的。</p><p>因此 Java、Python 或其它语言的开发者很难理解原型继承的方式，因此 ECMAScript 委员会决定在原型继承之上实现 class 的语法糖，这样便于让其它基于类实现继承的语言的开发者更好的理解 JavaScript 代码。</p><p>注意：class 并没有对 JavaScript 底层做修改，你仍然可以直接访问对象原型。</p><h5 id="class-定义"><a href="#class-定义" class="headerlink" title="class 定义"></a>class 定义</h5><p>如下是一个 class 的例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123;</span><br><span class="line">  constructor(name) &#123;</span><br><span class="line">    this.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  hello() &#123;</span><br><span class="line">    return &#x27;Hello, I am &#x27; + this.name + &#x27;.&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>class 具有一个标识符，我们可以使用 new ClassIdentifier() 来创建一个对象实例。</p><p>初始化对象时，调用 constructor方法，并将参数传递给此方法。</p><p>类声明语句中也可以增加类需要的一些原型方法。在这种情况下 hello 是 Person 类的一个原型方法，可以在这个类的对象实例上调用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const flavio = new Person(&#x27;Flavio&#x27;)</span><br><span class="line">flavio.hello()</span><br></pre></td></tr></table></figure><h4 id="Class-继承"><a href="#Class-继承" class="headerlink" title="Class 继承"></a>Class 继承</h4><p>一个子类可以 extend 另一个类，通过子类实例化出来的对象可以继承这两个类的所有方法。</p><p>如果子类中的方法与父类中的方法名重复，那么子类中的同名方法优先级更高：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Programmer extends Person &#123;</span><br><span class="line">  hello() &#123;</span><br><span class="line">    return super.hello() + &#x27; I am a programmer.&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const flavio = new Programmer(&#x27;Flavio&#x27;)</span><br><span class="line">flavio.hello()</span><br></pre></td></tr></table></figure><p>(上述代码会打印出：“Hello, I am Flavio. I am a programmer.”)</p><p>类没有显示的类变量声明，但你必须在初始化构造函数 constructor 中去初始化类成员变量。</p><p>在子类中，你可以通过调用super()引用父类。</p><h4 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h4><p>在类中，通常会把方法直接挂载到实例对象上，直接在实例对象上调用。</p><p>而静态方法则是直接使用类名来调用，而不是通过对象实例调用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123;</span><br><span class="line">  static genericHello() &#123;</span><br><span class="line">    return &#x27;Hello&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.genericHello() //Hello</span><br></pre></td></tr></table></figure><h4 id="私有方法"><a href="#私有方法" class="headerlink" title="私有方法"></a>私有方法</h4><p>JavaScript 没有内置真正意义上的受保护的私有方法。</p><p>社区有解决方法，但我不会在这里做讲解。</p><h5 id="Getters-和-setters"><a href="#Getters-和-setters" class="headerlink" title="Getters 和 setters"></a>Getters 和 setters</h5><p>你可以通过增加方法 前缀 get 或者 set 创建一个 getter 和 setter，getter 和 setter会在你去获取特定值或者修改特定值的时候执行 get 或者 set内的相关方法。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123;</span><br><span class="line">  constructor(name) &#123;</span><br><span class="line">    this._name = name</span><br><span class="line">  &#125;</span><br><span class="line">  set name(value) &#123;</span><br><span class="line">    this._name = value</span><br><span class="line">  &#125;</span><br><span class="line">  get name() &#123;</span><br><span class="line">    return this._name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果你只有 getter，该属性无法被设置，并且设置此属性的操作都会被忽略：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123;</span><br><span class="line">  constructor(name) &#123;</span><br><span class="line">    this._name = name</span><br><span class="line">  &#125;</span><br><span class="line">  get name() &#123;</span><br><span class="line">    return this._name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果你只有一个 setter，则可以更改该值，但不能从外部访问它：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123;</span><br><span class="line">  constructor(name) &#123;</span><br><span class="line">    this._name = name</span><br><span class="line">  &#125;</span><br><span class="line">  set name(value) &#123;</span><br><span class="line">    this._name = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h5><p>函数 doSomething 接收一个 param1 参数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const doSomething = (param1) =&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以给 param1 设定默认值，如果在调用函数时未传入参数，那么该参数自动设定未默认值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const doSomething = (param1 = &#x27;test&#x27;) =&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当然，这种机制同样适用于多个参数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const doSomething = (param1 = &#x27;test&#x27;, param2 = &#x27;test2&#x27;) =&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>假如你的函数是一个具有特定属性的对象该怎么处理？</p><p>曾几何时，如果我们必须要取一个对象的特定属性值，为了做兼容处理（对象格式不正确），你必须在函数中添加一些代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const colorize = (options) =&gt; &#123;</span><br><span class="line">  if (!options) &#123;</span><br><span class="line">    options = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  const color = (&#x27;color&#x27; in options) ? options.color : &#x27;yellow&#x27;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过解构，你可以给特定属性提供默认值，如此可以大大简化代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const colorize = (&#123; color = &#x27;yellow&#x27; &#125;) =&gt; &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果在调用 colorize 函数时没有传递任何对象，我们同样可以得到一个默认对象作为参数以供使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const spin = (&#123; color = &#x27;yellow&#x27; &#125; = &#123;&#125;) =&gt; &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h4><p>模板字符串不同于 ES5 以前的版本，你可以用新颖的方式使用字符串。</p><p>这个语法看起来非常简便，只需要使用一个反引号替换掉单引号或双引号：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const a_string = `something`</span><br></pre></td></tr></table></figure><p>这个用法是独一无二的，因为它提供了许多普通字符串所没有的功能，如下：</p><ul><li>它为定义多行字符串提供了一个很好的语法</li><li>它提供了一种在字符串中插入变量和表达式的简单方法</li><li>它允许您创建带有模板标签的DSL (DSL意味着领域特定语言，例如：就如同在 React 中使用 styled-components 定义你组件的 CSS 一样)</li></ul><p>下面让我们深入每个功能的细节。</p><h5 id="多行字符串"><a href="#多行字符串" class="headerlink" title="多行字符串"></a>多行字符串</h5><p>在 ES6 标准之前，创建跨越两行的字符串只能在一行的结尾使用 ‘\’ 字符：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const string =</span><br><span class="line">  &#x27;first part \</span><br><span class="line">second part&#x27;</span><br></pre></td></tr></table></figure><p>这样使得你创建的字符串虽然跨越了两汉，但是渲染时仍然表现成一行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">first part second part</span><br></pre></td></tr></table></figure><p>需要渲染为多行的话，需要在一行结尾添加 ‘\n’，比如这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const string =</span><br><span class="line">  &#x27;first line\n \</span><br><span class="line">second line&#x27;</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const string = &#x27;first line\n&#x27; + &#x27;second line&#x27;</span><br></pre></td></tr></table></figure><p>模板字符串使得定义多行字符串变得更加简便。</p><p>一个模板字符串由一个反引号开始，你只需要按下回车键来创建新的一行，不需要插入特殊符号，最终的渲染效果如下所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const string = `Hey</span><br><span class="line">this</span><br><span class="line">string</span><br><span class="line">is awesome!`</span><br></pre></td></tr></table></figure><p>需要特别留意空格在这里是有特殊意义的，如果这样做的话：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const string = `First</span><br><span class="line">                Second`</span><br></pre></td></tr></table></figure><p>那么它会创建出像下面的字符串：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">First</span><br><span class="line">                Second</span><br></pre></td></tr></table></figure><p>有一个简单的方法可以修复这个问题，只需要将第一行置为空，然后添加了右边的翻译好后调用一个 trim() 方法，就可以消除第一个字符前的所有空格：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const string = `</span><br><span class="line">First</span><br><span class="line">Second`.trim()</span><br></pre></td></tr></table></figure><h5 id="插值"><a href="#插值" class="headerlink" title="插值"></a>插值</h5><p>模板字符串提供了插入变量和表达式的便捷方法</p><p>你只需要使用 ${…} 语法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const var = &#x27;test&#x27;</span><br><span class="line">const string = `something $&#123;var&#125;` //something test</span><br></pre></td></tr></table></figure><p>在 ${} 里面你可以加入任何东西，甚至是表达式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const string = `something $&#123;1 + 2 + 3&#125;`</span><br><span class="line">const string2 = `something $&#123;foo() ? &#x27;x&#x27; : &#x27;y&#x27;&#125;`</span><br></pre></td></tr></table></figure><h5 id="Template-tags"><a href="#Template-tags" class="headerlink" title="Template tags"></a>Template tags</h5><p>标记模板可能是一个听起来不太有用的功能，但它实际上被许多流行的库使用，如 Styled Components 、Apollo 、GraphQL客户端/服务器库，因此了解它的工作原理至关重要。</p><p>在 Styled Components 模板标签中用于定义CSS字符串</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const Button = styled.button`</span><br><span class="line">  font-size: 1.5em;</span><br><span class="line">  background-color: black;</span><br><span class="line">  color: white;</span><br><span class="line">`</span><br></pre></td></tr></table></figure><p>在 Apollo 中，模板标签用于定义 GraphQL 查询模式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const query = gql`</span><br><span class="line">  query &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">`</span><br></pre></td></tr></table></figure><p>上面两个例子中的styled.button和gql模板标签其实都是函数:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function gql(literals, ...expressions) &#123;&#125;</span><br></pre></td></tr></table></figure><p>这个函数返回一个字符串，可以是任意类型的计算结果。</p><p>字面量(literals)是一个包含了表达式插值的模板字面量的序列。 表达式(expressions)包含了所有的插值。</p><p>举个例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const string = `something $&#123;1 + 2 + 3&#125;`</span><br></pre></td></tr></table></figure><p>这个例子里面的字面量是由2个部分组成的序列。第1部分就是something，也就是第一个插值位置(${})之前的字符串，第2部分就是一个空字符串，从第1个插值结束的位置直到字符串的结束。</p><p>这个例子里面的表达式就是只包含1个部分的序列，也就是6。</p><p>举一个更复杂的例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const string = `something</span><br><span class="line">another $&#123;&#x27;x&#x27;&#125;</span><br><span class="line">new line $&#123;1 + 2 + 3&#125;</span><br><span class="line">test`</span><br></pre></td></tr></table></figure><p>这个例子里面的字面量的序列里面，第1个部分是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">;`something</span><br><span class="line">another `</span><br></pre></td></tr></table></figure><p>第2部分是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">;`</span><br><span class="line">new line `</span><br></pre></td></tr></table></figure><p>第3部分是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">;`</span><br><span class="line">test`</span><br></pre></td></tr></table></figure><p>这个例子里面的表达式包含了2个部分：x和6。</p><p>拿到了这些值的函数就可以对其做任意处理，这就是这个特性的威力所在。</p><p>比如最简单的处理就是字符串插值，把字面量和表达式拼接起来：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const interpolated = interpolate`I paid $&#123;10&#125;€`</span><br></pre></td></tr></table></figure><p>插值的过程就是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function interpolate(literals, ...expressions) &#123;</span><br><span class="line">  let string = ``</span><br><span class="line">  for (const [i, val] of expressions) &#123;</span><br><span class="line">    string += literals[i] + val</span><br><span class="line">  &#125;</span><br><span class="line">  string += literals[literals.length - 1]</span><br><span class="line">  return string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h4><p>给定一个object，你可以抽取其中的一些值并且赋值给命名的变量：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const person = &#123;</span><br><span class="line">  firstName: &#x27;Tom&#x27;,</span><br><span class="line">  lastName: &#x27;Cruise&#x27;,</span><br><span class="line">  actor: true,</span><br><span class="line">  age: 54, //made up</span><br><span class="line">&#125;</span><br><span class="line">const &#123;firstName: name, age&#125; = person</span><br></pre></td></tr></table></figure><p>name和age就包含了对应的值。</p><p>这个语法同样可以用到数组当中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const a = [1,2,3,4,5]</span><br><span class="line">const [first, second] = a</span><br></pre></td></tr></table></figure><p>下面这个语句创建了3个新的变量，分别取的是数组a的第0、1、4下标对应的值：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const [first, second, , , fifth] = a</span><br></pre></td></tr></table></figure><h5 id="更强大的对象字面量"><a href="#更强大的对象字面量" class="headerlink" title="更强大的对象字面量"></a>更强大的对象字面量</h5><p>ES2015赋予了对象字面量更大的威力。</p><p>简化了包含变量的语法<br>原来的写法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const something = &#x27;y&#x27;</span><br><span class="line">const x = &#123;</span><br><span class="line">  something: something</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>新的写法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const something = &#x27;y&#x27;</span><br><span class="line">const x = &#123;</span><br><span class="line">  something</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h5><p>原型可以这样指定：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const anObject = &#123; y: &#x27;y&#x27; &#125;</span><br><span class="line">const x = &#123;</span><br><span class="line">  __proto__: anObject</span><br><span class="line">&#125;</span><br><span class="line">super()</span><br><span class="line">const anObject = &#123; y: &#x27;y&#x27;, test: () =&gt; &#x27;zoo&#x27; &#125;</span><br><span class="line">const x = &#123;</span><br><span class="line">  __proto__: anObject,</span><br><span class="line">  test() &#123;</span><br><span class="line">    return super.test() + &#x27;x&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">x.test() //zoox</span><br></pre></td></tr></table></figure><h5 id="动态属性"><a href="#动态属性" class="headerlink" title="动态属性"></a>动态属性</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const x = &#123;</span><br><span class="line">  [&#x27;a&#x27; + &#x27;_&#x27; + &#x27;b&#x27;]: &#x27;z&#x27;</span><br><span class="line">&#125;</span><br><span class="line">x.a_b //z</span><br></pre></td></tr></table></figure><h4 id="For-of循环"><a href="#For-of循环" class="headerlink" title="For-of循环"></a>For-of循环</h4><p>2009年的ES5引入了forEach()循环。虽然很好用，但是它跟for循环一样，没法break。</p><p>ES2015引入了<strong>for-of</strong> 循环，就是在forEach的基础上加上了break的功能：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//iterate over the value</span><br><span class="line">for (const v of [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]) &#123;</span><br><span class="line">  console.log(v);</span><br><span class="line">&#125;</span><br><span class="line">//get the index as well, using `entries()`</span><br><span class="line">for (const [i, v] of [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;].entries()) &#123;</span><br><span class="line">  console.log(index) //index</span><br><span class="line">  console.log(value) //value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>留意一下const的使用。这个循环在每次迭代中都会创建一个新的作用域，所以我们可以使用const来代替let。</p><p>它跟for…in的区别在于：</p><ul><li>for…of遍历属性值</li><li>for…in遍历属性名</li></ul><h4 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h4><p>promise的一般定义： 它是一个代理，通过它可以最终得到一个值.</p><p>Promise是处理异步代码的一种方式，可以少写很多回调。</p><p>异步函数是建立在promise API上面的，所以理解Promise是一个基本的要求。</p><h5 id="promise的原理简述"><a href="#promise的原理简述" class="headerlink" title="promise的原理简述"></a>promise的原理简述</h5><p>一个promise被调用的时候，首先它是处于pending状态。在promise处理的过程中，调用的函数（caller）可以继续执行，直到promise给出反馈。</p><p>此时，调用的函数等待的promise结果要么是resolved状态，要么是rejected状态。但是由于JavaScript是异步的，所以promise处理的过程中，函数会继续执行。</p><h5 id="为什么JS-API使用promises"><a href="#为什么JS-API使用promises" class="headerlink" title="为什么JS API使用promises?"></a>为什么JS API使用promises?</h5><p>除了你的代码和第三方库的代码之外，promise在用在现代的Web API中，比如：</p><ul><li>电池API</li><li>Fetch API</li><li>Service Workers</li></ul><p>在现代的JavaScript中，不使用promise是不太可能的，所以我们来深入研究下promise吧。</p><h5 id="创建一个promise"><a href="#创建一个promise" class="headerlink" title="创建一个promise"></a>创建一个promise</h5><p>Promise API暴露了一个Promise构造函数，可以通过new Promise()来初始化：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let done = true</span><br><span class="line">const isItDoneYet = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  if (done) &#123;</span><br><span class="line">    const workDone = &#x27;Here is the thing I built&#x27;</span><br><span class="line">    resolve(workDone)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    const why = &#x27;Still working on something else&#x27;</span><br><span class="line">    reject(why)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>promise会检查done这个全局变量，如果为true，就返回一个resolved promise，否则就返回一个rejected promise。</p><p>通过resolve和reject，我们可以得到一个返回值，返回值可以是字符串也可以是对象。</p><h5 id="使用一个promise"><a href="#使用一个promise" class="headerlink" title="使用一个promise"></a>使用一个promise</h5><p>上面讲了怎么创建一个promise，下面就讲怎么使用（consume）这个promise。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const isItDoneYet = new Promise()</span><br><span class="line">//...</span><br><span class="line">const checkIfItsDone = () =&gt; &#123;</span><br><span class="line">  isItDoneYet</span><br><span class="line">    .then(ok =&gt; &#123;</span><br><span class="line">      console.log(ok)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(err =&gt; &#123;</span><br><span class="line">      console.error(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行checkIfItsDone()方法时，会执行isItDoneYet()这个promise，并且等待它resolve的时候使用then回调，如果有错误，就用catch回调来处理。</p><h5 id="链式promise"><a href="#链式promise" class="headerlink" title="链式promise"></a>链式promise</h5><p>一个promise可以返回另一个promise，从而创建promise链条（chain）。</p><p>一个很好的例子就是Fetch API，它是基于XMLHttpRequest API的一个上层API，我们可以用它来获取资源，并且在获取到资源的时候链式执行一系列promise。</p><p>Fetch API是一个基于promise的机制，调用fetch()相当于使用new Promise()来声明我们自己的promise。</p><p>链式promise的例子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const status = response =&gt; &#123;</span><br><span class="line">  if (response.status &gt;= 200 &amp;&amp; response.status &lt; 300) &#123;</span><br><span class="line">    return Promise.resolve(response)</span><br><span class="line">  &#125;</span><br><span class="line">  return Promise.reject(new Error(response.statusText))</span><br><span class="line">&#125;</span><br><span class="line">const json = response =&gt; response.json()</span><br><span class="line">fetch(&#x27;/todos.json&#x27;)</span><br><span class="line">  .then(status)</span><br><span class="line">  .then(json)</span><br><span class="line">  .then(data =&gt; &#123;</span><br><span class="line">    console.log(&#x27;Request succeeded with JSON response&#x27;, data)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(error =&gt; &#123;</span><br><span class="line">    console.log(&#x27;Request failed&#x27;, error)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>在这个例子当中，我们调用fetch()，从根目录的todos.json文件中获取一系列的TODO项目，并且创建一个链式promise。</p><p>运行fetch()方法会返回一个response，它包含很多属性，我们从中引用如下属性：</p><ul><li>status, 一个数值，表示HTTP状态码</li><li>statusText, 一个状态消息，当请求成功的时候返回OK</li><li>response还有一个json()方法，它返回一个promise，返回内容转换成JSON后的结果。</li></ul><p>所以这些promise的调用过程就是：第一个promise执行一个我们定义的status()方法，检查response status，判断是否一个成功的响应(status在200和299之间)，如果不是成功的响应，就reject这个promise。</p><p>这个reject操作会导致整个链式promise跳过后面的所有promise直接到catch()语句，打印Request failed和错误消息。</p><p>如果这个promise成功了，它会调用我们定义的json()函数。因为前面的promise成功之后返回的response对象，我们可以拿到并作为第2个promise的参数传入。</p><p>在这个例子里面，我们返回了JSON序列化的数据，所以第3个promise直接接收这个JSON：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.then((data) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;Request succeeded with JSON response&#x27;, data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>然后我们把它打印到console。</p><h4 id="处理错误"><a href="#处理错误" class="headerlink" title="处理错误"></a>处理错误</h4><p>在上一节的的例子里面，我们有一个catch接在链式promise后面。</p><p>当promise链中的任意一个出错或者reject的时候，就会直接跳到promise链后面最近的catch()语句。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  throw new Error(&#x27;Error&#x27;)</span><br><span class="line">&#125;).catch(err =&gt; &#123;</span><br><span class="line">  console.error(err)</span><br><span class="line">&#125;)</span><br><span class="line">// or</span><br><span class="line">new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  reject(&#x27;Error&#x27;)</span><br><span class="line">&#125;).catch(err =&gt; &#123;</span><br><span class="line">  console.error(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="级联错误"><a href="#级联错误" class="headerlink" title="级联错误"></a>级联错误</h5><p>如果在catch()里面抛出一个错误，你可以在后面接上第二个catch()来处理这个错误，以此类推。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  throw new Error(&#x27;Error&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">  .catch(err =&gt; &#123;</span><br><span class="line">    throw new Error(&#x27;Error&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(err =&gt; &#123;</span><br><span class="line">    console.error(err)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h4 id="组织多个promise"><a href="#组织多个promise" class="headerlink" title="组织多个promise"></a>组织多个promise</h4><h5 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a>Promise.all()</h5><p>如果你要同时完成不同的promise,可以用Promise.all()来声明一系列的promise，然后当它们全部resolve的时候再执行一些操作。</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const f1 = fetch(&#x27;/something.json&#x27;)</span><br><span class="line">const f2 = fetch(&#x27;/something2.json&#x27;)</span><br><span class="line">Promise.all([f1, f2])</span><br><span class="line">  .then(res =&gt; &#123;</span><br><span class="line">    console.log(&#x27;Array of results&#x27;, res)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(err =&gt; &#123;</span><br><span class="line">    console.error(err)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>结合ES2015的解构赋值语法，你可以这样写：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Promise.all([f1, f2]).then(([res1, res2]) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;Results&#x27;, res1, res2)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>当然这不限于使用fetch， 这适用于任何promise.</p><h5 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race()"></a>Promise.race()</h5><p>Promise.race()运行所有传递进去的promise，但是只要有其中一个resolve了，就会运行回调函数，并且只执行一次回调，回调的参数就是第一个resolve的promise返回的结果。</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const promiseOne = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  setTimeout(resolve, 500, &#x27;one&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">const promiseTwo = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  setTimeout(resolve, 100, &#x27;two&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">Promise.race([promiseOne, promiseTwo]).then(result =&gt; &#123;</span><br><span class="line">  console.log(result) // &#x27;two&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h4><p>ES Module是用于处理模块的ECMAScript标准。</p><p>虽然 Node.js 多年来一直使用 CommonJS标准，但浏览器却从未有过模块系统，因为模块系统的决策首先需要 ECMAScript 标准化后才由浏览器厂商去实施实现。</p><p>这个标准化已经完成在 ES2015中，浏览器也开始实施实现这个标准，大家试图保持一致，以相同的方式工作。现在 ES Module 可以在 Chrome Safari Edge 和 Firefox（从60版本开始） 中使用。</p><p>模块非常酷，他们可以让你封装各种各样的功能，同时将这些功能作为库暴露给其它 JavaScript 文件使用。</p><h5 id="ES-模块语法"><a href="#ES-模块语法" class="headerlink" title="ES 模块语法"></a>ES 模块语法</h5><p>引入模块的语法:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import package from &#x27;module-name&#x27;</span><br></pre></td></tr></table></figure><p>CommonJS 则是这样使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const package = require(&#x27;module-name&#x27;)</span><br></pre></td></tr></table></figure><p>一个模块是一个 JavaScript 文件，这个文件使用 export 关键字 导出 一个或多个值（对象、函数或者变量）。例如，下面这个模块提供了一个将字符串变成大写形式的函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uppercase.js</span><br><span class="line">export default str =&gt; str.toUpperCase()</span><br></pre></td></tr></table></figure><p>在这个例子中，这个模块定义了唯一一个 default export，因此可以是一个匿名函数。否则，需要一个名称来和其它 导出 做区分。</p><p>现在，任何其它的 JavaScript 模块 可以通过 import 导入 uppercase.js 的这个功能。</p><p>一个 HTML 页面可以通过使用了特殊的 type=module 属性的 <code>&lt;script&gt;</code> 标签添加一个模块。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;module&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>注意: 这个模块导入的行为就像 <em>defer</em> 脚本加载一样。具体可以看 efficiently load JavaScript with defer and async</p></blockquote><p>需要特别注意的是，任何通过 type=”module” 载入的脚本会使用 严格模式 加载。</p><p>在这个例子中，uppercase.js 模块定义了一个 default export，因此当我们在导入它的时候，我们可以给他起一个任何我们喜欢的名字：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import toUpperCase from &#x27;./uppercase.js&#x27;</span><br></pre></td></tr></table></figure><p>同时我们可以这样使用它:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">toUpperCase(&#x27;test&#x27;) //&#x27;TEST&#x27;</span><br></pre></td></tr></table></figure><p>你也可以通过一个绝对路径来导入模块，下面是一个引用来自其它域底下定义的模块的例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import toUpperCase from &#x27;https://flavio-es-modules-example.glitch.me/uppercase.js&#x27;</span><br></pre></td></tr></table></figure><p>下面同样是一些合法的 import语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#123; toUpperCase &#125; from &#x27;/uppercase.js&#x27;</span><br><span class="line">import &#123; toUpperCase &#125; from &#x27;../uppercase.js&#x27;</span><br></pre></td></tr></table></figure><p>下面是错误的使用:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#123; toUpperCase &#125; from &#x27;uppercase.js&#x27;</span><br><span class="line">import &#123; toUpperCase &#125; from &#x27;utils/uppercase.js&#x27;</span><br></pre></td></tr></table></figure><p>因为这里既不是使用绝对地址，也不是使用的相对地址。</p><h5 id="其它的-import-export-语法"><a href="#其它的-import-export-语法" class="headerlink" title="其它的 import/export 语法"></a>其它的 import/export 语法</h5><p>我们了解了上面的例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export default str =&gt; str.toUpperCase()</span><br></pre></td></tr></table></figure><p>这里生成了一个 default export。然而，你可以通过下面的语法在一个文件里面 导出 多个功能：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const a = 1</span><br><span class="line">const b = 2</span><br><span class="line">const c = 3</span><br><span class="line">export &#123; a, b, c &#125;</span><br></pre></td></tr></table></figure><p>另外一个模块可以使用下面的方式 import 导入所有：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import * from &#x27;module&#x27;</span><br></pre></td></tr></table></figure><p>你也可以通过解构赋值的方式仅仅 import 导出一部分：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#123; a &#125; from &#x27;module&#x27;</span><br><span class="line">import &#123; a, b &#125; from &#x27;module&#x27;</span><br></pre></td></tr></table></figure><p>为了方便，你还可以使用 as 重命名任何 import 的东西：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; a, b as two &#125; from &#x27;module&#x27;</span><br></pre></td></tr></table></figure><p>你可以导入模块中的默认出口以及通过名称导入任何非默认的出口：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;</span><br></pre></td></tr></table></figure><p>这是一篇关于 ES 模块的文章，可以看一下： <a href="https://glitch.com/edit/#!/flavio-es-modules-example?path=index.html">https://glitch.com/edit/#!/flavio-es-modules-example?path=index.html</a></p><h4 id="CORS-跨域资源共享"><a href="#CORS-跨域资源共享" class="headerlink" title="CORS(跨域资源共享)"></a>CORS(跨域资源共享)</h4><p>进行远程获取模块的时候是遵循 CORS 机制的。这意味着当你引用远程模块的时候，必须使用合法的 CORS 请求头来允许跨域访问（例如：Access-Control-Allow-Origin: *）。</p><h5 id="对于不支持模块的浏览器应该怎么做？"><a href="#对于不支持模块的浏览器应该怎么做？" class="headerlink" title="对于不支持模块的浏览器应该怎么做？"></a>对于不支持模块的浏览器应该怎么做？</h5><p>结合 type=”module”、nomodule 一起使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;module&quot; src=&quot;module.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script nomodule src=&quot;fallback.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="包装模块"><a href="#包装模块" class="headerlink" title="包装模块"></a>包装模块</h5><p>ES 模块是现代浏览器中的一大特性。这些特性是 ES6 规范中的一部分，要在浏览器中全部实现这些特性的路还很漫长。</p><p>我们现在就能使用它们！但是我们同样需要知道，有一些模块会对我们的页面性能产生性能影响。因为浏览器必须要在运行时执行它们。</p><p>Webpack 可能仍然会被大量使用，即使 ES 模块可以在浏览器中执行。但是语言内置这个特性对于客户端和 nodejs 在使用模块的时候是一种巨大的统一。</p><h4 id="新的字符串方法"><a href="#新的字符串方法" class="headerlink" title="新的字符串方法"></a>新的字符串方法</h4><p>任何字符串有了一些实例方法：</p><ul><li>repeat()</li><li>codePointAt()</li><li>repeat()</li></ul><p>根据指定的次数重复字符串：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;Ho&#x27;.repeat(3) //&#x27;HoHoHo&#x27;</span><br></pre></td></tr></table></figure><p>没有提供参数以及使用 0 作为参数的时候返回空字符串。如果给一个负数参数则会得到一个 RangeError 的错误。</p><h5 id="codePointAt"><a href="#codePointAt" class="headerlink" title="codePointAt()"></a>codePointAt()</h5><p>这个方法能用在处理那些需要 2 个 UTF-16 单元表示的字符上。</p><p>使用 charCodeAt 的话，你需要先分别得到两个 UTF-16 的编码然后结合它们。但是使用 codePointAt() 你可以直接得到整个字符。</p><p>下面是一个例子，中文的 “𠮷” 是由两个 UTF-16 编码组合而成的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;𠮷&quot;.charCodeAt(0).toString(16) //d842</span><br><span class="line">&quot;𠮷&quot;.charCodeAt(1).toString(16) //dfb7</span><br></pre></td></tr></table></figure><p>如果你将两个 unicode 字符组合起来：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;\ud842\udfb7&quot; //&quot;𠮷&quot;</span><br></pre></td></tr></table></figure><p>你也可以用 codePointAt() 得到同样的结果:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;𠮷&quot;.codePointAt(0) //20bb7</span><br></pre></td></tr></table></figure><p>如果你将得到的 unicode 编码组合起来：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;\u&#123;20bb7&#125;&quot; //&quot;𠮷&quot;</span><br></pre></td></tr></table></figure><p>更多关于 Unicode 的使用方法，参考我的Unicode guide。</p><h4 id="新的对象方法"><a href="#新的对象方法" class="headerlink" title="新的对象方法"></a>新的对象方法</h4><p>ES2015 在 Object 类下引入了一些静态方法：</p><ul><li>Object.is() 确定两个值是不是同一个</li><li>Object.assign() 用来浅拷贝一个对象</li><li>Object.setPrototypeOf 设置一个对象的原型</li><li>Object.is()</li></ul><p>这个方法用来帮助比较对象的值：</p><p>使用方式:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.is(a, b)</span><br></pre></td></tr></table></figure><p>返回值在下列情况之外一直是 false：</p><ul><li>a 和 b 是同一个对象</li><li>a 和 b 是相等的字符串(用同样的字符组合在一起的字符串是相等的)</li><li>a 和 b 是相等的数字</li><li>a 和 b 都是 undefined, null, NaN, true 或者都是 false</li><li>0 和 -0 在 JavaScript 里面是不同的值, 所以对这种情况要多加小心（例如在比较之前，使用 + 一元操作符将所有值转换成 +0）。</li></ul><h5 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h5><p>在 ES2015 版本中引入，这个方法拷贝所有给出的对象中的可枚举的自身属性到另一个对象中。</p><p>这个 API 的基本用法是创建一个对象的浅拷贝。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const copied = Object.assign(&#123;&#125;, original)</span><br></pre></td></tr></table></figure><p>作为浅拷贝，值会被复制，对象则是拷贝其引用（不是对象本身），因此当你修改了源对象的一个属性值，这个修改也会在拷贝出的对象中生效，因为内部引用的对象是相同的。:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const original = &#123;</span><br><span class="line">  name: &#x27;Fiesta&#x27;,</span><br><span class="line">  car: &#123;</span><br><span class="line">    color: &#x27;blue&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const copied = Object.assign(&#123;&#125;, original)</span><br><span class="line">original.name = &#x27;Focus&#x27;</span><br><span class="line">original.car.color = &#x27;yellow&#x27;</span><br><span class="line">copied.name //Fiesta</span><br><span class="line">copied.car.color //yellow</span><br></pre></td></tr></table></figure><p>我之前提到过，源对象可以是一个或者多个:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const wisePerson = &#123;</span><br><span class="line">  isWise: true</span><br><span class="line">&#125;</span><br><span class="line">const foolishPerson = &#123;</span><br><span class="line">  isFoolish: true</span><br><span class="line">&#125;</span><br><span class="line">const wiseAndFoolishPerson = Object.assign(&#123;&#125;, wisePerson, foolishPerson)</span><br><span class="line">console.log(wiseAndFoolishPerson) //&#123; isWise: true, isFoolish: true &#125;</span><br><span class="line">Object.setPrototypeOf()</span><br></pre></td></tr></table></figure><p>设置一个对象的原型。可以接受两个参数：对象以及原型。</p><p>使用方法:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.setPrototypeOf(object, prototype)</span><br></pre></td></tr></table></figure><p>例子:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const animal = &#123;</span><br><span class="line">  isAnimal: true</span><br><span class="line">&#125;</span><br><span class="line">const mammal = &#123;</span><br><span class="line">  isMammal: true</span><br><span class="line">&#125;</span><br><span class="line">mammal.__proto__ = animal</span><br><span class="line">mammal.isAnimal //true</span><br><span class="line">const dog = Object.create(animal)</span><br><span class="line">dog.isAnimal  //true</span><br><span class="line">console.log(dog.isMammal)  //undefined</span><br><span class="line">Object.setPrototypeOf(dog, mammal)</span><br><span class="line">dog.isAnimal //true</span><br><span class="line">dog.isMammal //true</span><br></pre></td></tr></table></figure><h4 id="展开操作符"><a href="#展开操作符" class="headerlink" title="展开操作符"></a>展开操作符</h4><p>你可以展开一个数组、一个对象甚至是一个字符串，通过使用展开操作符 …。</p><p>让我们以数组来举例，给出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const a = [1, 2, 3]</span><br></pre></td></tr></table></figure><p>你可以使用下面的方式创建出一个新的数组：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const b = [...a, 4, 5, 6]</span><br></pre></td></tr></table></figure><p>你也可以像下面这样创建一个数组的拷贝：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const c = [...a]</span><br></pre></td></tr></table></figure><p>这中方式对于对象仍然有效。使用下面的方式克隆一个对象：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const newObj = &#123; ...oldObj &#125;</span><br></pre></td></tr></table></figure><p>用在字符串上的时候，展开操作符会以字符串中的每一个字符创建一个数组：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const hey = &#x27;hey&#x27;</span><br><span class="line">const arrayized = [...hey] // [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;y&#x27;]</span><br></pre></td></tr></table></figure><p>这个操作符有一些非常有用的应用。其中最重要的一点就是以一种非常简单的方式使用数组作为函数参数的能力：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const f = (foo, bar) =&gt; &#123;&#125;</span><br><span class="line">const a = [1, 2]</span><br><span class="line">f(...a)</span><br></pre></td></tr></table></figure><p>（在之前的语法规范中，你只能通过 f.apply(null, a) 的方式来实现，但是这种方式不是很友好和易读。）</p><p>剩余参数（rest element）在和数组解构（array destructuring）搭配使用的时候非常有用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const numbers = [1, 2, 3, 4, 5]</span><br><span class="line">[first, second, ...others] = numbers</span><br></pre></td></tr></table></figure><p>下面是展开元素 （spread elements）:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const numbers = [1, 2, 3, 4, 5]</span><br><span class="line">const sum = (a, b, c, d, e) =&gt; a + b + c + d + e</span><br><span class="line">const sum = sum(...numbers)</span><br></pre></td></tr></table></figure><p>ES2018 引入了 剩余属性 ，同样的操作符但是只能用在对象上。</p><h4 id="剩余属性（Rest-properties）"><a href="#剩余属性（Rest-properties）" class="headerlink" title="剩余属性（Rest properties）:"></a>剩余属性（Rest properties）:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const &#123; first, second, ...others &#125; = &#123;</span><br><span class="line">  first: 1,</span><br><span class="line">  second: 2,</span><br><span class="line">  third: 3,</span><br><span class="line">  fourth: 4,</span><br><span class="line">  fifth: 5</span><br><span class="line">&#125;</span><br><span class="line">first // 1</span><br><span class="line">second // 2</span><br><span class="line">others // &#123; third: 3, fourth: 4, fifth: 5 &#125;</span><br></pre></td></tr></table></figure><p>属性展开（Spread properties）允许我们结合跟在 … 操作符之后对象的属性：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const items = &#123; first, second, ...others &#125;</span><br><span class="line">items //&#123; first: 1, second: 2, third: 3, fourth: 4, fifth: 5 &#125;</span><br></pre></td></tr></table></figure><h4 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h4><p>一个 Set 数据结构允许我们在一个容器里面增加数据。</p><p>一个 Set 是一个对象或者基础数据类型（strings、numbers或者booleans）的集合，你可以将它看作是一个 Map，其中值作为映射键，map 值始终为 true。</p><h5 id="初始化一个-Set"><a href="#初始化一个-Set" class="headerlink" title="初始化一个 Set"></a>初始化一个 Set</h5><p>Set 可以通过下面的方式初始化：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const s = new Set()</span><br></pre></td></tr></table></figure><h5 id="向-Set-中添加一项"><a href="#向-Set-中添加一项" class="headerlink" title="向 Set 中添加一项"></a>向 Set 中添加一项</h5><p>你可以使用 add 方法向 Set 中添加项：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s.add(&#x27;one&#x27;)</span><br><span class="line">s.add(&#x27;two&#x27;)</span><br></pre></td></tr></table></figure><p>Set 仅会存贮唯一的元素，因此多次调用 s.add(‘one’) 不会重复添加新的元素。</p><p>你不可以同时向 set 中加入多个元素。你需要多次调用 add() 方法。</p><h5 id="检查元素是否在-set-中"><a href="#检查元素是否在-set-中" class="headerlink" title="检查元素是否在 set 中"></a>检查元素是否在 set 中</h5><p>我们可以通过下面的方式检查元素是否在 set 中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s.has(&#x27;one&#x27;) //true</span><br><span class="line">s.has(&#x27;three&#x27;) //false</span><br></pre></td></tr></table></figure><h5 id="从-set-中删除一个元素："><a href="#从-set-中删除一个元素：" class="headerlink" title="从 set 中删除一个元素："></a>从 set 中删除一个元素：</h5><p>使用 delete() 方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.delete(&#x27;one&#x27;)</span><br></pre></td></tr></table></figure><h5 id="确定-set-中元素的数量"><a href="#确定-set-中元素的数量" class="headerlink" title="确定 set 中元素的数量"></a>确定 set 中元素的数量</h5><p>使用 size 属性：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.size</span><br></pre></td></tr></table></figure><h5 id="删除-set-中的全部元素"><a href="#删除-set-中的全部元素" class="headerlink" title="删除 set 中的全部元素"></a>删除 set 中的全部元素</h5><p>使用 clear() 方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.clear()</span><br></pre></td></tr></table></figure><h5 id="对-set-进行迭代"><a href="#对-set-进行迭代" class="headerlink" title="对 set 进行迭代"></a>对 set 进行迭代</h5><p>使用 keys() 或者 values() 方法 - 它们等价于下面的代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">for (const k of s.keys()) &#123;</span><br><span class="line">  console.log(k)</span><br><span class="line">&#125;</span><br><span class="line">for (const k of s.values()) &#123;</span><br><span class="line">  console.log(k)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>entries() 方法返回一个迭代器，你可以这样使用它：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const i = s.entries()</span><br><span class="line">console.log(i.next())</span><br></pre></td></tr></table></figure><p>调用 i.next() 将会以 { value, done = false } 对象的形式返回每一个元素，直到迭代结束，这时 done 是 true。</p><p>你也可以调用 set 的 forEach() 方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.forEach(v =&gt; console.log(v))</span><br></pre></td></tr></table></figure><p>或者你就直接使用 for..of 循环吧：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (const k of s) &#123;</span><br><span class="line">  console.log(k)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="使用一些初始值初始化一个-set"><a href="#使用一些初始值初始化一个-set" class="headerlink" title="使用一些初始值初始化一个 set"></a>使用一些初始值初始化一个 set</h5><p>你可以使用一些值初始化一个 set：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const s = new Set([1, 2, 3, 4])</span><br></pre></td></tr></table></figure><p>将 set 转换为一个数组</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const a = [...s.keys()]</span><br><span class="line">// or</span><br><span class="line">const a = [...s.values()]</span><br></pre></td></tr></table></figure><h5 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h5><p>一个 WeakSet 是一个特殊的 Set.</p><p>在 set 中，元素不会被 gc（垃圾回收）。一个 weakSet 让它的所有元素都是可以被 gc 的。weakSet 中的每个键都是一个对象。当这个对象的引用消失的时候，对应的值就可以被 gc 了。</p><p>下面是主要的不同点：</p><ul><li>WeakSet 不可迭代</li><li>你不能清空 weakSet 中的所有元素</li><li>不能够得到 weakSet 的大小</li></ul><p>一个 weakSet 通常是在框架级别的代码中使用，仅仅暴露了下面的方法：</p><ul><li>add()</li><li>has()</li><li>delete()</li></ul><h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p>一份map结构的数据允许我们建立数据和key的关系</p><h5 id="在ES6之前"><a href="#在ES6之前" class="headerlink" title="在ES6之前"></a>在ES6之前</h5><p>在引入Map之前，开发者通常把对象(Object)当Map使用，把某个object或value值与指定的key进行关联:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const car = &#123;&#125;</span><br><span class="line">car[&#x27;color&#x27;] = &#x27;red&#x27;</span><br><span class="line">car.owner = &#x27;Flavio&#x27;</span><br><span class="line">console.log(car[&#x27;color&#x27;]) //red</span><br><span class="line">console.log(car.color) //red</span><br><span class="line">console.log(car.owner) //Flavio</span><br><span class="line">console.log(car[&#x27;owner&#x27;]) //Flavio</span><br></pre></td></tr></table></figure><h5 id="引入Map之后"><a href="#引入Map之后" class="headerlink" title="引入Map之后"></a>引入Map之后</h5><p>ES6引入了Map数据结构，它为我们处理这种数据结构提供了一种合适的工具</p><p>Map的初始化:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const m = new Map()</span><br></pre></td></tr></table></figure><p>添加条目到Map中</p><p>你可以通过set()方法把条目设定到map中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m.set(&#x27;color&#x27;, &#x27;red&#x27;)</span><br><span class="line">m.set(&#x27;age&#x27;, 2)</span><br></pre></td></tr></table></figure><p>通过key值从map中获取条目</p><p>你可以通过get()方法从map中取出条目:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const color = m.get(&#x27;color&#x27;)</span><br><span class="line">const age = m.get(&#x27;age&#x27;)</span><br></pre></td></tr></table></figure><p>通过key值从map中删除条目</p><p>使用delete()方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m.delete(&#x27;color&#x27;)</span><br></pre></td></tr></table></figure><p>从map中删除所有条目</p><p>使用clear()方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m.clear()</span><br></pre></td></tr></table></figure><p>通过key值检查map中是否含有某个条目</p><p>使用has()方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const hasColor = m.has(&#x27;color&#x27;)</span><br></pre></td></tr></table></figure><p>获取map中的条目数量</p><p>使用 size 属性:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const size = m.size</span><br></pre></td></tr></table></figure><p>用value值初始化一个map</p><p>你可以用一组value来初始化一个map：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const m = new Map([[&#x27;color&#x27;, &#x27;red&#x27;], [&#x27;owner&#x27;, &#x27;Flavio&#x27;], [&#x27;age&#x27;, 2]])</span><br></pre></td></tr></table></figure><p>Map 的key值</p><p>任何值(对象，数组，字符串，数字)都可以作为一个map的value值(使用key-value键值的形式)，任何值也可以用作key，即使是object对象。</p><p>如果你想通过get()方法从map中获取不存在的key，它将会返回undefined</p><p>在真实世界中你几乎不可能找到的诡异情况</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const m = new Map()</span><br><span class="line">m.set(NaN, &#x27;test&#x27;)</span><br><span class="line">m.get(NaN) //test</span><br><span class="line">const m = new Map()</span><br><span class="line">m.set(+0, &#x27;test&#x27;)</span><br><span class="line">m.get(-0) //test</span><br></pre></td></tr></table></figure><p>使用Iterate迭代器获取map的keys值</p><p>Map提供了keys()方法，通过该方法我们可以迭代出所有的key值:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (const k of m.keys()) &#123;</span><br><span class="line">  console.log(k)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用Iterate迭代器获取map的values值</p><p>Map提供了values()方法，通过该方法我们可以迭代出所有的value值:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (const v of m.values()) &#123;</span><br><span class="line">  console.log(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用Iterate迭代器获取key-value组成的键值对</p><p>Map提供了entries()方法，通过该方法我们可以迭代出所有的键值对:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (const [k, v] of m.entries()) &#123;</span><br><span class="line">  console.log(k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用方法还可以简化为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (const [k, v] of m) &#123;</span><br><span class="line">  console.log(k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将map的keys值转换为数组</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const a = [...m.keys()]</span><br></pre></td></tr></table></figure><p>将map的values值转换为数组</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const a = [...m.values()]</span><br></pre></td></tr></table></figure><h4 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h4><p>WeakMap是一种特殊的Map</p><p>在一个map对象中，定义在其上数据永远不会被垃圾回收，WeakMap替而代之的是它允许在它上面定义的数据可以自由的被垃圾回收走，WeakMap的每一个key都是一个对象，当指向该对象的指针丢失，与之对应的value就会被垃圾回收走。</p><p>这是WeakMap的主要不同处：</p><ul><li>你不可以在WeakMap上迭代keys值和values值(或者key-value键值对)</li><li>你不可以从WeakMap上清除所有条目</li></ul><h5 id="你不可以获取WeakMap的大小"><a href="#你不可以获取WeakMap的大小" class="headerlink" title="你不可以获取WeakMap的大小"></a>你不可以获取WeakMap的大小</h5><p>WeakMap提供了如下几种方法，这些方法的使用和在Map中一样：</p><ul><li>get(k)</li><li>set(k, v)</li><li>has(k)</li><li>delete(k)</li></ul><p>关于WeakMap的用例不如Map的用例那么明显，你可能永远也不会在哪里会用到它，但从实际出发，WeakMap可以构建不会干扰到垃圾回收机制的内存敏感性缓存，还可以满足封装的严谨性及信息的隐藏性需求。</p><h4 id="Generators生成器"><a href="#Generators生成器" class="headerlink" title="Generators生成器"></a>Generators生成器</h4><p>Generators是一种特殊的函数，它能够暂停自身的执行并在一段时间后再继续运行，从而允许其它的代码在此期间运行(有关该主题的详细说明，请参阅完整的“javascript生成器指南”)。</p><p>Generators的代码决定它必须等待，因此它允许队列中的其它代码运行，并保留“当它等待的事情”完成时恢复其操作的权力。</p><p>所有这一切都是通过一个简单的关键字“yield`”完成的。当生成器包含该关键字时，将停止执行。</p><p>generator生成器可以包含许多yield关键字，从而使自己能多次停止运行，它是由*function关键字标识(不要将其与C、C++或Go等低级语言中使用的取消指针引用操作符混淆)。</p><p>Generators支持JavaScript中全新的编程范式，包括：</p><ul><li>在generator运行时支持双向通信</li><li>不会“冻结”长期运行在程序中的while循环</li></ul><p>这里有一个解释generator如何工作的例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function *calculator(input) &#123;</span><br><span class="line">  var doubleThat = 2 * (yield (input / 2))</span><br><span class="line">  var another = yield (doubleThat)</span><br><span class="line">  return (input * doubleThat * another)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们先初始化它：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const calc = calculator(10)</span><br></pre></td></tr></table></figure><p>然后我们在generator中开始进行iterator迭代：</p><h5 id="calc-next"><a href="#calc-next" class="headerlink" title="calc.next()"></a>calc.next()</h5><p>第一个迭代器开始了迭代，代码返回如下object对象：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  done: false</span><br><span class="line">  value: 5</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>具体过程如下：代码运行了函数，并把input=10传入到生成器构造函数中，该函数一直运行直到抵达yield，并返回yield输出的内容: input / 2 = 5，因此，我们得到的值为5，并告知迭代器还没有done(函数只是暂停了)。</p><p>在第二个迭代处，我们输入7：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">calc.next(7)</span><br></pre></td></tr></table></figure><p>然后我们得到了结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  done: false</span><br><span class="line">  value: 14</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>7被作为doubleThat的值，注意：你可能会把input/2作为输入参数，但这只是第一次迭代的返回值。现在我们忽略它，使用新的输入值7，并将其乘以2.</p><p>然后，我们得到第二个yield的值，它返回doubleThat，因此返回值为14。</p><p>在下一个，也是最后一个迭代器，我们输入100</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">calc.next(100)</span><br></pre></td></tr></table></figure><p>这样我们得到:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  done: true</span><br><span class="line">  value: 14000</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当迭代器完成时(没有更多的yield关键字)，我们返回input <em>doubleThat</em> another，这相当于10 <em>14</em>100。</p><p>这些都是在2015年的ES2015引入的特性，现在我们深入了解下ES2016，它的作用域范围更小。</p><h4 id="Array-prototype-includes"><a href="#Array-prototype-includes" class="headerlink" title="Array.prototype.includes()"></a>Array.prototype.includes()</h4><p>该特性引入了一种更简洁的语法，同来检查数组中是否包含指定元素。</p><p>对于ES6及更低版本，想要检查数组中是否包含指定元素，你不得不使用indexOf方法，它检查数组中的索引，如果元素不存在，它返回-1，由于-1被计算为true，你需对其进行取反操作，例子如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (![1,2].indexOf(3)) &#123;</span><br><span class="line">  console.log(&#x27;Not found&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过ES7引入的新特性，我们可以如此做：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (![1,2].includes(3)) &#123;</span><br><span class="line">  console.log(&#x27;Not found&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="求幂运算符"><a href="#求幂运算符" class="headerlink" title="求幂运算符"></a>求幂运算符</h4><p>求幂运算符**相当于Math.pow()方法，但是它不是一个函数库，而是一种语言机制：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Math.pow(4, 2) == 4 ** 2</span><br></pre></td></tr></table></figure><p>对于需要进行密集数学运算的程序来说，这个特性是个很好的增强，在很多语言中，**运算符都是标准(包括Python、Ruby、MATLAB、Perl等其它多种语言)。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/meG6Vo0Meviac0Jv4WVAlibeaSBib1Hh1Y019JXyUEnB5HXEdoX0pA7ibBnpNH5WNnYHqWoPcA84SZSicwkxV2poaeg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p><p>这些都是2016年引入的特性，现在让我们进入2017年。</p><h4 id="字符串填充"><a href="#字符串填充" class="headerlink" title="字符串填充"></a>字符串填充</h4><p>字符串填充的目的是给字符串添加字符，以使其达到指定长度。</p><p>ES2017引入了两个String方法：padStart()和padEnd()。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">padStart(targetLength [, padString])</span><br><span class="line">padEnd(targetLength [, padString])</span><br></pre></td></tr></table></figure><p>使用例子：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/meG6Vo0Meviac0Jv4WVAlibeaSBib1Hh1Y0m85zSGiciaAHf2qGiaiahoX3YRicf0tiaU2O6Ad0uWRyGxBurLYbry4bhs6Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p><h4 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values()"></a>Object.values()</h4><p>该方法返回一个数组，数组包含了对象自己的所有属性，使用如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const person = &#123; name: &#x27;Fred&#x27;, age: 87 &#125;</span><br><span class="line">Object.values(person) // [&#x27;Fred&#x27;, 87]</span><br></pre></td></tr></table></figure><p>Object.values()也可以作用于数组：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const people = [&#x27;Fred&#x27;, &#x27;Tony&#x27;]</span><br><span class="line">Object.values(people) // [&#x27;Fred&#x27;, &#x27;Tony&#x27;]</span><br></pre></td></tr></table></figure><h4 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries()"></a>Object.entries()</h4><p>该方法返回一个数组，数组包含了对象自己的所有属性键值对，是一个[key, value]形式的数组，使用如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const person = &#123; name: &#x27;Fred&#x27;, age: 87 &#125;</span><br><span class="line">Object.entries(person) // [[&#x27;name&#x27;, &#x27;Fred&#x27;], [&#x27;age&#x27;, 87]]</span><br></pre></td></tr></table></figure><p>Object.entries()也可以作用于数组：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const people = [&#x27;Fred&#x27;, &#x27;Tony&#x27;]</span><br><span class="line">Object.entries(people) // [[&#x27;0&#x27;, &#x27;Fred&#x27;], [&#x27;1&#x27;, &#x27;Tony&#x27;]]</span><br></pre></td></tr></table></figure><h4 id="Object-getOwnPropertyDescriptors"><a href="#Object-getOwnPropertyDescriptors" class="headerlink" title="Object.getOwnPropertyDescriptors()"></a>Object.getOwnPropertyDescriptors()</h4><p>该方法返回自己(非继承)的所有属性描述符，JavaScript中的任何对象都有一组属性，每个属性都有一个描述符，描述符是属性的一组属性(attributes)，由以下部分组成：</p><ul><li>value: 熟悉的value值</li><li>writable: 属性是否可以被更改</li><li>get: 属性的getter函数, 当属性读取时被调用</li><li>set: 属性的setter函数, 当属性设置值时被调用</li><li>configurable: 如果为false, 不能删除该属性，除了它的value值以为，也不能更改任何属性。</li><li>enumerable: 该属性是否能枚举</li></ul><p>Object.getOwnPropertyDescriptors(obj)接受一个对象，并返回一个带有描述符集合的对象。</p><h4 id="In-what-way-is-this-useful"><a href="#In-what-way-is-this-useful" class="headerlink" title="In what way is this useful?"></a>In what way is this useful?</h4><p>ES6给我们提供了Object.assign()方法，它从一个一个或多个对象中复制所有可枚举的属性值，并返回一个新对象。</p><p>但是，这也存在着一个问题，因为它不能正确的复制一个具有非默认属性值的属性。</p><p>如果对象只有一个setter，那么它就不会正确的复制到一个新对象上，使用Object.assign()进行如下操作：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const person1 = &#123;</span><br><span class="line">    set name(newName) &#123;</span><br><span class="line">        console.log(newName)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这将不会起作用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const person2 = &#123;&#125;</span><br><span class="line">Object.assign(person2, person1)</span><br></pre></td></tr></table></figure><p>但这将会起作用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const person3 = &#123;&#125;</span><br><span class="line">Object.defineProperties(person3,</span><br><span class="line">  Object.getOwnPropertyDescriptors(person1))</span><br></pre></td></tr></table></figure><p>通过一个简单的console控制台，你可以查看以下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">person1.name = &#x27;x&#x27;</span><br><span class="line">&quot;x&quot;</span><br><span class="line">person2.name = &#x27;x&#x27;</span><br><span class="line">person3.name = &#x27;x&#x27;</span><br><span class="line">&quot;x&quot;</span><br></pre></td></tr></table></figure><p>person2没有setter，它没能复制进去，对象的浅复制限定也出现在Object.create()方法中。</p><h4 id="尾逗号"><a href="#尾逗号" class="headerlink" title="尾逗号"></a>尾逗号</h4><p>该特性允许在函数定义时有尾逗号，在函数使用时可以有尾逗号：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const doSomething = (var1, var2,) =&gt; &#123;</span><br><span class="line">  //...</span><br><span class="line">&#125;</span><br><span class="line">doSomething(&#x27;test2&#x27;, &#x27;test2&#x27;,)</span><br></pre></td></tr></table></figure><p>该改变将鼓励开发者停止“在一行开始时写逗号”的丑陋习惯</p><h4 id="异步函数"><a href="#异步函数" class="headerlink" title="异步函数"></a>异步函数</h4><p>JavaScript在很短的时间内从回调函数进化到Promise函数(ES2015)，并自从ES2017以来，异步JavaScript的async/wait语法变得更加简单。 异步函数是Promise和generator的结合，基本上，它是比Promise更高级的抽象，我再重复一般：async/await是基于Promise建立的</p><h5 id="为什么要引入async-await"><a href="#为什么要引入async-await" class="headerlink" title="为什么要引入async/await"></a>为什么要引入async/await</h5><p>它减少了围绕promise的引用，并打破了Promise — “不要打断链式调用”的限制。</p><p>当Promise在ES2015中引入时，它的本意是来解决异步代码的问题，它也确实做到了，但在ES2015和ES2017间隔的这两年中，大家意识到：Promise不是解决问题的终极方案。</p><p>Promise是为了解决著名的回调地狱而被引入的，但它本身也带来了使用复杂性和语法复杂性。</p><p>Promise是很好的原生特性，围绕着它开发人员可以探索出更好的语法，因此当时机成熟后，我们得到了async函数</p><p>async函数使代码看起来像是同步函数一样，但其背后却是异步和非堵塞的。</p><h5 id="它如何工作"><a href="#它如何工作" class="headerlink" title="它如何工作"></a>它如何工作</h5><p>一个async函数会返回一个promise，如下例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const doSomethingAsync = () =&gt; &#123;</span><br><span class="line">  return new Promise(resolve =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; resolve(&#x27;I did something&#x27;), 3000)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当你想要调用该函数时，你在前面加上了一个wait，这样调用就会被停止，直到该promise进行resolve或reject，需注意的是：外层函数必须定义为async，这是例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const doSomething = async () =&gt; &#123;</span><br><span class="line">  console.log(await doSomethingAsync())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="一个上手示例"><a href="#一个上手示例" class="headerlink" title="一个上手示例"></a>一个上手示例</h5><p>这是一个使用async/await进行异步函数的简单示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const doSomethingAsync = () =&gt; &#123;</span><br><span class="line">  return new Promise(resolve =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; resolve(&#x27;I did something&#x27;), 3000)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">const doSomething = async () =&gt; &#123;</span><br><span class="line">  console.log(await doSomethingAsync())</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;Before&#x27;)</span><br><span class="line">doSomething()</span><br><span class="line">console.log(&#x27;After&#x27;)</span><br></pre></td></tr></table></figure><p>上面的代码将会在浏览器的console中打印出如下结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Before</span><br><span class="line">After</span><br><span class="line">I did something //after 3s</span><br></pre></td></tr></table></figure><h4 id="关于-Promise"><a href="#关于-Promise" class="headerlink" title="关于 Promise"></a>关于 Promise</h4><p>将 async 关键字标记在任何函数上，意味着这个函数都将返回一个 Promise，即使这个函数没有显式的返回，它在内部也会返回一个 Promise，这就是下面这份代码有效的原因：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const aFunction = async () =&gt; &#123;</span><br><span class="line">  return &#x27;test&#x27;</span><br><span class="line">&#125;</span><br><span class="line">aFunction().then(alert) // This will alert &#x27;test&#x27;</span><br></pre></td></tr></table></figure><p>下面的例子也一样:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const aFunction = async () =&gt; &#123;</span><br><span class="line">  return Promise.resolve(&#x27;test&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">aFunction().then(alert) // This will alert &#x27;test&#x27;</span><br></pre></td></tr></table></figure><h5 id="更易于阅读的代码"><a href="#更易于阅读的代码" class="headerlink" title="更易于阅读的代码"></a>更易于阅读的代码</h5><p>正如上述的例子，我们将它与普通回调函数或链式函数进行比较，我们的代码看起来非常的简单。</p><p>这是一个很简单的例子，当代码足够复杂时，它会产生更多的收益。</p><p>例如，使用 Promise 来获取 JSON 资源并解析它：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const getFirstUserData = () =&gt; &#123;</span><br><span class="line">  return fetch(&#x27;/users.json&#x27;) // get users list</span><br><span class="line">    .then(response =&gt; response.json()) // parse JSON</span><br><span class="line">    .then(users =&gt; users[0]) // pick first user</span><br><span class="line">    .then(user =&gt; fetch(`/users/$&#123;user.name&#125;`)) // get user data</span><br><span class="line">    .then(userResponse =&gt; response.json()) // parse JSON</span><br><span class="line">&#125;</span><br><span class="line">getFirstUserData()</span><br></pre></td></tr></table></figure><p>这是使用 async/await 实现相同功能的例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const getFirstUserData = async () =&gt; &#123;</span><br><span class="line">  const response = await fetch(&#x27;/users.json&#x27;) // get users list</span><br><span class="line">  const users = await response.json() // parse JSON</span><br><span class="line">  const user = users[0] // pick first user</span><br><span class="line">  const userResponse = await fetch(`/users/$&#123;user.name&#125;`) // get user data</span><br><span class="line">  const userData = await user.json() // parse JSON</span><br><span class="line">  return userData</span><br><span class="line">&#125;</span><br><span class="line">getFirstUserData()</span><br></pre></td></tr></table></figure><h5 id="串行多个异步功能"><a href="#串行多个异步功能" class="headerlink" title="串行多个异步功能"></a>串行多个异步功能</h5><p>async 函数非常容易，并且它的语法比 Promise 更易读。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const promiseToDoSomething = () =&gt; &#123;</span><br><span class="line">  return new Promise(resolve =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; resolve(&#x27;I did something&#x27;), 10000)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">const watchOverSomeoneDoingSomething = async () =&gt; &#123;</span><br><span class="line">  const something = await promiseToDoSomething()</span><br><span class="line">  return something + &#x27; and I watched&#x27;</span><br><span class="line">&#125;</span><br><span class="line">const watchOverSomeoneWatchingSomeoneDoingSomething = async () =&gt; &#123;</span><br><span class="line">  const something = await watchOverSomeoneDoingSomething()</span><br><span class="line">  return something + &#x27; and I watched as well&#x27;</span><br><span class="line">&#125;</span><br><span class="line">watchOverSomeoneWatchingSomeoneDoingSomething().then(res =&gt; &#123;</span><br><span class="line">  console.log(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>打印结果:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I did something and I watched and I watched as well</span><br></pre></td></tr></table></figure><h4 id="更简单的调试"><a href="#更简单的调试" class="headerlink" title="更简单的调试"></a>更简单的调试</h4><p>调试 Promise 就很困难，因为调试器无法跨越异步代码，但调试 async/await 就非常的简单，调试器会像调试同步代码一样来处理它。</p><h5 id="共享内存和原子"><a href="#共享内存和原子" class="headerlink" title="共享内存和原子"></a>共享内存和原子</h5><p>WebWorkers 可以在浏览器中创建多线程程序。</p><p>它们通过事件的方式来传递消息，从 ES2017 开始，你可以使用 SharedArrayBuffer 在每一个 Worker 中和它们的创建者之间共享内存数组.</p><p>由于不知道写入内存部分需要多长的周期来广播，因此在读取值时，任何类型的写入操作都会完成，Atomics 可以避免竞争条件的发生。</p><p>关于它的更多细节可以在proposal中找到。</p><p>这是 ES2017，接下来我将介绍 ES2018 的功能。</p><h5 id="Rest-Spread-Properties"><a href="#Rest-Spread-Properties" class="headerlink" title="Rest/Spread Properties"></a>Rest/Spread Properties</h5><p>ES2015 引入了解构数组的方法，当你使用时：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const numbers = [1, 2, 3, 4, 5]</span><br><span class="line">[first, second, ...others] = numbers</span><br></pre></td></tr></table></figure><p>and 展开参数:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const numbers = [1, 2, 3, 4, 5]</span><br><span class="line">const sum = (a, b, c, d, e) =&gt; a + b + c + d + e</span><br><span class="line">const sum = sum(...numbers)</span><br></pre></td></tr></table></figure><p>ES2018 为对象引入了同样的功能。</p><p>解构:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const &#123; first, second, ...others &#125; = &#123; first: 1, second: 2, third: 3, fourth: 4, fifth: 5 &#125;</span><br><span class="line">first // 1</span><br><span class="line">second // 2</span><br><span class="line">others // &#123; third: 3, fourth: 4, fifth: 5 &#125;</span><br></pre></td></tr></table></figure><p>展开属性 允许通过组合在展开运算符之后传递的对象属性而创建新对象：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const items = &#123; first, second, ...others &#125;</span><br><span class="line">items //&#123; first: 1, second: 2, third: 3, fourth: 4, fifth: 5 &#125;</span><br></pre></td></tr></table></figure><h5 id="异步迭代器"><a href="#异步迭代器" class="headerlink" title="异步迭代器"></a>异步迭代器</h5><p>for-await-of 允许你使用异步可迭代对象做为循环迭代：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for await (const line of readLines(filePath)) &#123;</span><br><span class="line">  console.log(line)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为它使用的了 await，因此你只能在 async 函数中使用它。</p><h5 id="Promise-prototype-finally"><a href="#Promise-prototype-finally" class="headerlink" title="Promise.prototype.finally()"></a>Promise.prototype.finally()</h5><p>当一个 Promise 是 fulfilled 时，它会一个接一个的调用 then。</p><p>如果在这个过程中发生了错误，则会跳过 then 而执行 catch。</p><p>而 finally() 允许你运行一些代码，无论是成功还是失败：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fetch(&#x27;file.json&#x27;)</span><br><span class="line">  .then(data =&gt; data.json())</span><br><span class="line">  .catch(error =&gt; console.error(error))</span><br><span class="line">  .finally(() =&gt; console.log(&#x27;finished&#x27;))</span><br></pre></td></tr></table></figure><h5 id="正则表达式改进"><a href="#正则表达式改进" class="headerlink" title="正则表达式改进"></a>正则表达式改进</h5><p>ES2018 对正则表达式引入了许多改进，这些都可以在 <a href="https://flaviocopes.com/javascript-regular-expressions/">https://flaviocopes.com/javascript-regular-expressions/</a> 上找到。</p><p>以下是关于 ES2018 正则表达式改进的具体补充：</p><p>RegExp lookbehind assertions: 根据前面的内容匹配字符串</p><p>这是一个 lookahead: 你可以使用 ?= 来匹配字符串，后面跟随一个特定的字符串：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/Roger(?=Waters)/</span><br><span class="line">/Roger(?= Waters)/.test(&#x27;Roger is my dog&#x27;) //false</span><br><span class="line">/Roger(?= Waters)/.test(&#x27;Roger is my dog and Roger Waters is a famous musician&#x27;) //true</span><br></pre></td></tr></table></figure><p>?! 可以执行逆操作，如果匹配的字符串是no而不是在此后跟随特定的子字符串的话：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/Roger(?!Waters)/</span><br><span class="line">/Roger(?! Waters)/.test(&#x27;Roger is my dog&#x27;) //true</span><br><span class="line">/Roger(?! Waters)/.test(&#x27;Roger Waters is a famous musician&#x27;) //false</span><br></pre></td></tr></table></figure><p>Lookaheads 使用 ?= Symbol，它们已经可以用了。</p><p>Lookbehinds, 是一个新功能使用?&lt;=.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;=Roger) Waters/</span><br><span class="line">/(?&lt;=Roger) Waters/.test(&#x27;Pink Waters is my dog&#x27;) //false</span><br><span class="line">/(?&lt;=Roger) Waters/.test(&#x27;Roger is my dog and Roger Waters is a famous musician&#x27;) //true</span><br></pre></td></tr></table></figure><p>如果一个 lookbehind 是否定，那么使用 ?&gt;!:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;!Roger) Waters/</span><br><span class="line">/(?&lt;!Roger) Waters/.test(&#x27;Pink Waters is my dog&#x27;) //true</span><br><span class="line">/(?&lt;!Roger) Waters/.test(&#x27;Roger is my dog and Roger Waters is a famous musician&#x27;) //false</span><br></pre></td></tr></table></figure><h5 id="Unicode属性转义-p-…-and-P-…"><a href="#Unicode属性转义-p-…-and-P-…" class="headerlink" title="Unicode属性转义 \p{…} and \P{…}"></a>Unicode属性转义 \p{…} and \P{…}</h5><p>在正则表达式模式中，你可以使用 \d 来匹配任意的数字，\s 来匹配任意不是空格的字符串，\w 来匹配任意字母数字字符串，以此类推。</p><blockquote><p>This new feature extends this concept to all Unicode characters introducing \p{} and is negation \P{}.</p></blockquote><p>这个新功能扩展了unicode字符，引入了 \p{} 来处理</p><p>任何 unicode 字符都有一组属性，例如 script 确认语言，ASCII 是一个布尔值用于检查 ASCII 字符。你可以将此属性方在() 中，正则表达式将来检查是否为真。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/^\p&#123;ASCII&#125;+$/u.test(&#x27;abc&#x27;)   //✅</span><br><span class="line">/^\p&#123;ASCII&#125;+$/u.test(&#x27;ABC@&#x27;)  //✅</span><br><span class="line">/^\p&#123;ASCII&#125;+$/u.test(&#x27;ABC🙃&#x27;) //❌</span><br></pre></td></tr></table></figure><p>ASCII_Hex_Digit 是另一个布尔值，用于检查字符串是否包含有效的十六进制数字：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/^\p&#123;ASCII_Hex_Digit&#125;+$/u.test(&#x27;0123456789ABCDEF&#x27;) //✅</span><br><span class="line">/^\p&#123;ASCII_Hex_Digit&#125;+$/u.test(&#x27;h&#x27;)                //❌</span><br></pre></td></tr></table></figure><p>此外，还有很多其它的属性。你可以在()中添加它们的名字来检查它们，包括 Uppercase, Lowercase, White_Space, Alphabetic, Emoji等等：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/^\p&#123;Lowercase&#125;$/u.test(&#x27;h&#x27;) //✅</span><br><span class="line">/^\p&#123;Uppercase&#125;$/u.test(&#x27;H&#x27;) //✅</span><br><span class="line">/^\p&#123;Emoji&#125;+$/u.test(&#x27;H&#x27;)   //❌</span><br><span class="line">/^\p&#123;Emoji&#125;+$/u.test(&#x27;🙃🙃&#x27;) //✅</span><br></pre></td></tr></table></figure><p>除了二进制属性外，你还可以检查任何 unicode 字符属性以匹配特定的值，在这个例子中，我检查字符串是用希腊语还是拉丁字母写的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/^\p&#123;Script=Greek&#125;+$/u.test(&#x27;ελληνικά&#x27;) //✅</span><br><span class="line">/^\p&#123;Script=Latin&#125;+$/u.test(&#x27;hey&#x27;) //✅</span><br></pre></td></tr></table></figure><p>阅读<a href="https://github.com/tc39/proposal-regexp-unicode-property-escapes">https://github.com/tc39/proposal-regexp-unicode-property-escapes</a> 获取使用所有属性的详细信息。</p><p>Named capturing groups<br>In ES2018 a capturing group can be assigned to a name, rather than just being assigned a slot in the result array:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const re = /(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/</span><br><span class="line">const result = re.exec(&#x27;2015-01-02&#x27;)</span><br><span class="line">// result.groups.year === &#x27;2015&#x27;;</span><br><span class="line">// result.groups.month === &#x27;01&#x27;;</span><br><span class="line">// result.groups.day === &#x27;02&#x27;;</span><br><span class="line">The s flag for regular expressions</span><br><span class="line">The s flag, short for single line, causes the . to match new line characters as well. Without it, the dot matches regular characters but not the new line:</span><br><span class="line"></span><br><span class="line">/hi.welcome/.test(&#x27;hi\nwelcome&#x27;) // false</span><br><span class="line">/hi.welcome/s.test(&#x27;hi\nwelcome&#x27;) // true</span><br></pre></td></tr></table></figure><h4 id="ESNext-1"><a href="#ESNext-1" class="headerlink" title="ESNext"></a>ESNext</h4><p>什么是 ESNext ？</p><p>ESNext 是一个始终指向下一个版本 JavaScript 的名称。</p><p>当前的 ECMAScript 版本是 ES2018，它于2018年6月被发布。</p><p>历史上 JavaScript 标准化的版本都是在夏季被发布，因此我们可以预期 ECMAScript 2019 将于 2019 年的夏季被发布。</p><p>所以在编写本文时 ES2018 已经被发布，因此 ESNext 指的是 ES2019。</p><p>ECMAScript 标准的提案是分阶段组织的，第一到第三阶段属于功能性的孵化，第四阶段的功能才最终确定为新标准的一部分。</p><p>在编写本文时主要浏览器都实现了第四阶段大部分的功能，因此我将在本文中介绍它们。</p><p>其中一些变化主要在内部使用，但知道发生了什么这也很好。</p><p>第三阶段还有一些其它功能，可能会在接下来的几个月内升级到第四阶段，你可以在这个 Github 仓库中查看它们：<a href="https://github.com/tc39/proposals%E3%80%82">https://github.com/tc39/proposals。</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.&#123;flat,flatMap&#125;</span><br></pre></td></tr></table></figure><p>flat() 是一个新的数组实例方法，它可以将多维数组转化成一维数组。</p><p>例子:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;Dog&#x27;, [&#x27;Sheep&#x27;, &#x27;Wolf&#x27;]].flat()</span><br><span class="line">//[ &#x27;Dog&#x27;, &#x27;Sheep&#x27;, &#x27;Wolf&#x27; ]</span><br></pre></td></tr></table></figure><p>默认情况下它只能将二维的数组转化成一维的数组，但你可以添加一个参数来确定要展开的级别，如果你将这个参数设置为 Infinity 那么它将展开无限的级别到一维数组：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;Dog&#x27;, [&#x27;Sheep&#x27;, [&#x27;Wolf&#x27;]]].flat()</span><br><span class="line">//[ &#x27;Dog&#x27;, &#x27;Sheep&#x27;, [ &#x27;Wolf&#x27; ] ]</span><br><span class="line">[&#x27;Dog&#x27;, [&#x27;Sheep&#x27;, [&#x27;Wolf&#x27;]]].flat(2)</span><br><span class="line">//[ &#x27;Dog&#x27;, &#x27;Sheep&#x27;, &#x27;Wolf&#x27; ]</span><br><span class="line">[&#x27;Dog&#x27;, [&#x27;Sheep&#x27;, [&#x27;Wolf&#x27;]]].flat(Infinity)</span><br><span class="line">//[ &#x27;Dog&#x27;, &#x27;Sheep&#x27;, &#x27;Wolf&#x27; ]</span><br></pre></td></tr></table></figure><p>如果你熟悉数组的 map 方法，那么你就知道使用它可以对数组的每个元素执行一个函数。</p><p>flatMap() 是一个新的数组实例方法，它将 flat() 和 map 结合了起来，当你期望在map函数中做一些处理时这非常有用，同时又希望结果如同 flat ：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;My dog&#x27;, &#x27;is awesome&#x27;].map(words =&gt; words.split(&#x27; &#x27;))</span><br><span class="line">//[ [ &#x27;My&#x27;, &#x27;dog&#x27; ], [ &#x27;is&#x27;, &#x27;awesome&#x27; ] ]</span><br><span class="line">[&#x27;My dog&#x27;, &#x27;is awesome&#x27;].flatMap(words =&gt; words.split(&#x27; &#x27;))</span><br><span class="line">//[ &#x27;My&#x27;, &#x27;dog&#x27;, &#x27;is&#x27;, &#x27;awesome&#x27; ]</span><br></pre></td></tr></table></figure><h5 id="Optional-catch-binding"><a href="#Optional-catch-binding" class="headerlink" title="Optional catch binding"></a>Optional catch binding</h5><p>有时候我们并不需要将参数绑定到 try/catch 中。</p><p>在以前我们不得不这样做：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">  //...</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">  //handle error</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>即使我们从来没有通过 e 来分析错误，但现在我们可以简单的省略它：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">  //...</span><br><span class="line">&#125; catch &#123;</span><br><span class="line">  //handle error</span><br><span class="line">&#125;</span><br><span class="line">Object.fromEntries()</span><br><span class="line">Objects have an entries() method, since ES2017.</span><br></pre></td></tr></table></figure><p>从 ES2017 开始 Object将有一个 entries() 方法。</p><p>它将返回一个包含所有对象自身属性的数组的数组，如[key, value]：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const person = &#123; name: &#x27;Fred&#x27;, age: 87 &#125;</span><br><span class="line">Object.entries(person) // [[&#x27;name&#x27;, &#x27;Fred&#x27;], [&#x27;age&#x27;, 87]]</span><br></pre></td></tr></table></figure><p>ES2019 引入了一个新的 Object.fromEntries() 方法，它可以从上述的属性数组中创建一个新的对象：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const person = &#123; name: &#x27;Fred&#x27;, age: 87 &#125;</span><br><span class="line">const entries = Object.entries(person)</span><br><span class="line">const newPerson = Object.fromEntries(entries)</span><br><span class="line"></span><br><span class="line">person !== newPerson //true</span><br><span class="line">String.prototype.&#123;trimStart,trimEnd&#125;</span><br></pre></td></tr></table></figure><p>这些功能已经被 v8/Chrome 实现了近一年的时间，它将在 ES2019 中实现标准化。</p><h5 id="trimStart"><a href="#trimStart" class="headerlink" title="trimStart()"></a>trimStart()</h5><p>删除字符串首部的空格并返回一个新的字符串：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;Testing&#x27;.trimStart() //&#x27;Testing&#x27;</span><br><span class="line">&#x27; Testing&#x27;.trimStart() //&#x27;Testing&#x27;</span><br><span class="line">&#x27; Testing &#x27;.trimStart() //&#x27;Testing &#x27;</span><br><span class="line">&#x27;Testing&#x27;.trimStart() //&#x27;Testing&#x27;</span><br></pre></td></tr></table></figure><h5 id="trimEnd"><a href="#trimEnd" class="headerlink" title="trimEnd()"></a>trimEnd()</h5><p>删除字符串尾部的空格并返回一个新的字符串：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;Testing&#x27;.trimEnd() //&#x27;Testing&#x27;</span><br><span class="line">&#x27; Testing&#x27;.trimEnd() //&#x27; Testing&#x27;</span><br><span class="line">&#x27; Testing &#x27;.trimEnd() //&#x27; Testing&#x27;</span><br><span class="line">&#x27;Testing &#x27;.trimEnd() //&#x27;Testing&#x27;</span><br></pre></td></tr></table></figure><h5 id="Symbol-prototype-description"><a href="#Symbol-prototype-description" class="headerlink" title="Symbol.prototype.description"></a>Symbol.prototype.description</h5><p>现在你可以使用 description 来获取 Symbol 的值，而不必使用 toString() 方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const testSymbol = Symbol(&#x27;Test&#x27;)</span><br><span class="line">testSymbol.description // &#x27;Test&#x27;</span><br></pre></td></tr></table></figure><h5 id="JSON-improvements"><a href="#JSON-improvements" class="headerlink" title="JSON improvements"></a>JSON improvements</h5><p>在此之前 JSON 字符串中不允许使用分隔符（\u2028）和分隔符（\u2029）。</p><p>使用 JSON.parse 时，这些字符会导致一个 SyntaxError 错误，但现在它们可以正确的解析并如 JSON 标准定义的那样。</p><h5 id="Well-formed-JSON-stringify"><a href="#Well-formed-JSON-stringify" class="headerlink" title="Well-formed JSON.stringify()"></a>Well-formed JSON.stringify()</h5><p>修复 JSON.stringify() 在处理 UTF-8 code points (U+D800 to U+DFFF)。</p><p>在修复之前，调用 JSON.stringify() 将返回格式错误的 Unicode 字符，如（a “�”)。</p><p>现在你可以安全放心的使用 JSON.stringify() 转成字符串，也可以使用 JSON.parse() 将它转换回原始表示的形态。</p><h5 id="Function-prototype-toString"><a href="#Function-prototype-toString" class="headerlink" title="Function.prototype.toString()"></a>Function.prototype.toString()</h5><p>函数总会有一个 toString 方法，它将返回一个包含函数代码的字符串。</p><p>ES2019 对返回值做了修改，以避免剥离注释和其它字符串（如：空格），将更准确的表示函数的定义。</p><blockquote><p>If previously we had</p></blockquote><p>以前也许我们这样过：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function /* this is bar */ bar () &#123;&#125;</span><br></pre></td></tr></table></figure><p>当时的行为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bar.toString() //&#x27;function bar() &#123;&#125;</span><br></pre></td></tr></table></figure><p>现在的行为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bar.toString(); // &#x27;function /* this is bar */ bar () &#123;&#125;&#x27;</span><br></pre></td></tr></table></figure><p>总结一下，我希望这篇文章可以帮助你了解一些最新的 JavaScript 以及我们在 2019 年即将看见的内容。</p>]]></content>
    
    
    <summary type="html">ES-next使用说明</summary>
    
    
    
    <category term="前端" scheme="https://blog.lovelee.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="ES6" scheme="https://blog.lovelee.cn/tags/ES6/"/>
    
    <category term="ES-next" scheme="https://blog.lovelee.cn/tags/ES-next/"/>
    
  </entry>
  
  <entry>
    <title>Express使用说明</title>
    <link href="https://blog.lovelee.cn/2022/09/18/Express/"/>
    <id>https://blog.lovelee.cn/2022/09/18/Express/</id>
    <published>2022-09-18T04:54:00.444Z</published>
    <updated>2022-09-18T04:54:00.444Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h1><p>Express 是一个简洁、灵活的 node.js Web 应用开发框架, 它提供一系列强大的特性，帮助你创建各种 Web 和移动设备应用。丰富的 HTTP 快捷方法和任意排列组合的 Connect 中间件，让你创建健壮、友好的 API 变得既快速又简单。此文章会讲解express常用方法以及实现的原理.<br><a href="https://zhufengzhufeng.github.io/img/node.png"><img src="https://zhufengzhufeng.github.io/img/node.png" alt="img"></a></p><h2 id="1-Express介绍"><a href="#1-Express介绍" class="headerlink" title="1.Express介绍"></a>1.Express介绍</h2><p>Express 是一个小巧且灵活的 Node.js Web应用框架，它有一套健壮的特性，可用于开发单页、多页和混合Web应用。</p><h2 id="2-express的应用"><a href="#2-express的应用" class="headerlink" title="2.express的应用"></a>2.express的应用</h2><h3 id="2-1-安装express"><a href="#2-1-安装express" class="headerlink" title="2.1 安装express"></a>2.1 安装express</h3><ul><li><p>npm安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install express</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-2-使用express"><a href="#2-2-使用express" class="headerlink" title="2.2 使用express"></a>2.2 使用express</h3><ul><li><p>创建http服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//引入express</span><br><span class="line">var express = require(&#x27;express&#x27;);</span><br><span class="line">//执行express**函数</span><br><span class="line">var app = express();</span><br><span class="line">//监听端口</span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-3-express的get方法"><a href="#2-3-express的get方法" class="headerlink" title="2.3 express的get方法"></a>2.3 express的get方法</h3><ul><li><p>根据请求路径来处理客户端发出的GET请求</p></li><li><p>第一个参数path为请求的路径</p></li><li><p>第二个参数为处理请求的回调函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.get(path,function(req, res));</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-3-1-get方法的使用"><a href="#2-3-1-get方法的使用" class="headerlink" title="2.3.1 get方法的使用"></a>2.3.1 get方法的使用</h4><ul><li><p>get方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//引入express</span><br><span class="line">var express = require(&#x27;./express&#x27;);</span><br><span class="line">//执行express函数</span><br><span class="line">var app = express();</span><br><span class="line">//监听端口</span><br><span class="line">app.get(&#x27;/hello&#x27;, function (req,res) &#123;</span><br><span class="line">   res.end(&#x27;hello&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(&#x27;/world&#x27;, function (req,res) &#123;</span><br><span class="line">    res.end(&#x27;world&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(&#x27;*&#x27;, function (req,res) &#123;</span><br><span class="line">    res.setHeader(&#x27;content-type&#x27;,&#x27;text/plain;charset=utf8&#x27;);</span><br><span class="line">    res.end(&#x27;没有找到匹配的路径&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-3-2-get方法实现"><a href="#2-3-2-get方法实现" class="headerlink" title="2.3.2 get方法实现"></a>2.3.2 get方法实现</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">//声明express函数</span><br><span class="line">var express = function () &#123;</span><br><span class="line">    var app = function (req,res) &#123;</span><br><span class="line">        var urlObj  = require(&#x27;url&#x27;).parse(req.url,true);</span><br><span class="line">        var pathname = urlObj.pathname;</span><br><span class="line">        var method = req.method.toLowerCase();</span><br><span class="line">        //找到匹配的路由</span><br><span class="line">        var route = app.routes.find(function (item) &#123;</span><br><span class="line">            return item.path==pathname&amp;&amp;item.method==method;</span><br><span class="line">        &#125;);</span><br><span class="line">        if(route)&#123;</span><br><span class="line">            route.fn(req,res);</span><br><span class="line">        &#125;</span><br><span class="line">        res.end(`CANNOT  $&#123;method&#125; $&#123;pathname&#125;`)</span><br><span class="line">    &#125;;</span><br><span class="line">    //增加监听方法</span><br><span class="line">    app.listen = function (port) &#123;</span><br><span class="line">        require(&#x27;http&#x27;).createServer(app).listen(port);</span><br><span class="line">    &#125;;</span><br><span class="line">    app.routes = [];</span><br><span class="line">    //增加get方法</span><br><span class="line">    app.get = function (path,fn) &#123;</span><br><span class="line">        app.routes.push(&#123;method:&#x27;get&#x27;,path:path,fn:fn&#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    return app;</span><br><span class="line">&#125;;</span><br><span class="line">module.exports = express;</span><br></pre></td></tr></table></figure><h4 id="2-3-3-增加-匹配"><a href="#2-3-3-增加-匹配" class="headerlink" title="2.3.3 增加 * 匹配"></a>2.3.3 增加 * 匹配</h4><ul><li><p>使用 * 匹配所有路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var route = app.routes.find(function (item) &#123;</span><br><span class="line">-      return item.path==pathname&amp;&amp;item.method==method;</span><br><span class="line">+      return (item.path==pathname||item.path==&#x27;*&#x27;)&amp;&amp;item.method==method;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-4-express的post方法"><a href="#2-4-express的post方法" class="headerlink" title="2.4 express的post方法"></a>2.4 express的post方法</h3><ul><li><p>根据请求路径来处理客户端发出的POST请求</p></li><li><p>第一个参数path为请求的路径</p></li><li><p>第二个参数为处理请求的回调函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.post(path,function(req,res));</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-4-1-post的方法使用"><a href="#2-4-1-post的方法使用" class="headerlink" title="2.4.1 post的方法使用"></a>2.4.1 post的方法使用</h4><ul><li><p>post方法的使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//引入express</span><br><span class="line">var express = require(&#x27;./express&#x27;);</span><br><span class="line">//执行express函数</span><br><span class="line">var app = express();</span><br><span class="line">//监听端口</span><br><span class="line">app.post(&#x27;/hello&#x27;, function (req,res) &#123;</span><br><span class="line">   res.end(&#x27;hello&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">app.post(&#x27;*&#x27;, function (req,res) &#123;</span><br><span class="line">    res.end(&#x27;post没找到&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure></li><li><p>通过linux命令发送post请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -X POST http://localhost:3000/hello</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-4-2-post的实现"><a href="#2-4-2-post的实现" class="headerlink" title="2.4.2 post的实现"></a>2.4.2 post的实现</h4><ul><li><p>增加所有请求的方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var methods = [&#x27;get&#x27;,&#x27;post&#x27;,&#x27;delete&#x27;,&#x27;put&#x27;,&#x27;options&#x27;];</span><br><span class="line">methods.forEach(function (method) &#123;</span><br><span class="line">    app[method] = function (path,fn) &#123;</span><br><span class="line">        app.routes.push(&#123;method:method,path:path,fn:fn&#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-5-express的all方法"><a href="#2-5-express的all方法" class="headerlink" title="2.5 express的all方法"></a>2.5 express的all方法</h3><ul><li><p>监听所有的请求方法，可以匹配所有的HTTP动词</p></li><li><p>根据请求路径来处理客户端发出的所有请求</p></li><li><p>第一个参数path为请求的路径</p></li><li><p>第二个参数为处理请求的回调函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.all(path,function(req, res));</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-5-1-all的方法使用"><a href="#2-5-1-all的方法使用" class="headerlink" title="2.5.1 all的方法使用"></a>2.5.1 all的方法使用</h4><ul><li><p>all方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&#x27;./express&#x27;);</span><br><span class="line">var app = express();</span><br><span class="line">app.all(&#x27;/hello&#x27;, function (req,res) &#123;</span><br><span class="line">   res.end(&#x27;hello&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">app.all(&#x27;*&#x27;, function (req,res) &#123;</span><br><span class="line">    res.end(&#x27;没找到&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-5-2-注册所有方法"><a href="#2-5-2-注册所有方法" class="headerlink" title="2.5.2 注册所有方法"></a>2.5.2 注册所有方法</h4><ul><li><p>增加all方法匹配所有method</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+  var methods = [&#x27;get&#x27;,&#x27;post&#x27;,&#x27;delete&#x27;,&#x27;put&#x27;,&#x27;options&#x27;,&#x27;all&#x27;];</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-5-3-all方法的实现"><a href="#2-5-3-all方法的实现" class="headerlink" title="2.5.3 all方法的实现"></a>2.5.3 all方法的实现</h4><ul><li><p>对all方法进行判断</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var route = app.routes.find(function (item) &#123;</span><br><span class="line">-      return (item.path==pathname||item.path==&#x27;*&#x27;)&amp;&amp;item.method==method;</span><br><span class="line">+      return (item.path==pathname||item.path==&#x27;*&#x27;)&amp;&amp;(item.method==method||method==&#x27;all&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-6-中间件"><a href="#2-6-中间件" class="headerlink" title="2.6 中间件"></a>2.6 中间件</h3><p>中间件就是处理HTTP请求的函数，用来完成各种特定的任务，比如检查用户是否登录、检测用户是否有权限访问等，它的特点是:</p><ul><li>一个中间件处理完请求和响应可以把相应数据再传递给下一个中间件</li><li>回调函数的next参数,表示接受其他中间件的调用，函数体中的next(),表示将请求数据继续传递</li><li>可以根据路径来区分返回执行不同的中间件</li></ul><h4 id="2-6-1-中间件的使用方法"><a href="#2-6-1-中间件的使用方法" class="headerlink" title="2.6.1 中间件的使用方法"></a>2.6.1 中间件的使用方法</h4><ul><li><p>增加中间件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&#x27;express&#x27;);</span><br><span class="line">var app = express();</span><br><span class="line">app.use(function (req,res,next) &#123;</span><br><span class="line">    console.log(&#x27;过滤石头&#x27;);</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line">app.use(&#x27;/water&#x27;, function (req,res,next) &#123;</span><br><span class="line">    console.log(&#x27;过滤沙子&#x27;);</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line">app.get(&#x27;/water&#x27;, function (req,res) &#123;</span><br><span class="line">    res.end(&#x27;water&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-6-2-use方法的实现"><a href="#2-6-2-use方法的实现" class="headerlink" title="2.6.2 use方法的实现"></a>2.6.2 use方法的实现</h4><ul><li><p>在路由数组中增加中间件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.use = function (path,fn) &#123;</span><br><span class="line">    if(typeof fn !=&#x27;function&#x27;)&#123;</span><br><span class="line">        fn = path;</span><br><span class="line">        path = &#x27;/&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">    app.routes.push(&#123;method:&#x27;middle&#x27;,path:path,fn:fn&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>app方法中增加Middleware判断</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">- var route = app.routes.find(function (item) &#123;</span><br><span class="line">-    return item.path==pathname&amp;&amp;item.method==method;</span><br><span class="line">- &#125;);</span><br><span class="line">- if(route)&#123;</span><br><span class="line">-     route.fn(req,res);</span><br><span class="line">- &#125;</span><br><span class="line">var index = 0;</span><br><span class="line">function  next()&#123;</span><br><span class="line">    if(index&gt;=app.routes.length)&#123;</span><br><span class="line">         return res.end(`CANNOT  $&#123;method&#125; $&#123;pathname&#125;`);</span><br><span class="line">    &#125;</span><br><span class="line">    var route = app.routes[index++];</span><br><span class="line">    if(route.method == &#x27;middle&#x27;)&#123;</span><br><span class="line">        if(route.path == &#x27;/&#x27;||pathname.startsWith(route.path+&#x27;/&#x27;)|| pathname==route.path)&#123;</span><br><span class="line">            route.fn(req,res,next)</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            next();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        if((route.path==pathname||route.path==&#x27;*&#x27;)&amp;&amp;(route.method==method||route.method==&#x27;all&#x27;))&#123;</span><br><span class="line">            route.fn(req,res);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            next();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">next();</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-6-3-错误中间件"><a href="#2-6-3-错误中间件" class="headerlink" title="2.6.3 错误中间件"></a>2.6.3 错误中间件</h4><ul><li><p>next中可以传递错误，默认执行错误中间件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&#x27;express&#x27;);</span><br><span class="line">var app = express();</span><br><span class="line">app.use(function (req,res,next) &#123;</span><br><span class="line">    console.log(&#x27;过滤石头&#x27;);</span><br><span class="line">    next(&#x27;stone is too big&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">app.use(&#x27;/water&#x27;, function (req,res,next) &#123;</span><br><span class="line">    console.log(&#x27;过滤沙子&#x27;);</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line">app.get(&#x27;/water&#x27;, function (req,res) &#123;</span><br><span class="line">    res.end(&#x27;water&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">app.use(function (err,req,res,next) &#123;</span><br><span class="line">    console.log(err);</span><br><span class="line">    res.end(err);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-6-4-错误中间件的实现"><a href="#2-6-4-错误中间件的实现" class="headerlink" title="2.6.4 错误中间件的实现"></a>2.6.4 错误中间件的实现</h4><ul><li><p>对错误中间件进行处理</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">function  next(err)&#123;</span><br><span class="line">    if(index&gt;=app.routes.length)&#123;</span><br><span class="line">        return res.end(`CANNOT  $&#123;method&#125; $&#123;pathname&#125;`);</span><br><span class="line">    &#125;</span><br><span class="line">    var route = app.routes[index++];</span><br><span class="line">+    if(err)&#123;</span><br><span class="line">+        if(route.method == &#x27;middle&#x27;&amp;&amp;route.fn.length==4)&#123;</span><br><span class="line">+            route.fn(err,req,res,next);</span><br><span class="line">+        &#125;else&#123;</span><br><span class="line">+            next(err);</span><br><span class="line">+        &#125;</span><br><span class="line">+    &#125;else&#123;</span><br><span class="line">        if(route.method == &#x27;middle&#x27;)&#123;</span><br><span class="line">            if(route.path == &#x27;/&#x27;||pathname.startsWith(route.path+&#x27;/&#x27;)|| pathname==route.path)&#123;</span><br><span class="line">                route.fn(req,res,next)</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                next();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            if((route.path==pathname||route.path==&#x27;*&#x27;)&amp;&amp;(route.method==method||route.method==&#x27;all&#x27;))&#123;</span><br><span class="line">                route.fn(req,res);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                next();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">+    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-7-获取参数和查询字符串"><a href="#2-7-获取参数和查询字符串" class="headerlink" title="2.7 获取参数和查询字符串"></a>2.7 获取参数和查询字符串</h3><ul><li><p>req.hostname 返回请求头里取的主机名</p></li><li><p>req.path 返回请求的URL的路径名</p></li><li><p>req.query 查询字符串</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//http://localhost:3000/?a=1</span><br><span class="line">app.get(&#x27;/&#x27;,function(req,res)&#123;</span><br><span class="line">    res.write(JSON.stringify(req.query))</span><br><span class="line">    res.end(req.hostname+&quot; &quot;+req.path);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-7-1-具体实现"><a href="#2-7-1-具体实现" class="headerlink" title="2.7.1 具体实现"></a>2.7.1 具体实现</h4><ul><li><p>对请求增加方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+     req.path = pathname;</span><br><span class="line">+     req.hostname = req.headers[&#x27;host&#x27;].split(&#x27;:&#x27;)[0];</span><br><span class="line">+     req.query = urlObj.query;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-8-获取params参数"><a href="#2-8-获取params参数" class="headerlink" title="2.8 获取params参数"></a>2.8 获取params参数</h3><ul><li><p>req.params 匹配到的所有路径参数组成的对象</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/water/:id/:name/home/:age&#x27;, function (req,res) &#123;</span><br><span class="line">    console.log(req.params);</span><br><span class="line">    res.end(&#x27;water&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-8-1-params实现"><a href="#2-8-1-params实现" class="headerlink" title="2.8.1 params实现"></a>2.8.1 params实现</h4><ul><li><p>增加params属性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">methods.forEach(function (method) &#123;</span><br><span class="line">    app[method] = function (path,fn) &#123;</span><br><span class="line">        var config = &#123;method:method,path:path,fn:fn&#125;;</span><br><span class="line">        if(path.includes(&quot;:&quot;))&#123;</span><br><span class="line">            //是路径参数 转换为正则</span><br><span class="line">            //并且增加params</span><br><span class="line">            var arr = [];</span><br><span class="line">            config.path   = path.replace(/:([^\/]+)/g, function () &#123;</span><br><span class="line">                arr.push(arguments[1]);</span><br><span class="line">                return &#x27;([^\/]+)&#x27;;</span><br><span class="line">            &#125;);</span><br><span class="line">            config.params = arr;</span><br><span class="line">        &#125;</span><br><span class="line">        app.routes.push(config);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line">+ if(route.params)&#123;</span><br><span class="line">+    var matchers = pathname.match(new RegExp(route.path));</span><br><span class="line">+    if(matchers)&#123;</span><br><span class="line">+       var params = &#123;&#125;;</span><br><span class="line">+        for(var i = 0; i&lt;route.params.length;i++)&#123;</span><br><span class="line">+            params[route.params[i]] = matchers[i+1];</span><br><span class="line">+        &#125;</span><br><span class="line">+        req.params = params;</span><br><span class="line">+        route.fn(req,res);</span><br><span class="line">+    &#125;else&#123;</span><br><span class="line">+        next();</span><br><span class="line">+    &#125;</span><br><span class="line">+&#125;else&#123;</span><br><span class="line">    if((route.path==pathname||route.path==&#x27;*&#x27;)&amp;&amp;(route.method==method||route.method==&#x27;all&#x27;))&#123;</span><br><span class="line">        route.fn(req,res);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">+&#125;</span><br><span class="line"> //如果不等于就是路由</span><br><span class="line">if(item.params)&#123;</span><br><span class="line">    //带params</span><br><span class="line">    var arr = pathname.match(new RegExp(item.path));</span><br><span class="line">    if(arr)&#123;</span><br><span class="line">        var obj = &#123;&#125;;</span><br><span class="line">        for(var i = 1; i&lt;=item.params.length;i++)&#123;</span><br><span class="line">            obj[item.params[i-1]] = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        req.params = obj;</span><br><span class="line">        item.fn(req,res);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    if(item.path==pathname||item.path==&#x27;*&#x27;&amp;&amp;item.method ==method)&#123;</span><br><span class="line">        item.fn(req,res);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-9-express中的send方法"><a href="#2-9-express中的send方法" class="headerlink" title="2.9 express中的send方法"></a>2.9 express中的send方法</h3><ul><li><p>参数为要响应的内容,可以智能处理不同类型的数据,在输出响应时会自动进行一些设置，比如HEAD信息、HTTP缓存支持等等</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.send([body]);</span><br></pre></td></tr></table></figure></li><li><p>当参数是一个字符串时，这个方法会设置Content-type为<code>text/html</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/&#x27;, function (req,res) &#123;</span><br><span class="line">    res.send(&#x27;&lt;p&gt;hello world&lt;/p&gt;&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>当参数是一个Array或者Object，这个方法返回json格式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/json&#x27;, function (req,res) &#123;</span><br><span class="line">     res.send(&#123;obj:1&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(&#x27;/arr&#x27;, function (req,res) &#123;</span><br><span class="line"> res.send([1,2,3]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>当参数是一个number类型，这个方法返回对应的状态码短语</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/status&#x27;, function (req,res) &#123;</span><br><span class="line">    res.send(404); //not found</span><br><span class="line">    //res.status(404).send(&#x27;没有找到&#x27;);设置短语</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-9-1-send方法的实现"><a href="#2-9-1-send方法的实现" class="headerlink" title="2.9.1 send方法的实现"></a>2.9.1 send方法的实现</h4><ul><li><p>自定义send方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">res.send = function (msg) &#123;</span><br><span class="line">    if(typeof msg==&#x27;string&#x27;||Buffer.isBuffer(msg))&#123;</span><br><span class="line">        res.contentType(&#x27;text/html&#x27;);</span><br><span class="line">        res.end(msg);</span><br><span class="line">    &#125;else if(typeof msg==&#x27;object&#x27;)&#123;</span><br><span class="line">        res.contentType(&#x27;application/json&#x27;);</span><br><span class="line">        res.end(JSON.stringify(msg));</span><br><span class="line">    &#125;else if(typeof msg == &#x27;number&#x27;)&#123;</span><br><span class="line">        res.contentType(&#x27;text/plain&#x27;);</span><br><span class="line">        var status_code = require(&#x27;_http_server&#x27;).STATUS_CODES</span><br><span class="line">        res.end(status_code[msg]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-模板的应用"><a href="#3-模板的应用" class="headerlink" title="3. 模板的应用"></a>3. 模板的应用</h2><h3 id="3-1-安装ejs"><a href="#3-1-安装ejs" class="headerlink" title="3.1 安装ejs"></a>3.1 安装ejs</h3><ul><li><p>npm安装ejs</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install ejs</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-2-设置模板"><a href="#3-2-设置模板" class="headerlink" title="3.2 设置模板"></a>3.2 设置模板</h3><ul><li><p>使用ejs模版</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&#x27;express&#x27;);</span><br><span class="line">var path = require(&#x27;path&#x27;);</span><br><span class="line">var app = express();</span><br><span class="line">app.set(&#x27;view engine&#x27;,&#x27;ejs&#x27;);</span><br><span class="line">app.set(&#x27;views&#x27;,path.join(__dirname,&#x27;views&#x27;));</span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-3-渲染html"><a href="#3-3-渲染html" class="headerlink" title="3.3 渲染html"></a>3.3 渲染html</h3><ul><li><p>配置成html格式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.set(&#x27;view engine&#x27;,&#x27;html&#x27;)</span><br><span class="line">app.set(&#x27;views&#x27;,path.join(__dirname,&#x27;views&#x27;)); </span><br><span class="line">app.engine(&#x27;html&#x27;,require(&#x27;ejs&#x27;).__express);</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-4-渲染视图"><a href="#3-4-渲染视图" class="headerlink" title="3.4 渲染视图"></a>3.4 渲染视图</h3><ul><li><p>第一个参数 要渲染的模板</p></li><li><p>第二个参数 渲染所需要的数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/&#x27;, function (req,res) &#123;</span><br><span class="line">    res.render(&#x27;hello&#x27;,&#123;title:&#x27;hello&#x27;&#125;,function(err,data)&#123;&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-5-模板的实现"><a href="#3-5-模板的实现" class="headerlink" title="3.5 模板的实现"></a>3.5 模板的实现</h3><ul><li><p>读取模版渲染</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">res.render = function (tmpl,obj,fn) &#123;</span><br><span class="line">        tmpl = tmpl+(tmpl.endsWith(&#x27;.ejs&#x27;)?&#x27;&#x27;:&#x27;.ejs&#x27;);</span><br><span class="line">        var filepath = path.join(app.get(&#x27;views&#x27;),tmpl);</span><br><span class="line">        fs.readFile(filepath,&#x27;utf8&#x27;, function (err,data) &#123;</span><br><span class="line">            data = data.replace(/&lt;%=(\w+)%&gt;/g,function () &#123;</span><br><span class="line">                return obj[arguments[1]];</span><br><span class="line">            &#125;);</span><br><span class="line">            if(typeof fn ==&#x27;function&#x27;)&#123;</span><br><span class="line">                fn(err,data);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                res.end(data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-静态文件服务器"><a href="#4-静态文件服务器" class="headerlink" title="4.静态文件服务器"></a>4.静态文件服务器</h2><ul><li><p>如果要在网页中加载静态文件（css、js、img），就需要另外指定一个存放静态文件的目录，当浏览器发出非HTML文件请求时，服务器端就会到这个目录下去寻找相关文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&#x27;express&#x27;);</span><br><span class="line">var app = express();</span><br><span class="line">var path = require(&#x27;path&#x27;);</span><br><span class="line">app.use(express.static(path.join(__dirname,&#x27;public&#x27;)));</span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure></li></ul><h3 id="4-1-静态文件服务器实现"><a href="#4-1-静态文件服务器实现" class="headerlink" title="4.1 静态文件服务器实现"></a>4.1 静态文件服务器实现</h3><ul><li><p>配置静态服务器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function static(p)&#123;</span><br><span class="line">    return function (req,res,next) &#123;</span><br><span class="line">        var exists = fs.existsSync(p);</span><br><span class="line">        if(exists)&#123;</span><br><span class="line">            fs.createReadStream(path.join(p,req.path)).pipe(res);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            next();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-重定向"><a href="#5-重定向" class="headerlink" title="5.重定向"></a>5.重定向</h2><ul><li><p>redirect方法允许网址的重定向，跳转到指定的url并且可以指定status，默认为302方式。</p></li><li><p>参数1 状态码(可选)</p></li><li><p>参数2 跳转的路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.redirect([status], url);</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-1-redirect使用"><a href="#5-1-redirect使用" class="headerlink" title="5.1 redirect使用"></a>5.1 redirect使用</h3><ul><li><p>使用重定向</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/&#x27;, function (req,res) &#123;</span><br><span class="line">    res.redirect(&#x27;http://www.baidu.com&#x27;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-2-redirect的实现"><a href="#5-2-redirect的实现" class="headerlink" title="5.2 redirect的实现"></a>5.2 redirect的实现</h3><ul><li><p>302重定向</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.use(function (req,res,next) &#123;</span><br><span class="line">    res.redirect = function (url) &#123;</span><br><span class="line">        console.log(url);</span><br><span class="line">        res.statusCode = 302;</span><br><span class="line">        res.setHeader(&#x27;Location&#x27;,&#x27;http://www.baidu.com&#x27;);</span><br><span class="line">        res.end(&#x27;&#x27;);</span><br><span class="line">    &#125;;</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h2 id="6-接收post响应体"><a href="#6-接收post响应体" class="headerlink" title="6. 接收post响应体"></a>6. 接收post响应体</h2><ul><li><p>安装body-parser</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install body-parser</span><br></pre></td></tr></table></figure></li></ul><h3 id="6-1-使用body-parser"><a href="#6-1-使用body-parser" class="headerlink" title="6.1 使用body-parser"></a>6.1 使用body-parser</h3><ul><li><p>接收请求体中的数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/login&#x27;, function (req,res) &#123;</span><br><span class="line">    res.sendFile(&#x27;./login.html&#x27;,&#123;root:__dirname&#125;)</span><br><span class="line">&#125;);</span><br><span class="line">app.post(&#x27;/user&#x27;, function (req,res) &#123;</span><br><span class="line">    console.log(req.body);</span><br><span class="line">    res.send(req.body);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure></li></ul><h3 id="6-2-req-body的实现"><a href="#6-2-req-body的实现" class="headerlink" title="6.2 req.body的实现"></a>6.2 req.body的实现</h3><ul><li><p>实现bodyParser</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function bodyParser () &#123;</span><br><span class="line">    return function (req,res,next) &#123;</span><br><span class="line">        var result = &#x27;&#x27;;</span><br><span class="line">        req.on(&#x27;data&#x27;, function (data) &#123;</span><br><span class="line">            result+=data;</span><br><span class="line">        &#125;);</span><br><span class="line">        req.on(&#x27;end&#x27;, function () &#123;</span><br><span class="line">            try&#123;</span><br><span class="line">                req.body = JSON.parse(result);</span><br><span class="line">            &#125;catch(e)&#123;</span><br><span class="line">                req.body = require(&#x27;querystring&#x27;).parse(result);</span><br><span class="line">            &#125;</span><br><span class="line">            next();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Express&quot;&gt;&lt;a href=&quot;#Express&quot; class=&quot;headerlink&quot; title=&quot;Express&quot;&gt;&lt;/a&gt;Express&lt;/h1&gt;&lt;p&gt;Express 是一个简洁、灵活的 node.js Web 应用开发框架, 它提供一系列强大的特性，</summary>
      
    
    
    
    <category term="服务端" scheme="https://blog.lovelee.cn/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
    
    <category term="nodejs" scheme="https://blog.lovelee.cn/tags/nodejs/"/>
    
    <category term="express" scheme="https://blog.lovelee.cn/tags/express/"/>
    
  </entry>
  
  <entry>
    <title>Vue-cli4+</title>
    <link href="https://blog.lovelee.cn/2022/09/18/Vue-cli4+/"/>
    <id>https://blog.lovelee.cn/2022/09/18/Vue-cli4+/</id>
    <published>2022-09-18T04:54:00.444Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-cli-使用小计"><a href="#Vue-cli-使用小计" class="headerlink" title="Vue-cli 使用小计"></a>Vue-cli 使用小计</h1><blockquote><p>官网: <a href="https://cli.vuejs.org/zh/guide/">https://cli.vuejs.org/zh/guide/</a></p></blockquote><h2 id="vue-cli-版本"><a href="#vue-cli-版本" class="headerlink" title="vue-cli 版本"></a>vue-cli 版本</h2><blockquote><p>@vue/cli 4.5.6</p></blockquote><h2 id="vue-版本"><a href="#vue-版本" class="headerlink" title="vue 版本"></a>vue 版本</h2><blockquote><p>~2.6.0</p></blockquote><h2 id="创建项目后less-或者-css-使用报错。版本不匹配。一般需要降级"><a href="#创建项目后less-或者-css-使用报错。版本不匹配。一般需要降级" class="headerlink" title="创建项目后less 或者 css 使用报错。版本不匹配。一般需要降级"></a>创建项目后less 或者 css 使用报错。版本不匹配。一般需要降级</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">less-loader版本太高，可以卸载重装低版本</span><br><span class="line">卸载重装：npm uninstall less-loader</span><br><span class="line">安装低版本：npm install --save-dev less-loader@4.1.0</span><br><span class="line">在项目的文件package.json可以看到less-loader的版本</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="如果创建项目中途报错"><a href="#如果创建项目中途报错" class="headerlink" title="如果创建项目中途报错"></a>如果创建项目中途报错</h2><blockquote><p>简单暴力的方法解决,卸载所有,清除缓存,再来一次（有很大可能是版本变化导致-主要看错误说明是否涉及版本号）</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm uninstall -g vue</span><br><span class="line">npm uninstall -g vue-cli</span><br><span class="line">npm uninstall -g @vue/cli</span><br><span class="line">npm cache clean --force</span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="默认配置改动，配置了vue-config-js-将public-中默认index-放在根目录"><a href="#默认配置改动，配置了vue-config-js-将public-中默认index-放在根目录" class="headerlink" title="默认配置改动，配置了vue.config.js 将public 中默认index 放在根目录"></a>默认配置改动，配置了vue.config.js 将public 中默认index 放在根目录</h2><hr><h1 id="vue-config-js-文件内容"><a href="#vue-config-js-文件内容" class="headerlink" title="vue.config.js 文件内容"></a>vue.config.js 文件内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;);</span><br><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);</span><br><span class="line">// const CompressionWebpackPlugin = require(&#x27;compression-webpack-plugin&#x27;)</span><br><span class="line">// const productionGzipExtensions = [&#x27;js&#x27;, &#x27;css&#x27;]</span><br><span class="line"></span><br><span class="line">const docEnv = process.env.NODE_ENV;</span><br><span class="line">module.exports = &#123;</span><br><span class="line">    publicPath: docEnv === &#x27;production&#x27; ? &#x27;./&#x27; : &#x27;./&#x27;,</span><br><span class="line">    outputDir: &#x27;dist&#x27;,</span><br><span class="line">    assetsDir: &#x27;assets&#x27;,</span><br><span class="line">    indexPath: &#x27;index.html&#x27;,</span><br><span class="line">    lintOnSave: false,</span><br><span class="line">    runtimeCompiler: true,</span><br><span class="line">    productionSourceMap: false,</span><br><span class="line">    css: &#123;</span><br><span class="line">        sourceMap: false,</span><br><span class="line">        extract: true</span><br><span class="line">    &#125;,</span><br><span class="line">    configureWebpack: &#123;</span><br><span class="line">        resolve: &#123;</span><br><span class="line">            alias: &#123;</span><br><span class="line">                &#x27;@&#x27;: path.resolve(__dirname, &#x27;./src&#x27;),</span><br><span class="line">                &#x27;@base&#x27;: path.resolve(__dirname, &#x27;./&#x27;),</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        plugins: [</span><br><span class="line">            // 下面是下载的插件的配置</span><br><span class="line">            /* new CompressionWebpackPlugin(&#123;</span><br><span class="line">                algorithm: &#x27;gzip&#x27;,</span><br><span class="line">                test: new RegExp(&#x27;\\.(&#x27; + productionGzipExtensions.join(&#x27;|&#x27;) + &#x27;)$&#x27;),</span><br><span class="line">                threshold: 10240,</span><br><span class="line">                minRatio: 0.8</span><br><span class="line">            &#125;), */</span><br><span class="line">            new webpack.optimize.LimitChunkCountPlugin(&#123;</span><br><span class="line">                maxChunks: 5,</span><br><span class="line">                minChunkSize: 1000</span><br><span class="line">            &#125;),</span><br><span class="line">            new HtmlWebpackPlugin(&#123; // 打包输出HTML</span><br><span class="line">                minify: &#123; // 压缩HTML文件</span><br><span class="line">                    removeComments: true, // 移除HTML中的注释</span><br><span class="line">                    collapseWhitespace: true, // 删除空白符与换行符</span><br><span class="line">                    minifyCSS: true// 压缩内联css</span><br><span class="line">                &#125;,</span><br><span class="line">                filename: &#x27;index.html&#x27;,</span><br><span class="line">                template: path.join(__dirname, &#x27;index.html&#x27;)</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    /* chainWebpack: config =&gt; &#123;</span><br><span class="line">        config</span><br><span class="line">        .plugin(&#x27;html&#x27;)</span><br><span class="line">        .tap(args =&gt; &#123;</span><br><span class="line">            args[0].template = path.join(__dirname, &#x27;index.html&#x27;)</span><br><span class="line">            return args</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, */</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        contentBase: path.join(__dirname, &#x27;dist&#x27;),</span><br><span class="line">        compress: false,</span><br><span class="line">        port: 9000,</span><br><span class="line">        clientLogLevel: &#x27;silent&#x27;,</span><br><span class="line">        hot: true,</span><br><span class="line">        index: &#x27;index.html&#x27;,</span><br><span class="line">        inline: true,</span><br><span class="line">        overlay: &#123;</span><br><span class="line">            warnings: true,</span><br><span class="line">            errors: false</span><br><span class="line">        &#125;,</span><br><span class="line">        proxy: &#123;</span><br><span class="line">            &#x27;/api&#x27;: &#123;</span><br><span class="line">                // 此处的写法，目的是为了 将 /api 替换成 https://www.baidu.com/</span><br><span class="line">                // target: &#x27;https://www.baidu.com/&#x27;,</span><br><span class="line">                target: &#x27;https://gs.yuntech.cc/oa/&#x27;,</span><br><span class="line">                // 允许跨域</span><br><span class="line">                changeOrigin: true,</span><br><span class="line">                ws: true,</span><br><span class="line">                pathRewrite: &#123;</span><br><span class="line">                    &#x27;^/api&#x27;: &#x27;&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x27;/service&#x27;: &#123;</span><br><span class="line">                target: &#x27;http://service.yuntech.cc/&#x27;,</span><br><span class="line">                changeOrigin: true,</span><br><span class="line">                ws: true,</span><br><span class="line">                pathRewrite: &#123;</span><br><span class="line">                    &#x27;^/service&#x27;: &#x27;&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="babel-config-js-文件内容"><a href="#babel-config-js-文件内容" class="headerlink" title="babel.config.js 文件内容"></a>babel.config.js 文件内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    &#x27;@vue/cli-plugin-babel/preset&#x27;</span><br><span class="line">  ],</span><br><span class="line">  plugins: [</span><br><span class="line">    </span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="package-json-文件内容"><a href="#package-json-文件内容" class="headerlink" title="package.json 文件内容"></a>package.json 文件内容</h1><blockquote><p>（如果出现问题，有可能是依赖版本不匹配。需要对照lock 文件）</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;yuntech-project&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;0.0.1&quot;,</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;serve&quot;: &quot;vue-cli-service serve&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;vue-cli-service build&quot;,</span><br><span class="line">    &quot;lint&quot;: &quot;vue-cli-service lint&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;axios&quot;: &quot;^0.20.0&quot;,</span><br><span class="line">    &quot;vue&quot;: &quot;^2.6.11&quot;,</span><br><span class="line">    &quot;vue-router&quot;: &quot;^3.2.0&quot;,</span><br><span class="line">    &quot;vuex&quot;: &quot;^3.4.0&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;@vue/cli-plugin-babel&quot;: &quot;~4.5.0&quot;,</span><br><span class="line">    &quot;@vue/cli-plugin-eslint&quot;: &quot;~4.5.0&quot;,</span><br><span class="line">    &quot;@vue/cli-plugin-router&quot;: &quot;~4.5.0&quot;,</span><br><span class="line">    &quot;@vue/cli-plugin-vuex&quot;: &quot;~4.5.0&quot;,</span><br><span class="line">    &quot;@vue/cli-service&quot;: &quot;~4.5.0&quot;,</span><br><span class="line">    &quot;babel-eslint&quot;: &quot;^10.1.0&quot;,</span><br><span class="line">    &quot;babel-plugin-import&quot;: &quot;^1.13.0&quot;,</span><br><span class="line">    &quot;compression-webpack-plugin&quot;: &quot;^6.0.1&quot;,</span><br><span class="line">    &quot;core-js&quot;: &quot;^3.6.5&quot;,</span><br><span class="line">    &quot;eslint&quot;: &quot;^6.7.2&quot;,</span><br><span class="line">    &quot;eslint-plugin-vue&quot;: &quot;^6.2.2&quot;,</span><br><span class="line">    &quot;html-webpack-plugin&quot;: &quot;^4.4.1&quot;,</span><br><span class="line">    &quot;less&quot;: &quot;^3.12.2&quot;,</span><br><span class="line">    &quot;less-loader&quot;: &quot;^7.0.1&quot;,</span><br><span class="line">    &quot;vue-template-compiler&quot;: &quot;^2.6.11&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;eslintConfig&quot;: &#123;</span><br><span class="line">    &quot;root&quot;: true,</span><br><span class="line">    &quot;env&quot;: &#123;</span><br><span class="line">      &quot;node&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;extends&quot;: [</span><br><span class="line">      &quot;plugin:vue/essential&quot;,</span><br><span class="line">      &quot;eslint:recommended&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;parserOptions&quot;: &#123;</span><br><span class="line">      &quot;parser&quot;: &quot;babel-eslint&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;browserslist&quot;: [</span><br><span class="line">    &quot;&gt; 1%&quot;,</span><br><span class="line">    &quot;last 2 versions&quot;,</span><br><span class="line">    &quot;not dead&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Vue-cli-使用小计&quot;&gt;&lt;a href=&quot;#Vue-cli-使用小计&quot; class=&quot;headerlink&quot; title=&quot;Vue-cli 使用小计&quot;&gt;&lt;/a&gt;Vue-cli 使用小计&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;官网: &lt;a href=&quot;http</summary>
      
    
    
    
    <category term="前端" scheme="https://blog.lovelee.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="Vue" scheme="https://blog.lovelee.cn/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>资料收集</title>
    <link href="https://blog.lovelee.cn/2022/09/17/%E8%B5%84%E6%96%99%E6%94%B6%E9%9B%86/"/>
    <id>https://blog.lovelee.cn/2022/09/17/%E8%B5%84%E6%96%99%E6%94%B6%E9%9B%86/</id>
    <published>2022-09-17T20:58:39.000Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<div class="note purple no-icon flat"><p>平时收集到的资料 </p></div><div class="tabs" id="效果分类"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#效果分类-1">css</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="效果分类-1"><ul><li>1、Neumorphism 地址：<a href="https://neumorphism.io/">https://neumorphism.io/</a></li><li>2、带有渐变的图标 地址：<a href="https://www.iconshock.com/svg-icons/">https://www.iconshock.com/svg-icons/</a></li><li>3、Interactions 地址：<a href="https://easings.co/">https://easings.co/</a></li><li>4、大型数据库 地址：<a href="https://bansal.io/pattern-css">https://bansal.io/pattern-css</a></li><li>5、自定义形状分隔线 地址：<a href="https://www.shapedivider.app/">https://www.shapedivider.app/</a></li><li>6、动画 地址：<a href="https://animista.net/">https://animista.net/</a></li><li>7、Mask 地址：<a href="https://bennettfeely.com/">https://bennettfeely.com/</a></li><li>8、动画按钮 地址：<a href="https://tympanus.net/Development/MagneticButtons/index.html">https://tympanus.net/Development/MagneticButtons/index.html</a></li><li>9、背景图案 地址：<a href="https://www.magicpattern.design/tools/css-backgrounds">https://www.magicpattern.design/tools/css-backgrounds</a></li><li>10、SVG波浪 地址：<a href="https://svgwave.in/">https://svgwave.in/</a></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note purple no-icon flat&quot;&gt;&lt;p&gt;平时收集到的资料 &lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;tabs&quot; id=&quot;效果分类&quot;&gt;&lt;ul class=&quot;nav-tabs&quot;&gt;&lt;li class=&quot;tab active&quot;&gt;&lt;butt</summary>
      
    
    
    
    
    <category term="资料收集" scheme="https://blog.lovelee.cn/tags/%E8%B5%84%E6%96%99%E6%94%B6%E9%9B%86/"/>
    
    <category term="css" scheme="https://blog.lovelee.cn/tags/css/"/>
    
    <category term="javascript" scheme="https://blog.lovelee.cn/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>头部nav增加下拉菜单</title>
    <link href="https://blog.lovelee.cn/2022/09/17/%E5%A4%B4%E9%83%A8nav%E5%A2%9E%E5%8A%A0%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95/"/>
    <id>https://blog.lovelee.cn/2022/09/17/%E5%A4%B4%E9%83%A8nav%E5%A2%9E%E5%8A%A0%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95/</id>
    <published>2022-09-17T09:30:49.000Z</published>
    <updated>2022-09-18T04:54:00.448Z</updated>
    
    <content type="html"><![CDATA[<p>参考<a href='https://blog.zhheo.com/'><mark class="hl-label purple">heo</mark> </a>效果</p><div class="fj-gallery"><p><img src="https://img.gejiba.com/images/bf74dac3de8644570c51e67735698bbc.png"></p>          </div><div class="note pink no-icon flat"><h2 id="step1-在-config-yml中增加配置-记得冒号后面的空格哦"><a href="#step1-在-config-yml中增加配置-记得冒号后面的空格哦" class="headerlink" title="step1: 在_config.yml中增加配置(记得冒号后面的空格哦)"></a>step1: 在_config.yml中增加配置(记得冒号后面的空格哦)</h2></div><div class="tabs" id="配置项"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#配置项-1">写法1</button></li><li class="tab"><button type="button" data-href="#配置项-2">写法2</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="配置项-1"><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toggleList:</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title:</span> <span class="string">&#x27;博客相关&#x27;</span>,</span><br><span class="line">    <span class="attr">list:</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">text:</span> <span class="string">&#x27;主页&#x27;</span>,</span><br><span class="line">        <span class="attr">link:</span> <span class="string">&#x27;https://www.addthis.com/&#x27;</span>,</span><br><span class="line">        <span class="attr">src:</span> <span class="string">&#x27;https://p9-passport.byteacctimg.com/img/mosaic-legacy/3791/5070639578~300x300.image&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">text:</span> <span class="string">&#x27;博客&#x27;</span>,</span><br><span class="line">        <span class="attr">link:</span> <span class="string">&#x27;https://www.addthis.com/&#x27;</span>,</span><br><span class="line">        <span class="attr">src:</span> <span class="string">&#x27;https://p9-passport.byteacctimg.com/img/mosaic-legacy/3791/5070639578~300x300.image&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title:</span> <span class="string">&#x27;其他工具&#x27;</span>,</span><br><span class="line">    <span class="attr">list:</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">text:</span> <span class="string">&#x27;腾讯云&#x27;</span>,</span><br><span class="line">        <span class="attr">link:</span> <span class="string">&#x27;https://www.addthis.com/&#x27;</span>,</span><br><span class="line">        <span class="attr">src:</span> <span class="string">&#x27;https://p9-passport.byteacctimg.com/img/mosaic-legacy/3791/5070639578~300x300.image&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><ul><li>根据自己的需要调整自己实际的链接入口</li><li>可以使用post目录规则的相对路径</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="配置项-2"><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toggleList:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">title:</span> <span class="string">标题</span></span><br><span class="line">    <span class="attr">list:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">text:</span> <span class="string">主页</span></span><br><span class="line">        <span class="attr">link:</span> <span class="string">https://www.addthis.com/</span></span><br><span class="line">        <span class="attr">src:</span> <span class="string">https://p9-passport.byteacctimg.com/img/mosaic-legacy/3791/5070639578~300x300.image</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">text:</span> <span class="string">博客</span></span><br><span class="line">        <span class="attr">link:</span> <span class="string">https://www.addthis.com/</span></span><br><span class="line">        <span class="attr">src:</span> <span class="string">https://p9-passport.byteacctimg.com/img/mosaic-legacy/3791/5070639578~300x300.image</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">title:</span> <span class="string">标题2</span></span><br><span class="line">    <span class="attr">list:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">text:</span> <span class="string">美化文档</span></span><br><span class="line">        <span class="attr">link:</span> <span class="string">https://www.addthis.com/</span></span><br><span class="line">        <span class="attr">src:</span> <span class="string">https://p9-passport.byteacctimg.com/img/mosaic-legacy/3791/5070639578~300x300.image</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">text:</span> <span class="string">腾讯云</span></span><br><span class="line">        <span class="attr">link:</span> <span class="string">https://www.addthis.com/</span></span><br><span class="line">        <span class="attr">src:</span> <span class="string">https://p9-passport.byteacctimg.com/img/mosaic-legacy/3791/5070639578~300x300.image</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note pink no-icon flat"><h2 id="step2-themes-butterfly-layout-includes-header-nav-pug-中替换logo部分布局（建议做好原文件备份）"><a href="#step2-themes-butterfly-layout-includes-header-nav-pug-中替换logo部分布局（建议做好原文件备份）" class="headerlink" title="step2: themes\butterfly\layout\includes\header\nav.pug 中替换logo部分布局（建议做好原文件备份）"></a>step2: themes\butterfly\layout\includes\header\nav.pug 中替换logo部分布局（建议做好原文件备份）</h2></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">nav#nav</span><br><span class="line">  div#blog_name</span><br><span class="line">    div.back-home-button</span><br><span class="line">      i.fas.fa-bars.fa-fw</span><br><span class="line">      if (config.toggleList)</span><br><span class="line">      div.back-menu-list-groups</span><br><span class="line">        - let toggleList = config.toggleList</span><br><span class="line">        each group in toggleList</span><br><span class="line">          div.back-menu-list-group</span><br><span class="line">            div.back-menu-list-title= group.title </span><br><span class="line">            div.back-menu-list</span><br><span class="line">              - let list = group.list</span><br><span class="line">              each item in list</span><br><span class="line">                - let link = /http/i.test(item.link)?item.link:url_for(&#x27;/&#x27;)+item.link</span><br><span class="line">                - let src = item.src ? (/http/i.test(item.src)?item.src:url_for(&#x27;/&#x27;)+item.src) : &#x27;https://butterfly.js.org/img/404.jpg&#x27;</span><br><span class="line">                  a.back-menu-item(href=`$&#123;link&#125;`) </span><br><span class="line">                    img.back-menu-item-icon(src=`$&#123;src&#125;`)</span><br><span class="line">                    span.back-menu-item-text #[=item.text]</span><br><span class="line">    a#site-name(href=url_for(&#x27;/&#x27;)) #[=config.title]</span><br></pre></td></tr></table></figure><div class="note pink no-icon flat"><h2 id="step3-在公共css中加入样式，按自己的引用文件自行添加（未使用less的同学请自行拆解为css）"><a href="#step3-在公共css中加入样式，按自己的引用文件自行添加（未使用less的同学请自行拆解为css）" class="headerlink" title="step3: 在公共css中加入样式，按自己的引用文件自行添加（未使用less的同学请自行拆解为css）"></a>step3: 在公共css中加入样式，按自己的引用文件自行添加（未使用less的同学请自行拆解为css）</h2></div><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#nav</span> &#123;</span><br><span class="line">    <span class="selector-id">#blog_name</span> &#123;</span><br><span class="line">        <span class="attribute">flex-wrap</span>: nowrap;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">102</span>;</span><br><span class="line">        <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.back-home-button</span>&#123;</span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#202020</span>;</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">            <span class="selector-class">.back-menu-list-groups</span> &#123;</span><br><span class="line">                <span class="attribute">position</span>: absolute;</span><br><span class="line">                <span class="attribute">top</span>: <span class="number">65px</span>;</span><br><span class="line">                <span class="attribute">left</span>: <span class="number">1.5rem</span>;</span><br><span class="line">                <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">                <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">                <span class="attribute">border</span>: <span class="number">1px</span> solid<span class="number">#e3e8f7</span>;</span><br><span class="line">                <span class="attribute">flex-direction</span>: column;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">                <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">60</span>, <span class="number">60</span>, <span class="number">67</span>, <span class="number">0.6</span>);;</span><br><span class="line">                <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#2c2d300c</span>;</span><br><span class="line">                <span class="attribute">transition</span>: <span class="number">0s</span>;</span><br><span class="line">                <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">                <span class="attribute">pointer-events</span>: none;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">                <span class="selector-class">.back-menu-list-groups</span> &#123;</span><br><span class="line">                    <span class="attribute">display</span>: flex;</span><br><span class="line">                    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">                    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">                    <span class="attribute">top</span>: <span class="number">55px</span>;</span><br><span class="line">                    <span class="attribute">pointer-events</span>: auto;</span><br><span class="line">                    <span class="attribute">left</span>: <span class="number">1.5rem</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-class">.back-menu-list-group</span> &#123;</span><br><span class="line">                <span class="attribute">display</span>: flex;</span><br><span class="line">                <span class="attribute">flex-direction</span>: column;</span><br><span class="line">                <span class="selector-class">.back-menu-list-title</span> &#123;</span><br><span class="line">                    <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">16px</span>;</span><br><span class="line">                    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="selector-class">.back-menu-list</span> &#123;</span><br><span class="line">                    <span class="attribute">display</span>: flex;</span><br><span class="line">                    <span class="attribute">flex-direction</span>: row;</span><br><span class="line">                    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">                    <span class="attribute">width</span>: <span class="number">340px</span>;</span><br><span class="line">                    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">                    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">                        <span class="attribute">position</span>: absolute;</span><br><span class="line">                        <span class="attribute">top</span>: -<span class="number">15px</span>;</span><br><span class="line">                        <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">                        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">                        <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">                        <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="selector-class">.back-menu-item</span> &#123;</span><br><span class="line">                        <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">                        <span class="attribute">display</span>: flex;</span><br><span class="line">                        <span class="attribute">align-items</span>: center;</span><br><span class="line">                        <span class="attribute">margin</span>: <span class="number">4px</span> <span class="number">8px</span>;</span><br><span class="line">                        <span class="attribute">padding</span>: <span class="number">4px</span> <span class="number">8px</span>;</span><br><span class="line">                        <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">                        <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">                        <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">                        <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">                            <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">                            <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">9</span>);</span><br><span class="line">                            <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">                            <span class="selector-class">.back-menu-item-text</span>&#123;</span><br><span class="line">                                <span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="selector-class">.back-menu-item-icon</span> &#123;</span><br><span class="line">                            <span class="attribute">width</span>: <span class="number">24px</span>;</span><br><span class="line">                            <span class="attribute">height</span>: <span class="number">24px</span>;</span><br><span class="line">                            <span class="attribute">border-radius</span>: <span class="number">24px</span>;</span><br><span class="line">                            <span class="attribute">background</span>: <span class="number">#f1f3f8</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="selector-class">.back-menu-item-text</span> &#123;</span><br><span class="line">                            <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">                            <span class="attribute">margin-left</span>: .<span class="number">5rem</span>;</span><br><span class="line">                            <span class="attribute">color</span>: <span class="number">#363636</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="selector-class">.back-home-button</span> &#123;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">35px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">            <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">            <span class="attribute">align-items</span>: center;</span><br><span class="line">            <span class="attribute">justify-content</span>: center;</span><br><span class="line">            <span class="attribute">margin-right</span>: <span class="number">4px</span>;</span><br><span class="line">            <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">900px</span>)&#123;</span><br><span class="line">    <span class="selector-id">#nav</span> <span class="selector-class">.back-home-button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="number">#20202023</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>)&#123;</span><br><span class="line">    <span class="selector-class">.back-home-button</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.back-menu-list-groups</span> &#123;</span><br><span class="line">        <span class="attribute">padding-bottom</span>: <span class="number">8px</span>;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="number">#20202023</span>;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">2px</span> <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>更改完配置项，hexo cl &amp;&amp; hexo s 看看效果吧！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;参考&lt;a href=&#39;https://blog.zhheo.com/&#39;&gt;&lt;mark class=&quot;hl-label purple&quot;&gt;heo&lt;/mark&gt; &lt;/a&gt;效果&lt;/p&gt;
&lt;div class=&quot;fj-gallery&quot;&gt;&lt;p&gt;&lt;img src=&quot;https://img.</summary>
      
    
    
    
    
    <category term="hexo" scheme="https://blog.lovelee.cn/tags/hexo/"/>
    
    <category term="butterfly" scheme="https://blog.lovelee.cn/tags/butterfly/"/>
    
  </entry>
  
</feed>
